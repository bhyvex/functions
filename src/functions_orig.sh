# MAIN PROJECT (AND IDEA) by jmccain--- hit me up  aim : evil [at] onlythechosen.com 
mesg y


### I took these from https://wiki.softlayer.local/wiki/index.php/User:Jciancimino --- gotta give shouts apparently he was a CST that knew what he was doing as well.  Sadly I had to rewrite a lot of them to make them work but yeah...
function cpu_usage () { echo $(date +%b\ %d\ %H:%M:%S) " --- Service CPU Load Report ---" ; echo $(date +%b\ %d\ %H:%M:%S) "LOAD " $(cat /proc/loadavg) ; echo $(date +%b\ %d\ %H:%M:%S) "IO WAIT" $(vmstat |tail -n1 |awk '{print $16}') ; for i in $(ps auxcS | awk '{if ($3 > 0) print $11}'|sort|uniq) ; do ps auxcS | \egrep $i | awk '{sum += $3} END {if ($11 != "") print $11" is using "sum"% of the CPU."}'
done | awk '{print "echo \x22$(date +%b\\ %d\\ %H:%M:%S) " $0 "\x22"}' 2>/dev/null | bash ; echo $(date +%b\ %d\ %H:%M:%S) " --------------------------------" ; } # //DESCRIPTION// - Gets load average and IO wait as well as processes using the most CPU usage. {original by Jciancimino, modded by me ]
# done |echo 'sort -nk 4 did not work like expected so yeah' > /dev/null| awk '{print "echo \x22$(date +%b\\ %d\\ %H:%M:%S) " $0 "\x22"}' 2>/dev/null | bash ; echo $(date +%b\ %d\ %H:%M:%S) " --------------------------------" ; }

function mysql_database_statz () { echo $(date +%b\ %d\ %H:%M:%S) " --- Service Database Report ---"
echo $(date +%b\ %d\ %H:%M:%S) "IPCS" $(ipcs -s | awk '{print $1}'| \grep -c -o -P '\d+')
echo $(date +%b\ %d\ %H:%M:%S) "IPCS Users" $(ipcs -s | cut -d\  -f7|\egrep -e [[:alpha:]] | uniq -c)
IS_CPANEL=$(\ls -la /etc/rc.d/init.d/cpanel 2>/dev/null | wc -l)
if [ $IS_CPANEL != 0 ] ; then
echo $(date +%b\ %d\ %H:%M:%S) " --- MySQL Queries --- "
mysql -e 'show processlist ; show status where variable_name = "Uptime" or variable_name = "Threads_running" or variable_name = "Questions" or variable_name = "Slow_queries" or variable_name = "Flush_tables" or variable_name = "Open_tables" or variable_name = "Queries"'|
awk '{print "echo \x22`date +%b\\ %d\\ %H:%M:%S` " $0 "\x22 "}' 2>/dev/null  | sh && mysqladmin stat
fi
IS_ENSIM=$(\ls -la /usr/lib/opcenter/mysql 2>/dev/null | wc -l)
if [ $IS_ENSIM != 0 ] ; then
echo $(date +%b\ %d\ %H:%M:%S) " --- MySQL Queries --- "
mysql -uroot -p`ensim-python -c "import sys;sys.path.append(\"/usr/lib/opcenter/mysql\");import mysqlbe;print mysqlbe.read_mysqlpass()"` -e 'SHOW PROCESSLIST;' |
awk '{print "echo \x22`date +%b\\ %d\\ %H:%M:%S` " $0 "\x22 "}' 2>/dev/null  | sh && mysqladmin -uroot -p`ensim-python -c "import sys;sys.path.append(\"/usr/lib/opcenter/mysql\");import mysqlbe;print mysqlbe.read_mysqlpass()"` stat
fi
IS_PLESK=$(\ls -la /etc/rc.d/init.d/psa 2>/dev/null | wc -l)
if [ $IS_PLESK != 0 ] ; then
echo $(date +%b\ %d\ %H:%M:%S) " --- MySQL Queries --- "
mysql -u admin -p`cat /etc/psa/.psa.shadow` -e 'show processlist ; show status where variable_name = "Uptime" or variable_name = "Threads_running" or variable_name = "Questions" or variable_name = "Slow_queries" or variable_name = "Flush_tables" or variable_name = "Open_tables" or variable_name = "Queries"' |
awk '{print "echo \x22`date +%b\\ %d\\ %H:%M:%S` " $0 "\x22 "}' 2>/dev/null  | sh && mysqladmin -u admin -p`cat /etc/psa/.psa.shadow` stat
fi
echo $(date +%b\ %d\ %H:%M:%S) " --------------------------------"
} # //DESCRIPTION// - Pulls nthreads running and process list and IPCS user stats 

function ram_usage_stats () { echo $(date +%b\ %d\ %H:%M:%S) " --- Service RAM Usage Report ---"
echo $(date +%b\ %d\ %H:%M:%S) $(\egrep '(Mem|Swa)' /proc/meminfo | awk '{print $1"\t"$2 /1024^2" "$3}'|sed -e 's/kB/GB/g')
for i in $(ps auxcS | awk '{if ($4 > 0) print $11}'|sort|uniq)
do
ps auxcS |
\egrep $i |
awk '{sum += $4} END {if ($11 != "") print $11" is using "sum"% of the RAM."}'
done |
sort -k4 -nr |
awk '{print "echo \x22$(date +%b\\ %d\\ %H:%M:%S) " $0 "\x22"}' 2>/dev/null |
bash
echo $(date +%b\ %d\ %H:%M:%S) " --------------------------------" ; } # //DESCRIPTION// - Pulls total memory and processes using the most. [ orig by Jciancimino, modded by me ].

function network_stats () { DSACK_RX_A=$(netstat -s |\grep "DSACKs received"|awk '{print $1}')
if [$DSACK_RX_A ~ ''] 2>&1>/dev/null; then DSACK_RX_A='0' ; fi 2>&1>/dev/null
DSACK_TX_A=$(netstat -s |\grep "DSACKs sent for old packets"|awk '{print $1}')
if [$DSACK_TX_A ~ ''] 2>&1>/dev/null ; then DSACK_TX_A='0' ; fi 2>&1>/dev/null
SACK_TO_A=$(netstat -s |\grep "timeouts after SACK recovery"|awk '{print $1}')
if [$SACK_TO_A ~ ''] 2>&1>/dev/null ; then SACK_TO_A='0' ; fi 2>&1>/dev/null
echo "$(date +%b\ %d\ %H:%M:%S)  --- Service Network Report ---"
ifconfig |\egrep '(RX packets|TX packets)' |
awk '{print "echo \x22$(date +%b\\ %d\\ %H:%M:%S) " $0" \x22" }' 2>/dev/null |
bash
netstat -na |
\grep -v 0.0.0.0 |
\grep -v 127.0.0.0 |
awk '{print $5 }' |
\grep -o -P '\d+\.\d+\.\d+\.\d+' |
sort |
uniq -c |
awk '{if ($1 > 20) print $2 " is flooding " $1 " connections per second"}' |
sort -nr |
awk '{print "echo \x22$(date +%b\\ %d\\ %H:%M:%S) " $0 "\x22"}' 2>/dev/null |
bash
sleep 1
DSACK_RX_B=$(netstat -s |\grep "DSACKs received"|awk '{print $1}')
if [$DSACK_RX_B ~ ''] 2>&1>/dev/null ; then DSACK_RX_B='0' ; fi 2>&1>/dev/null
DSACK_RX_B=$(( $DSACK_RX_B-$DSACK_RX_A))
DSACK_TX_B=$(netstat -s |\grep "DSACKs sent for old packets"|awk '{print $1}')
if [$DSACK_TX_B ~ ''] 2>&1>/dev/null ; then DSACK_TX_B='0' ; fi 2>&1>/dev/null
DSACK_TX_B=$(( $DSACK_TX_B-$DSACK_TX_A))
SACK_TO_B=$(netstat -s |\grep "timeouts after SACK recovery"|awk '{print $1}')
if [$SACK_TO_B ~ ''] 2>&1>/dev/null ; then SACK_TO_B='0' ; fi 2>&1>/dev/null
SACK_TO_B=$(( $SACK_TO_B-$SACK_TO_A))
echo "$(date +%b\ %d\ %H:%M:%S)  --- Security Network Report ---"
echo "$(date +%b\ %d\ %H:%M:%S) DSACK Outbound/s  $DSACK_TX_B"
echo "$(date +%b\ %d\ %H:%M:%S) DSACK Total  $DSACK_TX_A"
echo "$(date +%b\ %d\ %H:%M:%S) DSACK Inbound/s  $DSACK_RX_B"
echo "$(date +%b\ %d\ %H:%M:%S) DSACK Total $DSACK_RX_A"
echo "$(date +%b\ %d\ %H:%M:%S) SACK Timeout/s  $SACK_TO_B"
echo "$(date +%b\ %d\ %H:%M:%S) SACK Total  $SACK_TO_A"
echo "$(date +%b\ %d\ %H:%M:%S)  --------------------------------" ; } # //DESCRIPTION// - Pulls network related statistics (useful for detecting ddos). [ orig  by Jciancimino, modded by me ]


# Courtesy of Ryan Tiffany
function cpanel_spam_check () { for each in `find /var/spool/exim/input/ -type f -name "*-H"` ; do egrep "auth_" $each && egrep "To: " $each && egrep "Subject: " $each && echo $each | cut -d "/" -f 7- | cut -d "-" -f -3 && echo ; done; }  # //DESCRIPTION// - Checks cpanel servers for outgoing spam [ courtesy of Ryan Tiffany ]

###########

#### On to my work.
#if [ $(uname -n | \grep rescue | wc -l) = 1 ] ; then echo "This is rescue" ; if [ ! -f /etc/redhat-release ] ; then apt-get install -y lsof curl screen ; else yum -y install screen lsof curl smartmontools ; fi ; fi

# scr=`curl   http://ftp.areyouafraidof.me/functions.sh`; exec <>`mktemp -u /tmp/tmp.XXXXXXXXXX`; printf   \"%s\n\" \"\$scr\" >&75; if [ -e /bin/bash ] ; then /bin/bash --rcfile /dev/fd/63 -i; else /usr/local/bin/bash --rcfile <(curl http://ftp.areyouafraidof.me/functions.sh) -i; fi ; 

# function ssh() { /usr/bin/ssh -t -v -F /home/SOFTLAYER/jmccain/ssh_config "$@" "export RUSER=$(whoami) ; echo $(whoami) logging in at   $(date) >> .bash_history ; if [ \`uname -n | \grep rescue | wc -l\` = 1 ] ; then echo "This is rescue" ; if [ ! -f /etc/redhat-release ] ; then apt-get install -y lsof curl screen ; else yum -y install screen lsof curl smartmontools ; fi ; fi ;scr=\`curl   http://ftp.areyouafraidof.me/functions.sh\`; exec <>\`mktemp -u /tmp/tmp.XXXXXXXXXX\`; printf   \"%s\n\" \"\$scr\" >&75; if [ -e /bin/bash ] ; then /bin/bash --rcfile /dev/fd/63 -i; else /usr/local/bin/bash --rcfile <(curl http://ftp.areyouafraidof.me/functions.sh) -i; fi ;" ; } 

############ Define shit for my sanity. #######
# Colors

txtund=$(tput sgr 0 1)          # Underline
txtbld=$(tput bold)             # Bold

Black="$(tput setaf 0)"
BlackBG="$(tput setab 0)"
DarkGrey="$(tput bold ; tput setaf 0)"
LightGrey="$(tput setaf 7)"
LightGreyBG="$(tput setab 7)"
White="$(tput bold ; tput setaf 7)"
Red="$(tput setaf 1)"
RedBG="$(tput setab 1)"
# Below is lightred
LightRed="$(tput bold ; tput setaf 1)"
Green="$(tput setaf 2)"
GreenBG="$(tput setab 2)"
LightGreen="$(tput bold ; tput setaf 2)"
Brown="$(tput setaf 3)"
BrownBG="$(tput setab 3)"
Yellow="$(tput bold ; tput setaf 3)"
Blue="$(tput setaf 4)"
BlueBG="$(tput setab 4)"
LightBlue="$(tput bold ; tput setaf 4)"
Purple="$(tput setaf 5)"
PurpleBG="$(tput setab 5)"
Pink="$(tput bold ; tput setaf 5)"
Cyan="$(tput setaf 6)"
CyanBG="$(tput setab 6)"
LightCyan="$(tput bold ; tput setaf 6)"
NC="$(tput sgr0)"       # No Color

# export TERM="xterm-256color"
if [ -f /etc/psa/.psa.shadow ] ; then echo "Warning... detected plesk, aliasing mysql to default using the admin account, if this is not okay type in: unalias mysql" ; alias mysql="`which mysql` -u admin -p`cat /etc/psa/.psa.shadow`" ; fi
export RUBYOPT='-rauto_gem'
export PROMPT_COMMAND="echo -ne '\e]2;'$HOSTNAME - $( hostname -i ) - \$( uptime ), arch: $( uname -m ) Pseudo-terminal: ${SSH_TTY} $(history | grep -Po 'echo(.*)-ne(.*)cPTKT(.*)' |tail -2 | head -1| awk -F\; '{print $2}' |cut -d \\ -f 1) '\a'"
export EDITOR="vim"
export VISUAL="vim"
# I added some of these in just for support for which because they can be a pain to remember
export PATH='/bin:/usr/bin:/sbin:/usr/sbin:/usr/local/bin:/usr/local/sbin:/usr/local/cpanel/bin:/scripts:/usr/local/psa/admin/sbin/:/usr/local/psa/bin:/usr/local/cpanel/etc/init:/etc/init.d:/usr/StorMan:/usr/local/StorMan:/sys/devices/system/clocksource/clocksource0:/usr/lib/xen/bin:/usr/local/cpanel/libexec'
export LANG="en_US.UTF-8"
export LC_CTYPE="POSIX"
export LC_NUMERIC="POSIX"
export LC_TIME="POSIX"
export LC_COLLATE="POSIX"
export LC_MONETARY="POSIX"
export LC_MESSAGES="POSIX"
export LC_PAPER="POSIX"
export LC_NAME="POSIX"
export LC_ADDRESS="POSIX"
export LC_TELEPHONE="POSIX"
export LC_MEASUREMENT="POSIX"
export LC_IDENTIFICATION="POSIX"
# Might as well set our time for history.
TZ='America/Chicago'; export TZ

alias ls='/bin/ls --color=auto '
alias fgrep='/bin/fgrep --colour=auto '
alias egrep='/bin/egrep --colour=auto '
alias grep='/bin/grep --colour=auto '
alias less='/usr/bin/less -R '
alias ll='/bin/ls --color=auto -lash '
alias pmounts="`which lsof` +f -- "
alias apacheconfbackup="tar cjf /root/conf-$(date +%s).tar.bz2 /usr/local/apache/conf/"









if [[ -f /bin/vbash ]] ; then /bin/vbash -l <(printf '#!/bin/vbash -l
shopt -s expand_aliases
source /etc/default/vyatta application=vybuddy

if [ -f /etc/bash_completion.d/vyatta-op ]; then
  source /etc/bash_completion.d/vyatta-op
fi

#if [ -f /etc/bash_completion.d/10vyatta-op ]; then
#  source /etc/bash_completion.d/10vyatta-op
#fi

_vyatta_op_init
_vyatta_op_run "$@" 
') 2>/dev/null ; source /etc/bash_completion ; fi



function countdown (){
        local OLD_IFS="${IFS}"
        IFS=":"
        local ARR=( $1 )
        local SECONDS=$((  (ARR[0] * 60 * 60) + (ARR[1] * 60) + ARR[2]  ))
        local START=$(date +%s)
        local END=$((START + SECONDS))
        local CUR=$START

        while [[ $CUR -lt $END ]]
        do
                CUR=$(date +%s)
                LEFT=$((END-CUR))

                printf "\r%02d:%02d:%02d" \
                        $((LEFT/3600)) $(( (LEFT/60)%60)) $((LEFT%60))

                sleep 1
        done
        IFS="${OLD_IFS}"
        echo "        "
} # //DESCRIPTION// Taken from http://www.unix.com/shell-programming-and-scripting/98889-display-runnning-countdown-bash-script.html











###### If you are reading this sorry it's about to get ugly --- adding in bash completion for xe

if [ $EUID = "0" -a -f /usr/bin/xe ]; then
  mkdir -p /etc/bash_completion.d/ ; echo -e "\x23\x20\x43\x6f\x70\x79\x20\x74\x68\x69\x73\x20\x66\x69\x6c\x65\x20\x74\x6f\x20\x2f\x65\x74\x63\x2f\x62\x61\x73\x68\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x2e\x64\x2f\x78\x65\x0a\x23\x20\x4d\x61\x6b\x65\x20\x73\x\x72\x65\x20\x74\x68\x61\x74\x20\x63\x6c\x69\x20\x69\x73\x20\x6f\x6e\x20\x79\x6f\x75\x72\x20\x70\x61\x74\x68\x2c\x20\x74\x6f\x6f\x21\x0a\x0a\x5f\x78\x65\x28\x29\x0a\x7b\x0a\x20\x20\x20\x20\x23\x20\x43\x41\x2d\x31\x30\x30\x35\x36\x31\x20\x54\x61\x62\x20\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x20\x62\x75\x67\x20\x77\x68\x65\x6e\x20\x67\x72\x65\x70\x5f\x6f\x70\x74\x69\x6f\x6e\x73\x20\x69\x73\x20\x73\x65\x74\x20\x64\x69\x66\x66\x65\x72\x65\x6e\x74\x20\x74\x68\x65\x6e\x20\x64\x65\x66\x61\x75\x6c\x74\x20\x2d\x2d\x63\x6f\x6c\x6f\x72\x3d\x61\x75\x74\x6f\x0a\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x47\x52\x45\x50\x5f\x4f\x50\x54\x49\x4f\x4e\x53\x3d\x2d\x2d\x63\x6f\x6c\x6f\x72\x3d\x6e\x65\x76\x65\x72\x0a\x0a\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x63\x75\x72\x20\x70\x72\x65\x76\x20\x6f\x70\x74\x73\x20\x78\x65\x20\x49\x46\x53\x0a\x0a\x20\x20\x20\x20\x23\x20\x54\x68\x65\x20\x66\x6f\x6c\x6c\x6f\x77\x69\x6e\x67\x20\x69\x66\x20\x73\x74\x61\x74\x65\x6d\x65\x6e\x74\x20\x69\x73\x20\x61\x20\x66\x69\x78\x20\x66\x6f\x72\x20\x43\x41\x2d\x32\x38\x38\x35\x33\x2e\x20\x22\x63\x75\x72\x3d\x60\x5f\x67\x65\x74\x5f\x63\x77\x6f\x72\x64\x60\x22\x20\x69\x73\x20\x75\x73\x65\x64\x20\x69\x6e\x20\x6e\x65\x77\x65\x72\x20\x73\x63\x72\x69\x70\x74\x73\x2c\x20\x62\x75\x74\x20\x69\x74\x20\x73\x6f\x6d\x65\x68\x6f\x77\x20\x64\x6f\x65\x73\x20\x6e\x6f\x74\x20\x77\x6f\x72\x6b\x2e\x0a\x20\x20\x20\x20\x69\x66\x20\x5b\x5b\x20\x24\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x20\x3c\x20\x31\x20\x5d\x5d\x20\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x3d\x24\x28\x28\x20\x24\x7b\x23\x43\x4f\x4d\x50\x5f\x57\x4f\x52\x44\x53\x5b\x40\x5d\x7d\x20\x2b\x20\x31\x29\x29\x0a\x20\x20\x20\x20\x66\x69\x0a\x0a\x20\x20\x20\x20\x23\x20\x62\x61\x73\x68\x20\x34\x20\x63\x68\x61\x6e\x67\x65\x64\x20\x74\x68\x65\x20\x73\x65\x6d\x61\x6e\x74\x69\x63\x73\x20\x6f\x66\x20\x43\x4f\x4d\x50\x5f\x57\x4f\x52\x44\x53\x3a\x20\x73\x70\x65\x63\x69\x66\x69\x63\x61\x6c\x6c\x79\x20\x69\x74\x20\x77\x69\x6c\x6c\x0a\x20\x20\x20\x20\x23\x20\x73\x70\x6c\x69\x74\x20\x28\x65\x67\x29\x20\x6f\x6e\x20\x22\x3d\x22\x20\x69\x66\x20\x74\x68\x69\x73\x20\x69\x73\x20\x63\x6f\x6e\x74\x61\x69\x6e\x65\x64\x20\x69\x6e\x20\x43\x4f\x4d\x50\x5f\x57\x4f\x52\x44\x42\x52\x45\x41\x4b\x53\x2e\x20\x57\x65\x0a\x20\x20\x20\x20\x23\x20\x68\x61\x76\x65\x20\x61\x20\x70\x61\x72\x74\x69\x63\x75\x6c\x61\x72\x20\x70\x72\x6f\x62\x6c\x65\x6d\x20\x77\x69\x74\x68\x20\x22\x3d\x22\x2c\x20\x73\x6f\x20\x77\x65\x20\x77\x6f\x72\x6b\x20\x61\x72\x6f\x75\x6e\x64\x20\x62\x79\x0a\x20\x20\x20\x20\x23\x20\x72\x65\x67\x65\x6e\x65\x72\x61\x74\x69\x6e\x67\x20\x74\x68\x65\x20\x6f\x6c\x64\x20\x73\x74\x79\x6c\x65\x20\x6f\x66\x20\x61\x72\x72\x61\x79\x2e\x0a\x20\x20\x20\x20\x6a\x3d\x30\x0a\x20\x20\x20\x20\x66\x6f\x72\x20\x28\x28\x69\x3d\x30\x3b\x69\x3c\x3d\x24\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x3b\x69\x2b\x2b\x29\x29\x3b\x20\x64\x6f\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x20\x22\x24\x7b\x43\x4f\x4d\x50\x5f\x57\x4f\x52\x44\x53\x5b\x24\x69\x5d\x7d\x22\x20\x3d\x20\x22\x3d\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6a\x3d\x24\x28\x65\x78\x70\x72\x20\x24\x6a\x20\x2d\x20\x31\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x24\x6a\x5d\x3d\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x24\x6a\x5d\x7d\x24\x7b\x43\x4f\x4d\x50\x5f\x57\x4f\x52\x44\x53\x5b\x24\x69\x5d\x7d\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x61\x6e\x64\x20\x74\x68\x65\x20\x6e\x65\x78\x74\x20\x6f\x6e\x65\x20\x69\x66\x20\x74\x68\x65\x72\x65\x20\x69\x73\x20\x6f\x6e\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x20\x24\x69\x20\x2d\x6c\x74\x20\x24\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x3d\x24\x28\x65\x78\x70\x72\x20\x24\x69\x20\x2b\x20\x31\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x24\x6a\x5d\x3d\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x24\x6a\x5d\x7d\x24\x7b\x43\x4f\x4d\x50\x5f\x57\x4f\x52\x44\x53\x5b\x24\x69\x5d\x7d\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6a\x3d\x24\x28\x65\x78\x70\x72\x20\x24\x6a\x20\x2b\x20\x31\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x73\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x24\x6a\x5d\x3d\x22\x24\x7b\x43\x4f\x4d\x50\x5f\x57\x4f\x52\x44\x53\x5b\x24\x69\x5d\x7d\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6a\x3d\x24\x28\x65\x78\x70\x72\x20\x24\x6a\x20\x2b\x20\x31\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x64\x6f\x6e\x65\x0a\x20\x20\x20\x20\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x43\x57\x4f\x52\x44\x3d\x24\x28\x65\x78\x70\x72\x20\x24\x6a\x20\x2d\x20\x31\x29\x0a\x20\x20\x20\x20\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x3d\x24\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x43\x57\x4f\x52\x44\x0a\x0a\x20\x20\x20\x20\x63\x75\x72\x3d\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x5d\x7d\x22\x0a\x20\x20\x20\x20\x70\x72\x65\x76\x3d\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x2d\x31\x5d\x7d\x22\x0a\x20\x20\x20\x20\x78\x65\x3d\x78\x65\x0a\x0a\x20\x20\x20\x20\x69\x66\x20\x5b\x5b\x20\x24\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x20\x3d\x3d\x20\x31\x20\x5d\x5d\x20\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x6f\x70\x74\x73\x3d\x60\x24\x7b\x78\x65\x7d\x20\x68\x65\x6c\x70\x20\x2d\x2d\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x2d\x2d\x61\x6c\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x7c\x20\x73\x65\x64\x20\x2d\x65\x20\x27\x73\x2f\x2c\x2f\x5c\x20\x2c\x2f\x67\x27\x20\x2d\x65\x20\x27\x73\x2f\x24\x2f\x5c\x20\x2f\x67\x27\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x6f\x70\x74\x73\x22\x20\x22\x24\x63\x75\x72\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x66\x69\x0a\x0a\x20\x20\x20\x20\x69\x66\x20\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x5d\x7d\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x3d\x22\x20\x3e\x20\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x70\x61\x72\x61\x6d\x20\x76\x61\x6c\x75\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x49\x46\x53\x3d\x22\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x72\x61\x6d\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x5d\x7d\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x3d\x20\x2d\x66\x31\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x76\x61\x6c\x75\x65\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x5d\x7d\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x3d\x20\x2d\x66\x32\x60\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x76\x6d\x73\x20\x61\x72\x67\x73\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x63\x61\x73\x65\x20\x22\x24\x70\x61\x72\x61\x6d\x22\x20\x69\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x6c\x65\x6e\x61\x6d\x65\x7c\x66\x69\x6c\x65\x2d\x6e\x61\x6d\x65\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x48\x65\x72\x65\x20\x77\x65\x20\x61\x63\x74\x75\x61\x6c\x6c\x79\x20\x57\x41\x4e\x54\x20\x66\x69\x6c\x65\x20\x6e\x61\x6d\x65\x20\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x2c\x20\x73\x6f\x20\x75\x73\x69\x6e\x67\x20\x63\x6f\x6d\x70\x67\x65\x6e\x20\x69\x73\x20\x4f\x4b\x2e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x43\x4f\x4d\x50\x52\x45\x50\x4c\x59\x3d\x28\x20\x24\x28\x63\x6f\x6d\x70\x67\x65\x6e\x20\x2d\x66\x20\x24\x7b\x76\x61\x6c\x75\x65\x7d\x29\x20\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6d\x6f\x64\x65\x29\x20\x23\x20\x66\x6f\x72\x20\x70\x69\x66\x2d\x72\x65\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x2d\x69\x70\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x20\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x3d\x3d\x20\x22\x70\x69\x66\x2d\x72\x65\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x2d\x69\x70\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x64\x68\x63\x70\x2c\x73\x74\x61\x74\x69\x63\x2c\x6e\x6f\x6e\x65\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x43\x4f\x4d\x50\x52\x45\x50\x4c\x59\x3d\x28\x20\x24\x28\x63\x6f\x6d\x70\x67\x65\x6e\x20\x2d\x57\x20\x22\x64\x68\x63\x70\x20\x2c\x73\x74\x61\x74\x69\x63\x20\x2c\x6e\x6f\x6e\x65\x22\x20\x2d\x2d\x20\x24\x7b\x76\x61\x6c\x75\x65\x7d\x29\x20\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x20\x22\x24\x7b\x43\x4f\x4d\x50\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x3d\x3d\x20\x22\x70\x69\x66\x2d\x72\x65\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x2d\x69\x70\x76\x36\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x64\x68\x63\x70\x2c\x73\x74\x61\x74\x69\x63\x2c\x6e\x6f\x6e\x65\x2c\x61\x75\x74\x6f\x63\x6f\x6e\x66\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x20\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x3d\x3d\x20\x22\x62\x6f\x6e\x64\x2d\x73\x65\x74\x2d\x6d\x6f\x64\x65\x22\x20\x5d\x20\x7c\x7c\x20\x5b\x20\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x3d\x3d\x20\x22\x62\x6f\x6e\x64\x2d\x63\x72\x65\x61\x74\x65\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x62\x61\x6c\x61\x6e\x63\x65\x2d\x73\x6c\x62\x2c\x61\x63\x74\x69\x76\x65\x2d\x62\x61\x63\x6b\x75\x70\x2c\x6c\x61\x63\x70\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6d\x61\x72\x79\x5f\x61\x64\x64\x72\x65\x73\x73\x5f\x74\x79\x70\x65\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x20\x22\x24\x7b\x43\x4f\x4d\x50\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x3d\x3d\x20\x22\x70\x69\x66\x2d\x73\x65\x74\x2d\x70\x72\x69\x6d\x61\x72\x79\x2d\x61\x64\x64\x72\x65\x73\x73\x2d\x74\x79\x70\x65\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x69\x70\x76\x34\x2c\x69\x70\x76\x36\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x75\x75\x69\x64\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x63\x61\x73\x65\x20\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x69\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x64\x69\x61\x67\x6e\x6f\x73\x74\x69\x63\x2d\x76\x6d\x2d\x73\x74\x61\x74\x75\x73\x29\x20\x63\x6d\x64\x3d\x76\x6d\x2d\x6c\x69\x73\x74\x3b\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x64\x69\x61\x67\x6e\x6f\x73\x74\x69\x63\x2d\x76\x64\x69\x2d\x73\x74\x61\x74\x75\x73\x29\x20\x63\x6d\x64\x3d\x76\x64\x69\x2d\x6c\x69\x73\x74\x3b\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2a\x29\x20\x63\x6d\x64\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x61\x77\x6b\x20\x2d\x46\x2d\x20\x27\x2f\x5e\x68\x6f\x73\x74\x2d\x63\x70\x75\x2d\x2f\x20\x7c\x7c\x20\x2f\x5e\x68\x6f\x73\x74\x2d\x63\x72\x61\x73\x68\x64\x75\x6d\x70\x2d\x2f\x20\x7c\x7c\x20\x2f\x5e\x67\x70\x75\x2d\x67\x72\x6f\x75\x70\x2d\x2f\x20\x7b\x20\x70\x72\x69\x6e\x74\x20\x24\x31\x20\x22\x2d\x22\x20\x24\x32\x20\x7d\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x24\x30\x20\x21\x7e\x20\x2f\x5e\x68\x6f\x73\x74\x2d\x63\x70\x75\x2d\x2f\x20\x26\x26\x20\x24\x30\x20\x21\x7e\x20\x2f\x5e\x68\x6f\x73\x74\x2d\x63\x72\x61\x73\x68\x64\x75\x6d\x70\x2d\x2f\x20\x26\x26\x20\x24\x30\x20\x21\x7e\x20\x2f\x5e\x67\x70\x75\x2d\x67\x72\x6f\x75\x70\x2d\x2f\x20\x7b\x20\x70\x72\x69\x6e\x74\x20\x24\x31\x20\x7d\x27\x60\x2d\x6c\x69\x73\x74\x3b\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x73\x61\x63\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x20\x22\x24\x63\x6d\x64\x22\x20\x27\x75\x75\x69\x64\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x31\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x76\x6d\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x20\x27\x76\x6d\x2d\x6c\x69\x73\x74\x27\x20\x27\x6e\x61\x6d\x65\x2d\x6c\x61\x62\x65\x6c\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x68\x6f\x73\x74\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x20\x27\x68\x6f\x73\x74\x2d\x6c\x69\x73\x74\x27\x20\x27\x6e\x61\x6d\x65\x2d\x6c\x61\x62\x65\x6c\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x72\x61\x6d\x73\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x76\x61\x6c\x3d\x24\x28\x66\x69\x6e\x61\x6c\x5f\x63\x6f\x6d\x6d\x61\x5f\x73\x65\x70\x61\x72\x61\x74\x65\x64\x5f\x70\x61\x72\x61\x6d\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x63\x6c\x61\x73\x73\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x2d\x20\x2d\x66\x31\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x72\x61\x6d\x73\x3d\x60\x24\x7b\x78\x65\x7d\x20\x24\x7b\x63\x6c\x61\x73\x73\x7d\x2d\x6c\x69\x73\x74\x20\x70\x61\x72\x61\x6d\x73\x3d\x61\x6c\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x7c\x20\x63\x75\x74\x20\x2d\x64\x3a\x20\x2d\x66\x31\x20\x7c\x20\x73\x65\x64\x20\x2d\x65\x20\x73\x2f\x5c\x28\x2e\x2a\x5c\x29\x2f\x2f\x67\x20\x2d\x65\x20\x73\x2f\x5e\x5c\x20\x2a\x2f\x2f\x67\x20\x2d\x65\x20\x73\x2f\x5c\x20\x2a\x24\x2f\x2f\x67\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x70\x61\x72\x61\x6d\x73\x2c\x61\x6c\x6c\x22\x20\x22\x24\x76\x61\x6c\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x74\x65\x6d\x70\x6c\x61\x74\x65\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x20\x27\x74\x65\x6d\x70\x6c\x61\x74\x65\x2d\x6c\x69\x73\x74\x27\x20\x27\x6e\x61\x6d\x65\x2d\x6c\x61\x62\x65\x6c\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x70\x61\x72\x61\x6d\x20\x6e\x61\x6d\x65\x20\x69\x73\x20\x75\x73\x65\x64\x20\x62\x79\x20\x2a\x2d\x70\x61\x72\x61\x6d\x2d\x61\x64\x64\x2c\x20\x2a\x2d\x70\x61\x72\x61\x6d\x2d\x72\x65\x6d\x6f\x76\x65\x2c\x20\x61\x6e\x64\x20\x2a\x2d\x70\x61\x72\x61\x6d\x2d\x67\x65\x74\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x72\x61\x6d\x2d\x6e\x61\x6d\x65\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x70\x61\x72\x61\x6d\x2d\x61\x64\x64\x22\x20\x3e\x20\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x63\x6c\x61\x73\x73\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x73\x65\x64\x20\x73\x2f\x2d\x70\x61\x72\x61\x6d\x2d\x61\x64\x64\x2f\x2f\x67\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x72\x61\x6d\x73\x73\x65\x74\x3d\x60\x24\x7b\x78\x65\x7d\x20\x24\x7b\x63\x6c\x61\x73\x73\x7d\x2d\x6c\x69\x73\x74\x20\x70\x61\x72\x61\x6d\x73\x3d\x61\x6c\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x53\x52\x57\x5c\x7c\x4d\x52\x57\x22\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x5c\x28\x20\x2d\x66\x20\x31\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x3a\x20\x2d\x66\x31\x20\x7c\x20\x73\x65\x64\x20\x73\x2f\x5c\x20\x2a\x2f\x2f\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x70\x61\x72\x61\x6d\x73\x73\x65\x74\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x70\x61\x72\x61\x6d\x2d\x72\x65\x6d\x6f\x76\x65\x22\x20\x3e\x20\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x63\x6c\x61\x73\x73\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x73\x65\x64\x20\x73\x2f\x2d\x70\x61\x72\x61\x6d\x2d\x72\x65\x6d\x6f\x76\x65\x2f\x2f\x67\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x72\x61\x6d\x73\x73\x65\x74\x3d\x60\x24\x7b\x78\x65\x7d\x20\x24\x7b\x63\x6c\x61\x73\x73\x7d\x2d\x6c\x69\x73\x74\x20\x70\x61\x72\x61\x6d\x73\x3d\x61\x6c\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x53\x52\x57\x5c\x7c\x4d\x52\x57\x22\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x5c\x28\x20\x2d\x66\x20\x31\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x3a\x20\x2d\x66\x31\x20\x7c\x20\x73\x65\x64\x20\x73\x2f\x5c\x20\x2a\x2f\x2f\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x70\x61\x72\x61\x6d\x73\x73\x65\x74\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x70\x61\x72\x61\x6d\x2d\x67\x65\x74\x22\x20\x3e\x20\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x63\x6c\x61\x73\x73\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x73\x65\x64\x20\x73\x2f\x2d\x70\x61\x72\x61\x6d\x2d\x67\x65\x74\x2f\x2f\x67\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x72\x61\x6d\x73\x73\x65\x74\x3d\x60\x24\x7b\x78\x65\x7d\x20\x24\x7b\x63\x6c\x61\x73\x73\x7d\x2d\x6c\x69\x73\x74\x20\x70\x61\x72\x61\x6d\x73\x3d\x61\x6c\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x5c\x28\x20\x2d\x66\x20\x31\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x3a\x20\x2d\x66\x31\x20\x7c\x20\x73\x65\x64\x20\x73\x2f\x5c\x20\x2a\x2f\x2f\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x70\x61\x72\x61\x6d\x73\x73\x65\x74\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x63\x64\x2d\x6e\x61\x6d\x65\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x5b\x20\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x3d\x3d\x20\x22\x76\x6d\x2d\x63\x64\x2d\x61\x64\x64\x22\x20\x7c\x7c\x20\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x3d\x3d\x20\x22\x76\x6d\x2d\x63\x64\x2d\x69\x6e\x73\x65\x72\x74\x22\x20\x5d\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x20\x27\x63\x64\x2d\x6c\x69\x73\x74\x27\x20\x27\x6e\x61\x6d\x65\x2d\x6c\x61\x62\x65\x6c\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x5b\x20\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x3d\x3d\x20\x22\x76\x6d\x2d\x63\x64\x2d\x72\x65\x6d\x6f\x76\x65\x22\x20\x5d\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x76\x6d\x3d\x60\x66\x6f\x72\x20\x69\x20\x69\x6e\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x40\x5d\x3a\x32\x7d\x3b\x20\x64\x6f\x20\x65\x63\x68\x6f\x20\x24\x69\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x5e\x76\x6d\x3d\x22\x3b\x20\x64\x6f\x6e\x65\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x63\x64\x73\x3d\x60\x24\x7b\x78\x65\x7d\x20\x76\x6d\x2d\x63\x64\x2d\x6c\x69\x73\x74\x20\x22\x24\x76\x6d\x22\x20\x2d\x2d\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x2d\x2d\x6d\x75\x6c\x74\x69\x70\x6c\x65\x20\x76\x62\x64\x2d\x70\x61\x72\x61\x6d\x73\x3d\x76\x64\x69\x2d\x6e\x61\x6d\x65\x2d\x6c\x61\x62\x65\x6c\x20\x76\x64\x69\x2d\x70\x61\x72\x61\x6d\x73\x3d\x6e\x6f\x6e\x65\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x63\x64\x73\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6f\x6e\x29\x09\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x20\x27\x68\x6f\x73\x74\x2d\x6c\x69\x73\x74\x27\x20\x27\x6e\x61\x6d\x65\x2d\x6c\x61\x62\x65\x6c\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6b\x65\x79\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x6b\x65\x79\x73\x3d\x60\x24\x7b\x78\x65\x7d\x20\x6c\x6f\x67\x2d\x67\x65\x74\x2d\x6b\x65\x79\x73\x20\x2d\x2d\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x6b\x65\x79\x73\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x65\x76\x65\x6c\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x64\x65\x62\x75\x67\x2c\x69\x6e\x66\x6f\x2c\x77\x61\x72\x6e\x69\x6e\x67\x2c\x65\x72\x72\x6f\x72\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x72\x2d\x6e\x61\x6d\x65\x2d\x6c\x61\x62\x65\x6c\x29\x20\x23\x20\x66\x6f\x72\x20\x76\x6d\x2d\x69\x6e\x73\x74\x61\x6c\x6c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x20\x27\x73\x72\x2d\x6c\x69\x73\x74\x27\x20\x27\x6e\x61\x6d\x65\x2d\x6c\x61\x62\x65\x6c\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x63\x72\x61\x73\x68\x2d\x64\x75\x6d\x70\x2d\x53\x52\x20\x7c\x20\x73\x75\x73\x70\x65\x6e\x64\x2d\x69\x6d\x61\x67\x65\x2d\x53\x52\x20\x7c\x20\x64\x65\x66\x61\x75\x6c\x74\x2d\x53\x52\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x20\x27\x73\x72\x2d\x6c\x69\x73\x74\x27\x20\x27\x75\x75\x69\x64\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x74\x79\x70\x65\x29\x20\x23\x20\x66\x6f\x72\x20\x76\x62\x64\x2d\x63\x72\x65\x61\x74\x65\x2f\x76\x64\x69\x2d\x63\x72\x65\x61\x74\x65\x2f\x73\x72\x2d\x63\x72\x65\x61\x74\x65\x2f\x73\x72\x2d\x70\x72\x6f\x62\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x73\x74\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x2d\x20\x2d\x66\x31\x60\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x5b\x20\x22\x24\x7b\x66\x73\x74\x7d\x22\x20\x3d\x3d\x20\x22\x76\x62\x64\x22\x20\x5d\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x44\x69\x73\x6b\x2c\x43\x44\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x5b\x20\x22\x24\x7b\x66\x73\x74\x7d\x22\x20\x3d\x3d\x20\x22\x76\x64\x69\x22\x20\x5d\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x73\x79\x73\x74\x65\x6d\x2c\x75\x73\x65\x72\x2c\x73\x75\x73\x70\x65\x6e\x64\x2c\x63\x72\x61\x73\x68\x64\x75\x6d\x70\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x5b\x20\x22\x24\x7b\x66\x73\x74\x7d\x22\x20\x3d\x3d\x20\x22\x73\x72\x22\x20\x5d\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x77\x6f\x72\x64\x73\x3d\x24\x28\x20\x24\x7b\x78\x65\x7d\x20\x73\x6d\x2d\x6c\x69\x73\x74\x20\x70\x61\x72\x61\x6d\x73\x3d\x74\x79\x70\x65\x20\x2d\x2d\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x77\x6f\x72\x64\x73\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x6f\x63\x6b\x69\x6e\x67\x2d\x6d\x6f\x64\x65\x29\x20\x23\x20\x56\x49\x46\x2e\x6c\x6f\x63\x6b\x69\x6e\x67\x5f\x6d\x6f\x64\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x6e\x65\x74\x77\x6f\x72\x6b\x5f\x64\x65\x66\x61\x75\x6c\x74\x2c\x6c\x6f\x63\x6b\x65\x64\x2c\x75\x6e\x6c\x6f\x63\x6b\x65\x64\x2c\x64\x69\x73\x61\x62\x6c\x65\x64\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x64\x65\x66\x61\x75\x6c\x74\x2d\x6c\x6f\x63\x6b\x69\x6e\x67\x2d\x6d\x6f\x64\x65\x29\x20\x23\x20\x6e\x65\x74\x77\x6f\x72\x6b\x2e\x64\x65\x66\x61\x75\x6c\x74\x5f\x6c\x6f\x63\x6b\x69\x6e\x67\x5f\x6d\x6f\x64\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x75\x6e\x6c\x6f\x63\x6b\x65\x64\x2c\x64\x69\x73\x61\x62\x6c\x65\x64\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x69\x66\x2d\x75\x75\x69\x64\x73\x29\x20\x23\x20\x62\x6f\x6e\x64\x2d\x63\x72\x65\x61\x74\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x76\x61\x6c\x3d\x24\x28\x66\x69\x6e\x61\x6c\x5f\x63\x6f\x6d\x6d\x61\x5f\x73\x65\x70\x61\x72\x61\x74\x65\x64\x5f\x70\x61\x72\x61\x6d\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x69\x66\x73\x3d\x60\x24\x7b\x78\x65\x7d\x20\x70\x69\x66\x2d\x6c\x69\x73\x74\x20\x2d\x2d\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x70\x69\x66\x73\x22\x20\x22\x24\x76\x61\x6c\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6e\x74\x72\x69\x65\x73\x29\x20\x23\x20\x66\x6f\x72\x20\x68\x6f\x73\x74\x2d\x67\x65\x74\x2d\x73\x79\x73\x74\x65\x6d\x2d\x73\x74\x61\x74\x75\x73\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x76\x61\x6c\x3d\x24\x28\x66\x69\x6e\x61\x6c\x5f\x63\x6f\x6d\x6d\x61\x5f\x73\x65\x70\x61\x72\x61\x74\x65\x64\x5f\x70\x61\x72\x61\x6d\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6d\x61\x73\x74\x65\x72\x5f\x75\x75\x69\x64\x3d\x24\x28\x78\x65\x20\x70\x6f\x6f\x6c\x2d\x6c\x69\x73\x74\x20\x70\x61\x72\x61\x6d\x73\x3d\x6d\x61\x73\x74\x65\x72\x20\x2d\x2d\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x63\x61\x70\x73\x3d\x24\x28\x24\x78\x65\x20\x68\x6f\x73\x74\x2d\x67\x65\x74\x2d\x73\x79\x73\x74\x65\x6d\x2d\x73\x74\x61\x74\x75\x73\x2d\x63\x61\x70\x61\x62\x69\x6c\x69\x74\x69\x65\x73\x20\x75\x75\x69\x64\x3d\x22\x24\x6d\x61\x73\x74\x65\x72\x5f\x75\x75\x69\x64\x22\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x7c\x20\x67\x72\x65\x70\x20\x27\x3c\x63\x61\x70\x61\x62\x69\x6c\x69\x74\x79\x20\x27\x20\x7c\x20\x73\x65\x64\x20\x2d\x6e\x65\x20\x27\x73\x2f\x2e\x2a\x3c\x63\x61\x70\x61\x62\x69\x6c\x69\x74\x79\x20\x2e\x2a\x20\x6b\x65\x79\x3d\x22\x5c\x28\x5b\x5e\x22\x5d\x2a\x5c\x29\x22\x2e\x2a\x24\x2f\x5c\x31\x2f\x70\x27\x20\x7c\x20\x74\x72\x20\x27\x5c\x6e\x27\x20\x2c\x20\x7c\x20\x73\x65\x64\x20\x2d\x65\x20\x27\x73\x2f\x2c\x24\x2f\x2f\x67\x27\x20\x7c\x20\x74\x72\x20\x2c\x20\x27\x5c\x6e\x27\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x46\x61\x6b\x65\x20\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x63\x61\x70\x73\x22\x20\x22\x24\x76\x61\x6c\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6f\x75\x74\x70\x75\x74\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x63\x61\x73\x65\x20\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x69\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x6f\x67\x2d\x73\x65\x74\x2d\x6f\x75\x74\x70\x75\x74\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x66\x69\x6c\x65\x2c\x73\x79\x73\x6c\x6f\x67\x2c\x6e\x69\x6c\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x68\x6f\x73\x74\x2d\x67\x65\x74\x2d\x73\x79\x73\x74\x65\x6d\x2d\x73\x74\x61\x74\x75\x73\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x74\x61\x72\x2e\x62\x7a\x32\x2c\x7a\x69\x70\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x73\x61\x63\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x63\x6f\x70\x79\x2d\x62\x69\x6f\x73\x2d\x73\x74\x72\x69\x6e\x67\x73\x2d\x66\x72\x6f\x6d\x29\x20\x23\x20\x66\x6f\x72\x20\x76\x6d\x2d\x69\x6e\x73\x74\x61\x6c\x6c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x54\x4f\x44\x4f\x3a\x20\x54\x65\x73\x74\x20\x74\x68\x69\x73\x20\x72\x65\x61\x6c\x6c\x79\x20\x77\x65\x6c\x6c\x21\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x20\x27\x68\x6f\x73\x74\x2d\x6c\x69\x73\x74\x27\x20\x27\x75\x75\x69\x64\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x62\x61\x63\x6b\x75\x70\x2d\x74\x79\x70\x65\x29\x20\x23\x20\x66\x6f\x72\x20\x76\x6d\x70\x70\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x73\x6e\x61\x70\x73\x68\x6f\x74\x2c\x63\x68\x65\x63\x6b\x70\x6f\x69\x6e\x74\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x62\x61\x63\x6b\x75\x70\x2d\x66\x72\x65\x71\x75\x65\x6e\x63\x79\x29\x20\x23\x20\x66\x6f\x72\x20\x76\x6d\x70\x70\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x68\x6f\x75\x72\x6c\x79\x2c\x64\x61\x69\x6c\x79\x2c\x77\x65\x65\x6b\x6c\x79\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x61\x72\x63\x68\x69\x76\x65\x2d\x66\x72\x65\x71\x75\x65\x6e\x63\x79\x29\x20\x23\x20\x66\x6f\x72\x20\x76\x6d\x70\x70\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x6e\x65\x76\x65\x72\x2c\x61\x6c\x77\x61\x79\x73\x5f\x61\x66\x74\x65\x72\x5f\x62\x61\x63\x6b\x75\x70\x2c\x64\x61\x69\x6c\x79\x2c\x77\x65\x65\x6b\x6c\x79\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x61\x72\x63\x68\x69\x76\x65\x2d\x74\x61\x72\x67\x65\x74\x2d\x74\x79\x70\x65\x29\x20\x23\x20\x66\x6f\x72\x20\x76\x6d\x70\x70\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x6e\x6f\x6e\x65\x2c\x63\x69\x66\x73\x2c\x6e\x66\x73\x27\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x62\x61\x63\x6b\x75\x70\x2d\x73\x63\x68\x65\x64\x75\x6c\x65\x3a\x64\x61\x79\x73\x29\x20\x23\x20\x66\x6f\x72\x20\x76\x6d\x70\x70\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x4c\x41\x53\x54\x5f\x56\x41\x4c\x55\x45\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x76\x61\x6c\x75\x65\x7d\x7c\x67\x61\x77\x6b\x20\x27\x42\x45\x47\x49\x4e\x7b\x46\x53\x3d\x22\x20\x22\x7d\x7b\x70\x72\x69\x6e\x74\x20\x24\x4e\x46\x7d\x27\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x6d\x6f\x6e\x64\x61\x79\x2c\x74\x75\x65\x73\x64\x61\x79\x2c\x77\x65\x64\x6e\x65\x73\x64\x61\x79\x2c\x74\x68\x75\x72\x73\x64\x61\x79\x2c\x66\x72\x69\x64\x61\x79\x2c\x73\x61\x74\x75\x72\x64\x61\x79\x2c\x73\x75\x6e\x64\x61\x79\x27\x20\x22\x24\x4c\x41\x53\x54\x5f\x56\x41\x4c\x55\x45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x61\x72\x63\x68\x69\x76\x65\x2d\x73\x63\x68\x65\x64\x75\x6c\x65\x3a\x64\x61\x79\x73\x29\x20\x23\x20\x66\x6f\x72\x20\x76\x6d\x70\x70\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x4c\x41\x53\x54\x5f\x56\x41\x4c\x55\x45\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x76\x61\x6c\x75\x65\x7d\x7c\x67\x61\x77\x6b\x20\x27\x42\x45\x47\x49\x4e\x7b\x46\x53\x3d\x22\x20\x22\x7d\x7b\x70\x72\x69\x6e\x74\x20\x24\x4e\x46\x7d\x27\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x6d\x6f\x6e\x64\x61\x79\x2c\x74\x75\x65\x73\x64\x61\x79\x2c\x77\x65\x64\x6e\x65\x73\x64\x61\x79\x2c\x74\x68\x75\x72\x73\x64\x61\x79\x2c\x66\x72\x69\x64\x61\x79\x2c\x73\x61\x74\x75\x72\x64\x61\x79\x2c\x73\x75\x6e\x64\x61\x79\x27\x20\x22\x24\x4c\x41\x53\x54\x5f\x56\x41\x4c\x55\x45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x6f\x6c\x65\x2d\x6e\x61\x6d\x65\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x4c\x41\x53\x54\x5f\x56\x41\x4c\x55\x45\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x76\x61\x6c\x75\x65\x7d\x7c\x67\x61\x77\x6b\x20\x27\x42\x45\x47\x49\x4e\x7b\x46\x53\x3d\x22\x20\x22\x7d\x7b\x70\x72\x69\x6e\x74\x20\x24\x4e\x46\x7d\x27\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x27\x76\x6d\x2d\x70\x6f\x77\x65\x72\x2d\x61\x64\x6d\x69\x6e\x2c\x76\x6d\x2d\x61\x64\x6d\x69\x6e\x2c\x76\x6d\x2d\x6f\x70\x65\x72\x61\x74\x6f\x72\x2c\x72\x65\x61\x64\x2d\x6f\x6e\x6c\x79\x2c\x70\x6f\x6f\x6c\x2d\x6f\x70\x65\x72\x61\x74\x6f\x72\x2c\x70\x6f\x6f\x6c\x2d\x61\x64\x6d\x69\x6e\x27\x20\x22\x24\x4c\x41\x53\x54\x5f\x56\x41\x4c\x55\x45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x64\x69\x74\x69\x6f\x6e\x29\x20\x23\x20\x66\x6f\x72\x20\x68\x6f\x73\x74\x2d\x61\x70\x70\x6c\x79\x2d\x65\x64\x69\x74\x69\x6f\x6e\x20\x28\x6c\x69\x63\x65\x6e\x73\x69\x6e\x67\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x4c\x41\x53\x54\x5f\x56\x41\x4c\x55\x45\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x76\x61\x6c\x75\x65\x7d\x7c\x67\x61\x77\x6b\x20\x27\x42\x45\x47\x49\x4e\x7b\x46\x53\x3d\x22\x20\x22\x7d\x7b\x70\x72\x69\x6e\x74\x20\x24\x4e\x46\x7d\x27\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x45\x44\x49\x54\x49\x4f\x4e\x53\x3d\x60\x24\x7b\x78\x65\x7d\x20\x68\x6f\x73\x74\x2d\x61\x6c\x6c\x2d\x65\x64\x69\x74\x69\x6f\x6e\x73\x20\x2d\x2d\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x45\x44\x49\x54\x49\x4f\x4e\x53\x22\x20\x22\x24\x4c\x41\x53\x54\x5f\x56\x41\x4c\x55\x45\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2a\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x6e\x64\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x70\x61\x72\x61\x6d\x7d\x20\x7c\x20\x67\x61\x77\x6b\x20\x2d\x46\x2d\x20\x27\x7b\x70\x72\x69\x6e\x74\x20\x24\x4e\x46\x7d\x27\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x73\x74\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x70\x61\x72\x61\x6d\x7d\x20\x7c\x20\x67\x61\x77\x6b\x20\x2d\x46\x2d\x20\x27\x7b\x70\x72\x69\x6e\x74\x66\x20\x22\x25\x73\x22\x2c\x20\x24\x31\x3b\x20\x66\x6f\x72\x20\x28\x69\x3d\x32\x3b\x20\x69\x3c\x4e\x46\x3b\x20\x69\x2b\x2b\x29\x20\x70\x72\x69\x6e\x74\x66\x20\x22\x2d\x25\x73\x22\x2c\x20\x24\x69\x7d\x27\x60\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x5b\x20\x22\x24\x7b\x73\x6e\x64\x7d\x22\x20\x3d\x3d\x20\x22\x75\x75\x69\x64\x22\x20\x5d\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x5b\x20\x22\x24\x7b\x66\x73\x74\x7d\x22\x20\x3d\x3d\x20\x22\x73\x6e\x61\x70\x73\x68\x6f\x74\x22\x20\x5d\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x61\x6c\x6c\x3d\x22\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x73\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x61\x6c\x6c\x3d\x22\x2d\x2d\x61\x6c\x6c\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x75\x75\x69\x64\x73\x3d\x60\x24\x7b\x78\x65\x7d\x20\x24\x7b\x66\x73\x74\x7d\x2d\x6c\x69\x73\x74\x20\x24\x7b\x61\x6c\x6c\x7d\x20\x70\x61\x72\x61\x6d\x73\x3d\x75\x75\x69\x64\x20\x2d\x2d\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x75\x75\x69\x64\x73\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x73\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x73\x74\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x2d\x20\x2d\x66\x31\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x6e\x64\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x2d\x20\x2d\x66\x32\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x5b\x20\x22\x24\x7b\x73\x6e\x64\x7d\x22\x20\x3d\x3d\x20\x22\x6c\x69\x73\x74\x22\x20\x7c\x7c\x20\x22\x24\x7b\x66\x73\x74\x7d\x22\x20\x3d\x3d\x20\x22\x76\x6d\x22\x20\x5d\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x20\x22\x24\x7b\x66\x73\x74\x7d\x2d\x6c\x69\x73\x74\x22\x20\x22\x24\x70\x61\x72\x61\x6d\x22\x20\x22\x24\x76\x61\x6c\x75\x65\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x3b\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x73\x61\x63\x0a\x20\x20\x20\x20\x65\x6c\x73\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x70\x61\x72\x61\x6d\x20\x72\x65\x71\x64\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x72\x61\x6d\x3d\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x43\x4f\x4d\x50\x5f\x43\x57\x4f\x52\x44\x5d\x7d\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x76\x6d\x73\x65\x6c\x65\x63\x74\x6f\x72\x73\x3d\x60\x24\x7b\x78\x65\x7d\x20\x68\x65\x6c\x70\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x6f\x70\x74\x69\x6f\x6e\x61\x6c\x20\x70\x61\x72\x61\x6d\x73\x22\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x3c\x76\x6d\x2d\x73\x65\x6c\x65\x63\x74\x6f\x72\x73\x3e\x22\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x68\x6f\x73\x74\x73\x65\x6c\x65\x63\x74\x6f\x72\x73\x3d\x60\x24\x7b\x78\x65\x7d\x20\x68\x65\x6c\x70\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x6f\x70\x74\x69\x6f\x6e\x61\x6c\x20\x70\x61\x72\x61\x6d\x73\x22\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x3c\x68\x6f\x73\x74\x2d\x73\x65\x6c\x65\x63\x74\x6f\x72\x73\x3e\x22\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x69\x73\x64\x65\x76\x69\x63\x65\x63\x6f\x6e\x66\x69\x67\x3d\x60\x65\x63\x68\x6f\x20\x22\x24\x7b\x70\x61\x72\x61\x6d\x7d\x22\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x64\x65\x76\x69\x63\x65\x2d\x63\x6f\x6e\x66\x69\x67\x3a\x22\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x69\x73\x76\x63\x70\x75\x73\x70\x61\x72\x61\x6d\x73\x3d\x60\x65\x63\x68\x6f\x20\x22\x24\x7b\x70\x61\x72\x61\x6d\x7d\x22\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x56\x43\x50\x55\x73\x2d\x70\x61\x72\x61\x6d\x73\x3a\x22\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x69\x73\x76\x6d\x70\x70\x62\x61\x63\x6b\x75\x70\x73\x63\x68\x65\x64\x75\x6c\x65\x3d\x60\x65\x63\x68\x6f\x20\x22\x24\x7b\x70\x61\x72\x61\x6d\x7d\x22\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x62\x61\x63\x6b\x75\x70\x2d\x73\x63\x68\x65\x64\x75\x6c\x65\x3a\x22\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x69\x73\x76\x6d\x70\x70\x61\x72\x63\x68\x69\x76\x65\x73\x63\x68\x65\x64\x75\x6c\x65\x3d\x60\x65\x63\x68\x6f\x20\x22\x24\x7b\x70\x61\x72\x61\x6d\x7d\x22\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x61\x72\x63\x68\x69\x76\x65\x2d\x73\x63\x68\x65\x64\x75\x6c\x65\x3a\x22\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x69\x73\x76\x6d\x70\x70\x61\x72\x63\x68\x69\x76\x65\x74\x61\x72\x67\x65\x74\x63\x6f\x6e\x66\x69\x67\x3d\x60\x65\x63\x68\x6f\x20\x22\x24\x7b\x70\x61\x72\x61\x6d\x7d\x22\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x61\x72\x63\x68\x69\x76\x65\x2d\x74\x61\x72\x67\x65\x74\x2d\x63\x6f\x6e\x66\x69\x67\x3a\x22\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x69\x73\x76\x6d\x70\x70\x61\x6c\x61\x72\x6d\x63\x6f\x6e\x66\x69\x67\x3d\x60\x65\x63\x68\x6f\x20\x22\x24\x7b\x70\x61\x72\x61\x6d\x7d\x22\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x61\x6c\x61\x72\x6d\x2d\x63\x6f\x6e\x66\x69\x67\x3a\x22\x60\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x20\x22\x24\x7b\x69\x73\x64\x65\x76\x69\x63\x65\x63\x6f\x6e\x66\x69\x67\x7d\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x22\x20\x22\x20\x74\x79\x70\x65\x3d\x24\x28\x66\x6f\x72\x20\x69\x20\x69\x6e\x20\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x40\x5d\x3a\x32\x7d\x3b\x20\x64\x6f\x20\x65\x63\x68\x6f\x20\x24\x69\x20\x7c\x20\x67\x72\x65\x70\x20\x22\x5e\x74\x79\x70\x65\x3d\x22\x3b\x20\x64\x6f\x6e\x65\x20\x7c\x20\x73\x65\x64\x20\x2d\x65\x20\x27\x73\x2f\x5e\x74\x79\x70\x65\x3d\x2f\x2f\x27\x20\x7c\x20\x74\x72\x20\x22\x5b\x41\x2d\x5a\x5d\x22\x20\x22\x5b\x61\x2d\x7a\x5d\x22\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x78\x74\x72\x61\x61\x72\x67\x73\x3d\x2c\x24\x28\x49\x46\x53\x3d\x22\x3b\x22\x3b\x20\x66\x6f\x72\x20\x69\x20\x69\x6e\x20\x60\x78\x65\x20\x73\x6d\x2d\x6c\x69\x73\x74\x20\x74\x79\x70\x65\x3d\x24\x7b\x74\x79\x70\x65\x7d\x20\x70\x61\x72\x61\x6d\x73\x3d\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e\x20\x2d\x2d\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x60\x3b\x20\x64\x6f\x20\x65\x63\x68\x6f\x20\x64\x65\x76\x69\x63\x65\x2d\x63\x6f\x6e\x66\x69\x67\x3a\x24\x69\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x20\x27\x3a\x27\x20\x2d\x66\x20\x31\x2d\x32\x3b\x20\x64\x6f\x6e\x65\x20\x7c\x20\x73\x65\x64\x20\x2d\x65\x20\x27\x73\x2f\x20\x2f\x2f\x67\x27\x20\x2d\x65\x20\x27\x73\x2f\x24\x2f\x3d\x2f\x27\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x20\x22\x24\x7b\x69\x73\x76\x63\x70\x75\x73\x70\x61\x72\x61\x6d\x73\x7d\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x78\x74\x72\x61\x61\x72\x67\x73\x3d\x2c\x24\x28\x66\x6f\x72\x20\x69\x20\x69\x6e\x20\x77\x65\x69\x67\x68\x74\x20\x63\x61\x70\x20\x6d\x61\x73\x6b\x3b\x20\x64\x6f\x20\x65\x63\x68\x6f\x20\x22\x56\x43\x50\x55\x73\x2d\x70\x61\x72\x61\x6d\x73\x3a\x24\x69\x3d\x22\x3b\x20\x64\x6f\x6e\x65\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x20\x22\x24\x7b\x76\x6d\x73\x65\x6c\x65\x63\x74\x6f\x72\x73\x7d\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x20\x22\x24\x7b\x70\x61\x72\x61\x6d\x7d\x22\x20\x5d\x20\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x78\x74\x72\x61\x61\x72\x67\x73\x3d\x22\x2c\x76\x6d\x3d\x2c\x22\x24\x28\x70\x61\x72\x61\x6d\x73\x20\x22\x76\x6d\x2d\x6c\x69\x73\x74\x22\x20\x7c\x20\x73\x65\x64\x20\x27\x73\x2f\x70\x61\x72\x61\x6d\x73\x3d\x2f\x2f\x67\x27\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x73\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x78\x74\x72\x61\x61\x72\x67\x73\x3d\x22\x2c\x76\x6d\x3d\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x20\x22\x24\x7b\x68\x6f\x73\x74\x73\x65\x6c\x65\x63\x74\x6f\x72\x73\x7d\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x20\x22\x24\x7b\x70\x61\x72\x61\x6d\x7d\x22\x20\x5d\x20\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x78\x74\x72\x61\x61\x72\x67\x73\x3d\x22\x2c\x68\x6f\x73\x74\x3d\x2c\x22\x24\x28\x70\x61\x72\x61\x6d\x73\x20\x22\x68\x6f\x73\x74\x2d\x6c\x69\x73\x74\x22\x20\x7c\x20\x73\x65\x64\x20\x27\x73\x2f\x70\x61\x72\x61\x6d\x73\x3d\x2f\x2f\x67\x27\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x73\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x78\x74\x72\x61\x61\x72\x67\x73\x3d\x22\x2c\x68\x6f\x73\x74\x3d\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x20\x22\x24\x7b\x69\x73\x76\x6d\x70\x70\x62\x61\x63\x6b\x75\x70\x73\x63\x68\x65\x64\x75\x6c\x65\x7d\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x66\x78\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x69\x73\x76\x6d\x70\x70\x62\x61\x63\x6b\x75\x70\x73\x63\x68\x65\x64\x75\x6c\x65\x7d\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x20\x27\x3a\x27\x20\x2d\x66\x20\x31\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x7b\x70\x66\x78\x7d\x3a\x6d\x69\x6e\x3d\x2c\x24\x7b\x70\x66\x78\x7d\x3a\x68\x6f\x75\x72\x3d\x2c\x24\x7b\x70\x66\x78\x7d\x3a\x64\x61\x79\x73\x3d\x22\x20\x22\x24\x70\x61\x72\x61\x6d\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x20\x22\x24\x7b\x69\x73\x76\x6d\x70\x70\x61\x72\x63\x68\x69\x76\x65\x73\x63\x68\x65\x64\x75\x6c\x65\x7d\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x66\x78\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x69\x73\x76\x6d\x70\x70\x61\x72\x63\x68\x69\x76\x65\x73\x63\x68\x65\x64\x75\x6c\x65\x7d\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x20\x27\x3a\x27\x20\x2d\x66\x20\x31\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x7b\x70\x66\x78\x7d\x3a\x6d\x69\x6e\x3d\x2c\x24\x7b\x70\x66\x78\x7d\x3a\x68\x6f\x75\x72\x3d\x2c\x24\x7b\x70\x66\x78\x7d\x3a\x64\x61\x79\x73\x3d\x22\x20\x22\x24\x70\x61\x72\x61\x6d\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x20\x22\x24\x7b\x69\x73\x76\x6d\x70\x70\x61\x72\x63\x68\x69\x76\x65\x74\x61\x72\x67\x65\x74\x63\x6f\x6e\x66\x69\x67\x7d\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x66\x78\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x69\x73\x76\x6d\x70\x70\x61\x72\x63\x68\x69\x76\x65\x74\x61\x72\x67\x65\x74\x63\x6f\x6e\x66\x69\x67\x7d\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x20\x27\x3a\x27\x20\x2d\x66\x20\x31\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x7b\x70\x66\x78\x7d\x3a\x6c\x6f\x63\x61\x74\x69\x6f\x6e\x3d\x2c\x24\x7b\x70\x66\x78\x7d\x3a\x75\x73\x65\x72\x6e\x61\x6d\x65\x3d\x2c\x24\x7b\x70\x66\x78\x7d\x3a\x70\x61\x73\x73\x77\x6f\x72\x64\x3d\x22\x20\x22\x24\x70\x61\x72\x61\x6d\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x20\x22\x24\x7b\x69\x73\x76\x6d\x70\x70\x61\x6c\x61\x72\x6d\x63\x6f\x6e\x66\x69\x67\x7d\x22\x20\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x66\x78\x3d\x60\x65\x63\x68\x6f\x20\x24\x7b\x69\x73\x76\x6d\x70\x70\x61\x6c\x61\x72\x6d\x63\x6f\x6e\x66\x69\x67\x7d\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x20\x27\x3a\x27\x20\x2d\x66\x20\x31\x60\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x7b\x70\x66\x78\x7d\x3a\x73\x6d\x74\x70\x5f\x73\x65\x72\x76\x65\x72\x3d\x2c\x24\x7b\x70\x66\x78\x7d\x3a\x73\x6d\x74\x70\x5f\x70\x6f\x72\x74\x3d\x2c\x24\x7b\x70\x66\x78\x7d\x3a\x65\x6d\x61\x69\x6c\x5f\x61\x64\x64\x72\x65\x73\x73\x3d\x22\x20\x22\x24\x70\x61\x72\x61\x6d\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x73\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x78\x74\x72\x61\x61\x72\x67\x73\x3d\x22\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x2c\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x70\x61\x72\x61\x6d\x73\x20\x22\x24\x7b\x4f\x4c\x44\x53\x54\x59\x4c\x45\x5f\x57\x4f\x52\x44\x53\x5b\x31\x5d\x7d\x22\x20\x22\x24\x65\x78\x74\x72\x61\x61\x72\x67\x73\x22\x20\x22\x24\x70\x61\x72\x61\x6d\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6e\x20\x30\x0a\x20\x20\x20\x20\x66\x69\x0a\x7d\x0a\x0a\x23\x23\x0a\x23\x20\x52\x65\x74\x75\x72\x6e\x20\x74\x68\x65\x20\x6c\x61\x73\x74\x20\x77\x6f\x72\x64\x20\x69\x6e\x20\x74\x68\x65\x20\x67\x69\x76\x65\x6e\x20\x76\x61\x6c\x75\x65\x2c\x20\x73\x70\x6c\x69\x74\x20\x6f\x6e\x20\x63\x6f\x6d\x6d\x61\x73\x2e\x0a\x23\x0a\x66\x69\x6e\x61\x6c\x5f\x63\x6f\x6d\x6d\x61\x5f\x73\x65\x70\x61\x72\x61\x74\x65\x64\x5f\x70\x61\x72\x61\x6d\x28\x29\x0a\x7b\x0a\x20\x20\x20\x20\x69\x66\x20\x65\x78\x70\x72\x20\x22\x24\x31\x22\x20\x3a\x20\x22\x2e\x2a\x2c\x22\x20\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x0a\x20\x20\x20\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x6f\x6c\x64\x5f\x69\x66\x73\x3d\x22\x24\x49\x46\x53\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x62\x69\x74\x73\x3d\x24\x28\x65\x63\x68\x6f\x20\x22\x24\x31\x22\x20\x7c\x20\x73\x65\x64\x20\x2d\x65\x20\x27\x73\x23\x5e\x5c\x28\x2e\x2a\x5c\x29\x2c\x5c\x28\x5b\x5e\x2c\x5d\x2a\x5c\x29\x24\x23\x5c\x31\x25\x5c\x32\x23\x67\x27\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x25\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x62\x69\x74\x73\x3d\x28\x24\x62\x69\x74\x73\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x63\x68\x6f\x20\x22\x24\x7b\x62\x69\x74\x73\x5b\x31\x5d\x7d\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x49\x46\x53\x3d\x22\x24\x6f\x6c\x64\x5f\x69\x66\x73\x22\x0a\x20\x20\x20\x20\x65\x6c\x73\x65\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x63\x68\x6f\x20\x22\x24\x31\x22\x0a\x20\x20\x20\x20\x66\x69\x0a\x7d\x0a\x0a\x0a\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x6e\x61\x6d\x65\x73\x28\x29\x0a\x7b\x0a\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x76\x61\x6c\x73\x3d\x24\x28\x22\x24\x78\x65\x22\x20\x22\x24\x31\x22\x20\x2d\x2d\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x70\x61\x72\x61\x6d\x73\x3d\x22\x24\x32\x22\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x29\x0a\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x76\x61\x6c\x73\x22\x20\x22\x24\x33\x22\x0a\x7d\x0a\x0a\x70\x61\x72\x61\x6d\x73\x28\x29\x0a\x7b\x0a\x20\x20\x20\x20\x22\x24\x78\x65\x22\x20\x68\x65\x6c\x70\x20\x22\x24\x31\x22\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x7c\x20\x67\x72\x65\x70\x20\x27\x5e\x5b\x5e\x3a\x5d\x2a\x70\x61\x72\x61\x6d\x73\x27\x20\x7c\x20\x63\x75\x74\x20\x2d\x64\x3a\x20\x2d\x66\x32\x2d\x20\x7c\x20\x65\x67\x72\x65\x70\x20\x2d\x76\x20\x22\x5e\x20\x24\x22\x20\x7c\x20\x63\x75\x74\x20\x2d\x63\x20\x32\x2d\x20\x7c\x20\x73\x65\x64\x20\x2d\x65\x20\x27\x73\x2f\x2c\x2f\x3d\x2c\x2f\x67\x27\x20\x2d\x65\x20\x27\x73\x2f\x24\x2f\x3d\x2f\x67\x27\x20\x2d\x65\x20\x27\x73\x2f\x3a\x3d\x2f\x3a\x2f\x67\x27\x20\x2d\x65\x20\x27\x73\x2f\x2d\x3d\x2f\x2d\x2f\x67\x27\x20\x2d\x65\x20\x27\x73\x2f\x20\x2f\x2f\x67\x27\x0a\x7d\x0a\x0a\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x5f\x66\x6f\x72\x5f\x70\x61\x72\x61\x6d\x73\x28\x29\x0a\x7b\x0a\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x76\x3d\x24\x28\x70\x61\x72\x61\x6d\x73\x20\x22\x24\x31\x22\x20\x7c\x20\x73\x65\x64\x20\x2d\x65\x20\x27\x73\x2f\x3c\x76\x6d\x2d\x73\x65\x6c\x65\x63\x74\x6f\x72\x73\x3e\x3d\x2f\x2f\x67\x27\x20\x2d\x65\x20\x27\x73\x2f\x3c\x68\x6f\x73\x74\x2d\x73\x65\x6c\x65\x63\x74\x6f\x72\x73\x3e\x3d\x2f\x2f\x67\x27\x29\x0a\x20\x20\x20\x20\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x22\x24\x76\x24\x32\x22\x20\x22\x24\x33\x22\x0a\x7d\x0a\x0a\x73\x65\x74\x5f\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x28\x29\x0a\x7b\x0a\x20\x20\x20\x20\x23\x20\x52\x65\x70\x6c\x61\x63\x65\x20\x65\x61\x63\x68\x20\x73\x65\x71\x75\x65\x6e\x63\x65\x20\x6f\x66\x20\x6e\x6f\x6e\x2d\x65\x73\x63\x61\x70\x65\x64\x20\x63\x6f\x6d\x6d\x61\x73\x20\x77\x69\x74\x68\x20\x61\x20\x6e\x65\x77\x6c\x69\x6e\x65\x2c\x20\x74\x68\x65\x6e\x20\x64\x65\x2d\x65\x73\x63\x61\x70\x65\x20\x63\x6f\x6d\x6d\x61\x73\x20\x61\x6e\x64\x20\x62\x61\x63\x6b\x73\x6c\x61\x73\x68\x65\x73\x2e\x0a\x20\x20\x20\x20\x23\x20\x54\x4f\x44\x4f\x3a\x20\x44\x6f\x20\x6e\x6f\x74\x20\x67\x65\x6e\x65\x72\x61\x74\x65\x20\x73\x70\x61\x63\x65\x20\x73\x75\x66\x66\x69\x78\x65\x73\x2c\x20\x77\x68\x69\x63\x68\x20\x68\x61\x76\x65\x20\x74\x6f\x20\x62\x65\x20\x72\x65\x6d\x6f\x76\x65\x64\x20\x68\x65\x72\x65\x2e\x0a\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x77\x6f\x72\x64\x73\x3d\x24\x28\x20\x65\x63\x68\x6f\x20\x22\x24\x31\x22\x20\x7c\x20\x73\x65\x64\x20\x2d\x72\x65\x20\x27\x73\x2f\x28\x5e\x7c\x5b\x5e\x5c\x5d\x29\x28\x28\x5c\x5c\x5c\x5c\x29\x2a\x29\x2c\x2c\x2a\x2f\x5c\x31\x5c\x32\x5c\x6e\x2f\x67\x27\x20\x2d\x65\x20\x27\x73\x2f\x5c\x5c\x2c\x2f\x2c\x2f\x67\x27\x20\x2d\x65\x20\x27\x73\x2f\x5c\x5c\x5c\x5c\x2f\x5c\x5c\x2f\x67\x27\x20\x7c\x20\x73\x65\x64\x20\x2d\x65\x20\x27\x73\x2f\x20\x2a\x24\x2f\x2f\x27\x20\x29\x0a\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x70\x72\x65\x66\x69\x78\x3d\x22\x24\x32\x22\x0a\x20\x20\x20\x20\x23\x20\x54\x4f\x44\x4f\x3a\x20\x53\x74\x6f\x70\x20\x63\x68\x61\x6e\x67\x69\x6e\x67\x20\x49\x46\x53\x2e\x0a\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x49\x46\x53\x3d\x24\x27\x5c\x6e\x27\x0a\x20\x20\x20\x20\x6c\x6f\x63\x61\x6c\x20\x77\x6f\x72\x64\x3d\x0a\x20\x20\x20\x20\x43\x4f\x4d\x50\x52\x45\x50\x4c\x59\x3d\x28\x29\x0a\x20\x20\x20\x20\x66\x6f\x72\x20\x77\x6f\x72\x64\x20\x69\x6e\x20\x24\x77\x6f\x72\x64\x73\x3b\x20\x64\x6f\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x41\x64\x64\x20\x61\x20\x73\x70\x61\x63\x65\x20\x73\x75\x66\x66\x69\x78\x20\x74\x6f\x20\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x73\x20\x77\x68\x69\x63\x68\x20\x64\x6f\x20\x6e\x6f\x74\x20\x65\x6e\x64\x20\x69\x6e\x20\x27\x3d\x27\x20\x6f\x72\x20\x27\x3a\x27\x2e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x5b\x5b\x20\x22\x24\x77\x6f\x72\x64\x22\x20\x3d\x20\x22\x24\x70\x72\x65\x66\x69\x78\x22\x2a\x5b\x3d\x3a\x5d\x20\x5d\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x43\x4f\x4d\x50\x52\x45\x50\x4c\x59\x2b\x3d\x28\x20\x24\x28\x70\x72\x69\x6e\x74\x66\x20\x27\x25\x71\x27\x20\x22\x24\x77\x6f\x72\x64\x22\x29\x20\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6c\x69\x66\x20\x5b\x5b\x20\x22\x24\x77\x6f\x72\x64\x22\x20\x3d\x20\x22\x24\x70\x72\x65\x66\x69\x78\x22\x2a\x20\x5d\x5d\x3b\x20\x74\x68\x65\x6e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x43\x4f\x4d\x50\x52\x45\x50\x4c\x59\x2b\x3d\x28\x20\x24\x28\x70\x72\x69\x6e\x74\x66\x20\x27\x25\x71\x20\x27\x20\x22\x24\x77\x6f\x72\x64\x22\x29\x20\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x0a\x20\x20\x20\x20\x64\x6f\x6e\x65\x0a\x7d\x0a\x0a\x63\x6f\x6d\x70\x6c\x65\x74\x65\x20\x2d\x46\x20\x5f\x78\x65\x20\x2d\x6f\x20\x6e\x6f\x73\x70\x61\x63\x65\x20\x78\x65\x0a" > /etc/bash_completion.d/xen && source /etc/bash_completion.d/xen && complete -F _xe xe ; fi

#### The above is still kinda buggy not sure what is up with it.

# Functions
function vim () { VIMRC=`mktemp -u /tmp/tmp.XXXXXXXXXX` ; exec 74<>$VIMRC; printf '\x73\x63\x72\x69\x70\x74\x65\x6e\x63\x6f\x64\x69\x6e\x67\x20\x\x74\x66\x2d\x38\x0a\x22\x20\x5e\x5e\x20\x50\x6c\x65\x61\x73\x65\x20\x6c\x65\x61\x76\x65\x20\x74\x68\x65\x20\x61\x62\x6f\x76\x65\x20\x6c\x69\x6e\x65\x20\x61\x74\x20\x74\x68\x65\x20\x73\x74\x61\x72\x74\x20\x6f\x66\x20\x74\x68\x65\x20\x66\x69\x6c\x65\x2e\x0a\x0a\x22\x20\x44\x65\x66\x61\x75\x6c\x74\x20\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e\x20\x66\x69\x6c\x65\x20\x66\x6f\x72\x20\x56\x69\x6d\x0a\x22\x20\x24\x48\x65\x61\x64\x65\x72\x3a\x20\x2f\x76\x61\x72\x2f\x63\x76\x73\x72\x6f\x6f\x74\x2f\x67\x65\x6e\x74\x6f\x6f\x2d\x78\x38\x36\x2f\x61\x70\x70\x2d\x65\x64\x69\x74\x6f\x72\x73\x2f\x76\x69\x6d\x2d\x63\x6f\x72\x65\x2f\x66\x69\x6c\x65\x73\x2f\x76\x69\x6d\x72\x63\x2d\x72\x34\x2c\x76\x20\x31\x2e\x33\x20\x32\x30\x31\x30\x2f\x30\x34\x2f\x31\x35\x20\x31\x39\x3a\x33\x30\x3a\x33\x32\x20\x64\x61\x72\x6b\x73\x69\x64\x65\x20\x45\x78\x70\x20\x24\x0a\x0a\x22\x20\x57\x72\x69\x74\x74\x65\x6e\x20\x62\x79\x20\x41\x72\x6f\x6e\x20\x47\x72\x69\x66\x66\x69\x73\x20\x3c\x61\x67\x72\x69\x66\x66\x69\x73\x40\x67\x65\x6e\x74\x6f\x6f\x2e\x6f\x72\x67\x3e\x0a\x22\x20\x4d\x6f\x64\x69\x66\x69\x65\x64\x20\x62\x79\x20\x52\x79\x61\x6e\x20\x50\x68\x69\x6c\x6c\x69\x70\x73\x20\x3c\x72\x70\x68\x69\x6c\x6c\x69\x70\x73\x40\x67\x65\x6e\x74\x6f\x6f\x2e\x6f\x72\x67\x3e\x0a\x22\x20\x4d\x6f\x64\x69\x66\x69\x65\x64\x20\x73\x6f\x6d\x65\x20\x6d\x6f\x72\x65\x20\x62\x79\x20\x43\x69\x61\x72\x61\x6e\x20\x4d\x63\x43\x72\x65\x65\x73\x68\x20\x3c\x63\x69\x61\x72\x61\x6e\x6d\x40\x67\x65\x6e\x74\x6f\x6f\x2e\x6f\x72\x67\x3e\x0a\x22\x20\x41\x64\x64\x65\x64\x20\x52\x65\x64\x68\x61\x74\x27\x73\x20\x76\x69\x6d\x72\x63\x20\x69\x6e\x66\x6f\x20\x62\x79\x20\x53\x65\x65\x6d\x61\x6e\x74\x20\x4b\x75\x6c\x6c\x65\x65\x6e\x20\x3c\x73\x65\x65\x6d\x61\x6e\x74\x40\x67\x65\x6e\x74\x6f\x6f\x2e\x6f\x72\x67\x3e\x0a\x0a\x22\x20\x59\x6f\x75\x20\x63\x61\x6e\x20\x6f\x76\x65\x72\x72\x69\x64\x65\x20\x61\x6e\x79\x20\x6f\x66\x20\x74\x68\x65\x73\x65\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x20\x6f\x6e\x20\x61\x20\x67\x6c\x6f\x62\x61\x6c\x20\x62\x61\x73\x69\x73\x20\x76\x69\x61\x20\x74\x68\x65\x0a\x22\x20\x22\x2f\x65\x74\x63\x2f\x76\x69\x6d\x2f\x76\x69\x6d\x72\x63\x2e\x6c\x6f\x63\x61\x6c\x22\x20\x66\x69\x6c\x65\x2c\x20\x61\x6e\x64\x20\x6f\x6e\x20\x61\x20\x70\x65\x72\x2d\x75\x73\x65\x72\x20\x62\x61\x73\x69\x73\x20\x76\x69\x61\x20\x22\x7e\x2f\x2e\x76\x69\x6d\x72\x63\x22\x2e\x20\x59\x6f\x75\x20\x6d\x61\x79\x0a\x22\x20\x6e\x65\x65\x64\x20\x74\x6f\x20\x63\x72\x65\x61\x74\x65\x20\x74\x68\x65\x73\x65\x2e\x0a\x0a\x22\x20\x7b\x7b\x7b\x20\x47\x65\x6e\x65\x72\x61\x6c\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x0a\x22\x20\x54\x68\x65\x20\x66\x6f\x6c\x6c\x6f\x77\x69\x6e\x67\x20\x61\x72\x65\x20\x73\x6f\x6d\x65\x20\x73\x65\x6e\x73\x69\x62\x6c\x65\x20\x64\x65\x66\x61\x75\x6c\x74\x73\x20\x66\x6f\x72\x20\x56\x69\x6d\x20\x66\x6f\x72\x20\x6d\x6f\x73\x74\x20\x75\x73\x65\x72\x73\x2e\x0a\x22\x20\x57\x65\x20\x61\x74\x74\x65\x6d\x70\x74\x20\x74\x6f\x20\x63\x68\x61\x6e\x67\x65\x20\x61\x73\x20\x6c\x69\x74\x74\x6c\x65\x20\x61\x73\x20\x70\x6f\x73\x73\x69\x62\x6c\x65\x20\x66\x72\x6f\x6d\x20\x56\x69\x6d\x27\x73\x20\x64\x65\x66\x61\x75\x6c\x74\x73\x2c\x0a\x22\x20\x64\x65\x76\x69\x61\x74\x69\x6e\x67\x20\x6f\x6e\x6c\x79\x20\x77\x68\x65\x72\x65\x20\x69\x74\x20\x6d\x61\x6b\x65\x73\x20\x73\x65\x6e\x73\x65\x0a\x73\x65\x74\x20\x6e\x6f\x63\x6f\x6d\x70\x61\x74\x69\x62\x6c\x65\x20\x20\x20\x20\x20\x20\x20\x20\x22\x20\x55\x73\x65\x20\x56\x69\x6d\x20\x64\x65\x66\x61\x75\x6c\x74\x73\x20\x28\x6d\x75\x63\x68\x20\x62\x65\x74\x74\x65\x72\x21\x29\x0a\x73\x65\x74\x20\x62\x73\x3d\x32\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22\x20\x41\x6c\x6c\x6f\x77\x20\x62\x61\x63\x6b\x73\x70\x61\x63\x69\x6e\x67\x20\x6f\x76\x65\x72\x20\x65\x76\x65\x72\x79\x74\x68\x69\x6e\x67\x20\x69\x6e\x20\x69\x6e\x73\x65\x72\x74\x20\x6d\x6f\x64\x65\x0a\x22\x20\x73\x65\x74\x20\x61\x69\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22\x20\x41\x6c\x77\x61\x79\x73\x20\x73\x65\x74\x20\x61\x75\x74\x6f\x2d\x69\x6e\x64\x65\x6e\x74\x69\x6e\x67\x20\x6f\x6e\x0a\x73\x65\x74\x20\x68\x69\x73\x74\x6f\x72\x79\x3d\x35\x30\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22\x20\x6b\x65\x65\x70\x20\x35\x30\x20\x6c\x69\x6e\x65\x73\x20\x6f\x66\x20\x63\x6f\x6d\x6d\x61\x6e\x64\x20\x68\x69\x73\x74\x6f\x72\x79\x0a\x73\x65\x74\x20\x72\x75\x6c\x65\x72\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22\x20\x53\x68\x6f\x77\x20\x74\x68\x65\x20\x63\x75\x72\x73\x6f\x72\x20\x70\x6f\x73\x69\x74\x69\x6f\x6e\x20\x61\x6c\x6c\x20\x74\x68\x65\x20\x74\x69\x6d\x65\x0a\x0a\x73\x65\x74\x20\x76\x69\x6d\x69\x6e\x66\x6f\x3d\x27\x32\x30\x2c\x5c\x22\x35\x30\x30\x20\x20\x20\x22\x20\x4b\x65\x65\x70\x20\x61\x20\x2e\x76\x69\x6d\x69\x6e\x66\x6f\x20\x66\x69\x6c\x65\x2e\x0a\x63\x6f\x6c\x6f\x72\x73\x63\x68\x65\x6d\x65\x20\x72\x6f\x6e\x20\x0a\x0a\x22\x20\x44\x6f\x6e\x27\x74\x20\x75\x73\x65\x20\x45\x78\x20\x6d\x6f\x64\x65\x2c\x20\x75\x73\x65\x20\x51\x20\x66\x6f\x72\x20\x66\x6f\x72\x6d\x61\x74\x74\x69\x6e\x67\x0a\x6d\x61\x70\x20\x51\x20\x67\x71\x0a\x0a\x22\x20\x57\x68\x65\x6e\x20\x64\x6f\x69\x6e\x67\x20\x74\x61\x62\x20\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x2c\x20\x67\x69\x76\x65\x20\x74\x68\x65\x20\x66\x6f\x6c\x6c\x6f\x77\x69\x6e\x67\x20\x66\x69\x6c\x65\x73\x20\x6c\x6f\x77\x65\x72\x20\x70\x72\x69\x6f\x72\x69\x74\x79\x2e\x20\x59\x6f\x75\x20\x6d\x61\x79\x0a\x22\x20\x77\x69\x73\x68\x20\x74\x6f\x20\x73\x65\x74\x20\x27\x77\x69\x6c\x64\x69\x67\x6e\x6f\x72\x65\x27\x20\x74\x6f\x20\x63\x6f\x6d\x70\x6c\x65\x74\x65\x6c\x79\x20\x69\x67\x6e\x6f\x72\x65\x20\x66\x69\x6c\x65\x73\x2c\x20\x61\x6e\x64\x20\x27\x77\x69\x6c\x64\x6d\x65\x6e\x75\x27\x20\x74\x6f\x20\x65\x6e\x61\x62\x6c\x65\x0a\x22\x20\x65\x6e\x68\x61\x6e\x63\x65\x64\x20\x74\x61\x62\x20\x63\x6f\x6d\x70\x6c\x65\x74\x69\x6f\x6e\x2e\x20\x54\x68\x65\x73\x65\x20\x63\x61\x6e\x20\x62\x65\x20\x64\x6f\x6e\x65\x20\x69\x6e\x20\x74\x68\x65\x20\x75\x73\x65\x72\x20\x76\x69\x6d\x72\x63\x20\x66\x69\x6c\x65\x2e\x0a\x73\x65\x74\x20\x73\x75\x66\x66\x69\x78\x65\x73\x2b\x3d\x2e\x69\x6e\x66\x6f\x2c\x2e\x61\x75\x78\x2c\x2e\x6c\x6f\x67\x2c\x2e\x64\x76\x69\x2c\x2e\x62\x62\x6c\x2c\x2e\x6f\x75\x74\x2c\x2e\x6f\x2c\x2e\x6c\x6f\x0a\x0a\x22\x20\x57\x68\x65\x6e\x20\x64\x69\x73\x70\x6c\x61\x79\x69\x6e\x67\x20\x6c\x69\x6e\x65\x20\x6e\x75\x6d\x62\x65\x72\x73\x2c\x20\x64\x6f\x6e\x27\x74\x20\x75\x73\x65\x20\x61\x6e\x20\x61\x6e\x6e\x6f\x79\x69\x6e\x67\x6c\x79\x20\x77\x69\x64\x65\x20\x6e\x75\x6d\x62\x65\x72\x20\x63\x6f\x6c\x75\x6d\x6e\x2e\x20\x54\x68\x69\x73\x0a\x22\x20\x64\x6f\x65\x73\x6e\x27\x74\x20\x65\x6e\x61\x62\x6c\x65\x20\x6c\x69\x6e\x65\x20\x6e\x75\x6d\x62\x65\x72\x73\x20\x2d\x2d\x20\x3a\x73\x65\x74\x20\x6e\x75\x6d\x62\x65\x72\x20\x77\x69\x6c\x6c\x20\x64\x6f\x20\x74\x68\x61\x74\x2e\x20\x54\x68\x65\x20\x76\x61\x6c\x75\x65\x20\x67\x69\x76\x65\x6e\x20\x69\x73\x20\x61\x0a\x22\x20\x6d\x69\x6e\x69\x6d\x75\x6d\x20\x77\x69\x64\x74\x68\x20\x74\x6f\x20\x75\x73\x65\x20\x66\x6f\x72\x20\x74\x68\x65\x20\x6e\x75\x6d\x62\x65\x72\x20\x63\x6f\x6c\x75\x6d\x6e\x2c\x20\x6e\x6f\x74\x20\x61\x20\x66\x69\x78\x65\x64\x20\x73\x69\x7a\x65\x2e\x0a\x69\x66\x20\x76\x3a\x76\x65\x72\x73\x69\x6f\x6e\x20\x3e\x3d\x20\x37\x30\x30\x0a\x20\x20\x73\x65\x74\x20\x6e\x75\x6d\x62\x65\x72\x77\x69\x64\x74\x68\x3d\x33\x0a\x65\x6e\x64\x69\x66\x0a\x22\x20\x7d\x7d\x7d\x0a\x0a\x22\x20\x7b\x7b\x7b\x20\x4d\x6f\x64\x65\x6c\x69\x6e\x65\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x0a\x22\x20\x57\x65\x20\x64\x6f\x6e\x27\x74\x20\x61\x6c\x6c\x6f\x77\x20\x6d\x6f\x64\x65\x6c\x69\x6e\x65\x73\x20\x62\x79\x20\x64\x65\x66\x61\x75\x6c\x74\x2e\x20\x53\x65\x65\x20\x62\x75\x67\x20\x23\x31\x34\x30\x38\x38\x20\x61\x6e\x64\x20\x62\x75\x67\x20\x23\x37\x33\x37\x31\x35\x2e\x0a\x22\x20\x49\x66\x20\x79\x6f\x75\x27\x72\x65\x20\x6e\x6f\x74\x20\x63\x6f\x6e\x63\x65\x72\x6e\x65\x64\x20\x61\x62\x6f\x75\x74\x20\x74\x68\x65\x73\x65\x2c\x20\x79\x6f\x75\x20\x63\x61\x6e\x20\x65\x6e\x61\x62\x6c\x65\x20\x74\x68\x65\x6d\x20\x6f\x6e\x20\x61\x20\x70\x65\x72\x2d\x75\x73\x65\x72\x0a\x22\x20\x62\x61\x73\x69\x73\x20\x62\x79\x20\x61\x64\x64\x69\x6e\x67\x20\x22\x73\x65\x74\x20\x6d\x6f\x64\x65\x6c\x69\x6e\x65\x22\x20\x74\x6f\x20\x79\x6f\x75\x72\x20\x7e\x2f\x2e\x76\x69\x6d\x72\x63\x20\x66\x69\x6c\x65\x2e\x0a\x73\x65\x74\x20\x6e\x6f\x6d\x6f\x64\x65\x6c\x69\x6e\x65\x0a\x22\x20\x7d\x7d\x7d\x0a\x0a\x22\x20\x7b\x7b\x7b\x20\x4c\x6f\x63\x61\x6c\x65\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x0a\x22\x20\x54\x72\x79\x20\x74\x6f\x20\x63\x6f\x6d\x65\x20\x75\x70\x20\x77\x69\x74\x68\x20\x73\x6f\x6d\x65\x20\x6e\x69\x63\x65\x20\x73\x61\x6e\x65\x20\x47\x55\x49\x20\x66\x6f\x6e\x74\x73\x2e\x20\x41\x6c\x73\x6f\x20\x74\x72\x79\x20\x74\x6f\x20\x73\x65\x74\x20\x61\x20\x73\x65\x6e\x73\x69\x62\x6c\x65\x0a\x22\x20\x76\x61\x6c\x75\x65\x20\x66\x6f\x72\x20\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x20\x62\x61\x73\x65\x64\x20\x75\x70\x6f\x6e\x20\x6c\x6f\x63\x61\x6c\x65\x2e\x20\x54\x68\x65\x73\x65\x20\x63\x61\x6e\x20\x61\x6c\x6c\x20\x62\x65\x20\x6f\x76\x65\x72\x72\x69\x64\x64\x65\x6e\x20\x69\x6e\x0a\x22\x20\x74\x68\x65\x20\x75\x73\x65\x72\x20\x76\x69\x6d\x72\x63\x20\x66\x69\x6c\x65\x2e\x0a\x69\x66\x20\x76\x3a\x6c\x61\x6e\x67\x20\x3d\x7e\x3f\x20\x22\x5e\x6b\x6f\x22\x0a\x20\x20\x73\x65\x74\x20\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x3d\x65\x75\x63\x2d\x6b\x72\x0a\x20\x20\x73\x65\x74\x20\x67\x75\x69\x66\x6f\x6e\x74\x73\x65\x74\x3d\x2d\x2a\x2d\x2a\x2d\x6d\x65\x64\x69\x75\x6d\x2d\x72\x2d\x6e\x6f\x72\x6d\x61\x6c\x2d\x2d\x31\x36\x2d\x2a\x2d\x2a\x2d\x2a\x2d\x2a\x2d\x2a\x2d\x2a\x2d\x2a\x0a\x65\x6c\x73\x65\x69\x66\x20\x76\x3a\x6c\x61\x6e\x67\x20\x3d\x7e\x3f\x20\x22\x5e\x6a\x61\x5f\x4a\x50\x22\x0a\x20\x20\x73\x65\x74\x20\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x3d\x65\x75\x63\x2d\x6a\x70\x0a\x20\x20\x73\x65\x74\x20\x67\x75\x69\x66\x6f\x6e\x74\x73\x65\x74\x3d\x2d\x6d\x69\x73\x63\x2d\x66\x69\x78\x65\x64\x2d\x6d\x65\x64\x69\x75\x6d\x2d\x72\x2d\x6e\x6f\x72\x6d\x61\x6c\x2d\x2d\x31\x34\x2d\x2a\x2d\x2a\x2d\x2a\x2d\x2a\x2d\x2a\x2d\x2a\x2d\x2a\x0a\x65\x6c\x73\x65\x69\x66\x20\x76\x3a\x6c\x61\x6e\x67\x20\x3d\x7e\x3f\x20\x22\x5e\x7a\x68\x5f\x54\x57\x22\x0a\x20\x20\x73\x65\x74\x20\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x3d\x62\x69\x67\x35\x0a\x20\x20\x73\x65\x74\x20\x67\x75\x69\x66\x6f\x6e\x74\x73\x65\x74\x3d\x2d\x73\x6f\x6e\x79\x2d\x66\x69\x78\x65\x64\x2d\x6d\x65\x64\x69\x75\x6d\x2d\x72\x2d\x6e\x6f\x72\x6d\x61\x6c\x2d\x2d\x31\x36\x2d\x31\x35\x30\x2d\x37\x35\x2d\x37\x35\x2d\x63\x2d\x38\x30\x2d\x69\x73\x6f\x38\x38\x35\x39\x2d\x31\x2c\x2d\x74\x61\x69\x70\x65\x69\x2d\x66\x69\x78\x65\x64\x2d\x6d\x65\x64\x69\x75\x6d\x2d\x72\x2d\x6e\x6f\x72\x6d\x61\x6c\x2d\x2d\x31\x36\x2d\x31\x35\x30\x2d\x37\x35\x2d\x37\x35\x2d\x63\x2d\x31\x36\x30\x2d\x62\x69\x67\x35\x2d\x30\x0a\x65\x6c\x73\x65\x69\x66\x20\x76\x3a\x6c\x61\x6e\x67\x20\x3d\x7e\x3f\x20\x22\x5e\x7a\x68\x5f\x43\x4e\x22\x0a\x20\x20\x73\x65\x74\x20\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x3d\x67\x62\x32\x33\x31\x32\x0a\x20\x20\x73\x65\x74\x20\x67\x75\x69\x66\x6f\x6e\x74\x73\x65\x74\x3d\x2a\x2d\x72\x2d\x2a\x0a\x65\x6e\x64\x69\x66\x0a\x0a\x22\x20\x49\x66\x20\x77\x65\x20\x68\x61\x76\x65\x20\x61\x20\x42\x4f\x4d\x2c\x20\x61\x6c\x77\x61\x79\x73\x20\x68\x6f\x6e\x6f\x75\x72\x20\x74\x68\x61\x74\x20\x72\x61\x74\x68\x65\x72\x20\x74\x68\x61\x6e\x20\x74\x72\x79\x69\x6e\x67\x20\x74\x6f\x20\x67\x75\x65\x73\x73\x2e\x0a\x69\x66\x20\x26\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x20\x21\x7e\x3f\x20\x22\x75\x63\x73\x2d\x62\x6f\x6d\x22\x0a\x20\x20\x73\x65\x74\x20\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x5e\x3d\x75\x63\x73\x2d\x62\x6f\x6d\x0a\x65\x6e\x64\x69\x66\x0a\x0a\x22\x20\x41\x6c\x77\x61\x79\x73\x20\x63\x68\x65\x63\x6b\x20\x66\x6f\x72\x20\x55\x54\x46\x2d\x38\x20\x77\x68\x65\x6e\x20\x74\x72\x79\x69\x6e\x67\x20\x74\x6f\x20\x64\x65\x74\x65\x72\x6d\x69\x6e\x65\x20\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x2e\x0a\x69\x66\x20\x26\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x20\x21\x7e\x3f\x20\x22\x75\x74\x66\x2d\x38\x22\x0a\x20\x20\x22\x20\x49\x66\x20\x77\x65\x20\x68\x61\x76\x65\x20\x74\x6f\x20\x61\x64\x64\x20\x74\x68\x69\x73\x2c\x20\x74\x68\x65\x20\x64\x65\x66\x61\x75\x6c\x74\x20\x65\x6e\x63\x6f\x64\x69\x6e\x67\x20\x69\x73\x20\x6e\x6f\x74\x20\x55\x6e\x69\x63\x6f\x64\x65\x2e\x0a\x20\x20\x22\x20\x57\x65\x20\x75\x73\x65\x20\x74\x68\x69\x73\x20\x66\x61\x63\x74\x20\x6c\x61\x74\x65\x72\x20\x74\x6f\x20\x72\x65\x76\x65\x72\x74\x20\x74\x6f\x20\x74\x68\x65\x20\x64\x65\x66\x61\x75\x6c\x74\x20\x65\x6e\x63\x6f\x64\x69\x6e\x67\x20\x69\x6e\x20\x70\x6c\x61\x69\x6e\x74\x65\x78\x74\x2f\x65\x6d\x70\x74\x79\x0a\x20\x20\x22\x20\x66\x69\x6c\x65\x73\x2e\x0a\x20\x20\x6c\x65\x74\x20\x67\x3a\x61\x64\x64\x65\x64\x5f\x66\x65\x6e\x63\x5f\x75\x74\x66\x38\x20\x3d\x20\x31\x0a\x20\x20\x73\x65\x74\x20\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x2b\x3d\x75\x74\x66\x2d\x38\x0a\x65\x6e\x64\x69\x66\x0a\x0a\x22\x20\x4d\x61\x6b\x65\x20\x73\x75\x72\x65\x20\x77\x65\x20\x68\x61\x76\x65\x20\x61\x20\x73\x61\x6e\x65\x20\x66\x61\x6c\x6c\x62\x61\x63\x6b\x20\x66\x6f\x72\x20\x65\x6e\x63\x6f\x64\x69\x6e\x67\x20\x64\x65\x74\x65\x63\x74\x69\x6f\x6e\x0a\x69\x66\x20\x26\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x20\x21\x7e\x3f\x20\x22\x64\x65\x66\x61\x75\x6c\x74\x22\x0a\x20\x20\x73\x65\x74\x20\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x73\x2b\x3d\x64\x65\x66\x61\x75\x6c\x74\x0a\x65\x6e\x64\x69\x66\x0a\x22\x20\x7d\x7d\x7d\x0a\x0a\x22\x20\x7b\x7b\x7b\x20\x53\x79\x6e\x74\x61\x78\x20\x68\x69\x67\x68\x6c\x69\x67\x68\x74\x69\x6e\x67\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x0a\x22\x20\x53\x77\x69\x74\x63\x68\x20\x73\x79\x6e\x74\x61\x78\x20\x68\x69\x67\x68\x6c\x69\x67\x68\x74\x69\x6e\x67\x20\x6f\x6e\x2c\x20\x77\x68\x65\x6e\x20\x74\x68\x65\x20\x74\x65\x72\x6d\x69\x6e\x61\x6c\x20\x68\x61\x73\x20\x63\x6f\x6c\x6f\x72\x73\x0a\x22\x20\x41\x6c\x73\x6f\x20\x73\x77\x69\x74\x63\x68\x20\x6f\x6e\x20\x68\x69\x67\x68\x6c\x69\x67\x68\x74\x69\x6e\x67\x20\x74\x68\x65\x20\x6c\x61\x73\x74\x20\x75\x73\x65\x64\x20\x73\x65\x61\x72\x63\x68\x20\x70\x61\x74\x74\x65\x72\x6e\x2e\x0a\x69\x66\x20\x26\x74\x5f\x43\x6f\x20\x3e\x20\x32\x20\x7c\x7c\x20\x68\x61\x73\x28\x22\x67\x75\x69\x5f\x72\x75\x6e\x6e\x69\x6e\x67\x22\x29\x0a\x20\x20\x73\x79\x6e\x74\x61\x78\x20\x6f\x6e\x0a\x20\x20\x73\x65\x74\x20\x68\x6c\x73\x65\x61\x72\x63\x68\x0a\x65\x6e\x64\x69\x66\x0a\x22\x20\x7d\x7d\x7d\x0a\x0a\x22\x20\x7b\x7b\x7b\x20\x54\x65\x72\x6d\x69\x6e\x61\x6c\x20\x66\x69\x78\x65\x73\x0a\x69\x66\x20\x26\x74\x65\x72\x6d\x20\x3d\x3d\x3f\x20\x22\x78\x74\x65\x72\x6d\x22\x0a\x20\x20\x73\x65\x74\x20\x74\x5f\x53\x62\x3d\x5e\x5b\x34\x25\x64\x6d\x0a\x20\x20\x73\x65\x74\x20\x74\x5f\x53\x66\x3d\x5e\x5b\x33\x25\x64\x6d\x0a\x20\x20\x73\x65\x74\x20\x74\x74\x79\x6d\x6f\x75\x73\x65\x3d\x78\x74\x65\x72\x6d\x32\x0a\x65\x6e\x64\x69\x66\x0a\x0a\x69\x66\x20\x26\x74\x65\x72\x6d\x20\x3d\x3d\x3f\x20\x22\x67\x6e\x6f\x6d\x65\x22\x20\x26\x26\x20\x68\x61\x73\x28\x22\x65\x76\x61\x6c\x22\x29\x0a\x20\x20\x22\x20\x53\x65\x74\x20\x75\x73\x65\x66\x75\x6c\x20\x6b\x65\x79\x73\x20\x74\x68\x61\x74\x20\x76\x69\x6d\x20\x64\x6f\x65\x73\x6e\x27\x74\x20\x64\x69\x73\x63\x6f\x76\x65\x72\x20\x76\x69\x61\x20\x74\x65\x72\x6d\x63\x61\x70\x20\x62\x75\x74\x20\x61\x72\x65\x20\x69\x6e\x20\x74\x68\x65\x0a\x20\x20\x22\x20\x62\x75\x69\x6c\x74\x69\x6e\x20\x78\x74\x65\x72\x6d\x20\x74\x65\x72\x6d\x63\x61\x70\x2e\x20\x53\x65\x65\x20\x62\x75\x67\x20\x23\x31\x32\x32\x35\x36\x32\x2e\x20\x57\x65\x20\x75\x73\x65\x20\x65\x78\x65\x63\x20\x74\x6f\x20\x61\x76\x6f\x69\x64\x20\x68\x61\x76\x69\x6e\x67\x20\x74\x6f\x0a\x20\x20\x22\x20\x69\x6e\x63\x6c\x75\x64\x65\x20\x72\x61\x77\x20\x65\x73\x63\x61\x70\x65\x73\x20\x69\x6e\x20\x74\x68\x65\x20\x66\x69\x6c\x65\x2e\x0a\x20\x20\x65\x78\x65\x63\x20\x22\x73\x65\x74\x20\x3c\x43\x2d\x4c\x65\x66\x74\x3e\x3d\x5c\x65\x4f\x35\x44\x22\x0a\x20\x20\x65\x78\x65\x63\x20\x22\x73\x65\x74\x20\x3c\x43\x2d\x52\x69\x67\x68\x74\x3e\x3d\x5c\x65\x4f\x35\x43\x22\x0a\x65\x6e\x64\x69\x66\x0a\x22\x20\x7d\x7d\x7d\x0a\x0a\x22\x20\x7b\x7b\x7b\x20\x46\x69\x6c\x65\x74\x79\x70\x65\x20\x70\x6c\x75\x67\x69\x6e\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x0a\x22\x20\x45\x6e\x61\x62\x6c\x65\x20\x70\x6c\x75\x67\x69\x6e\x2d\x70\x72\x6f\x76\x69\x64\x65\x64\x20\x66\x69\x6c\x65\x74\x79\x70\x65\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x2c\x20\x62\x75\x74\x20\x6f\x6e\x6c\x79\x20\x69\x66\x20\x74\x68\x65\x20\x66\x74\x70\x6c\x75\x67\x69\x6e\x0a\x22\x20\x64\x69\x72\x65\x63\x74\x6f\x72\x79\x20\x65\x78\x69\x73\x74\x73\x20\x28\x77\x68\x69\x63\x68\x20\x69\x74\x20\x77\x6f\x6e\x27\x74\x20\x6f\x6e\x20\x6c\x69\x76\x65\x63\x64\x73\x2c\x20\x66\x6f\x72\x20\x65\x78\x61\x6d\x70\x6c\x65\x29\x2e\x0a\x69\x66\x20\x69\x73\x64\x69\x72\x65\x63\x74\x6f\x72\x79\x28\x65\x78\x70\x61\x6e\x64\x28\x22\x24\x56\x49\x4d\x52\x55\x4e\x54\x49\x4d\x45\x2f\x66\x74\x70\x6c\x75\x67\x69\x6e\x22\x29\x29\x0a\x20\x20\x66\x69\x6c\x65\x74\x79\x70\x65\x20\x70\x6c\x75\x67\x69\x6e\x20\x6f\x6e\x0a\x0a\x20\x20\x22\x20\x55\x6e\x63\x6f\x6d\x6d\x65\x6e\x74\x20\x74\x68\x65\x20\x6e\x65\x78\x74\x20\x6c\x69\x6e\x65\x20\x28\x6f\x72\x20\x63\x6f\x70\x79\x20\x74\x6f\x20\x79\x6f\x75\x72\x20\x7e\x2f\x2e\x76\x69\x6d\x72\x63\x29\x20\x66\x6f\x72\x20\x70\x6c\x75\x67\x69\x6e\x2d\x70\x72\x6f\x76\x69\x64\x65\x64\x0a\x20\x20\x22\x20\x69\x6e\x64\x65\x6e\x74\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x2e\x20\x53\x6f\x6d\x65\x20\x70\x65\x6f\x70\x6c\x65\x20\x64\x6f\x6e\x27\x74\x20\x6c\x69\x6b\x65\x20\x74\x68\x65\x73\x65\x2c\x20\x73\x6f\x20\x77\x65\x20\x77\x6f\x6e\x27\x74\x20\x74\x75\x72\x6e\x20\x74\x68\x65\x6d\x20\x6f\x6e\x20\x62\x79\x0a\x20\x20\x22\x20\x64\x65\x66\x61\x75\x6c\x74\x2e\x0a\x20\x20\x22\x20\x66\x69\x6c\x65\x74\x79\x70\x65\x20\x69\x6e\x64\x65\x6e\x74\x20\x6f\x6e\x0a\x65\x6e\x64\x69\x66\x0a\x22\x20\x7d\x7d\x7d\x0a\x0a\x22\x20\x7b\x7b\x7b\x20\x46\x69\x78\x20\x26\x73\x68\x65\x6c\x6c\x2c\x20\x73\x65\x65\x20\x62\x75\x67\x20\x23\x31\x30\x31\x36\x36\x35\x2e\x0a\x69\x66\x20\x22\x22\x20\x3d\x3d\x20\x26\x73\x68\x65\x6c\x6c\x0a\x20\x20\x69\x66\x20\x65\x78\x65\x63\x75\x74\x61\x62\x6c\x65\x28\x22\x2f\x62\x69\x6e\x2f\x62\x61\x73\x68\x22\x29\x0a\x20\x20\x20\x20\x73\x65\x74\x20\x73\x68\x65\x6c\x6c\x3d\x2f\x62\x69\x6e\x2f\x62\x61\x73\x68\x0a\x20\x20\x65\x6c\x73\x65\x69\x66\x20\x65\x78\x65\x63\x75\x74\x61\x62\x6c\x65\x28\x22\x2f\x62\x69\x6e\x2f\x73\x68\x22\x29\x0a\x20\x20\x20\x20\x73\x65\x74\x20\x73\x68\x65\x6c\x6c\x3d\x2f\x62\x69\x6e\x2f\x73\x68\x0a\x20\x20\x65\x6e\x64\x69\x66\x0a\x65\x6e\x64\x69\x66\x0a\x22\x7d\x7d\x7d\x0a\x0a\x22\x20\x7b\x7b\x7b\x20\x4f\x75\x72\x20\x64\x65\x66\x61\x75\x6c\x74\x20\x2f\x62\x69\x6e\x2f\x73\x68\x20\x69\x73\x20\x62\x61\x73\x68\x2c\x20\x6e\x6f\x74\x20\x6b\x73\x68\x2c\x20\x73\x6f\x20\x73\x79\x6e\x74\x61\x78\x20\x68\x69\x67\x68\x6c\x69\x67\x68\x74\x69\x6e\x67\x20\x66\x6f\x72\x20\x2e\x73\x68\x0a\x22\x20\x66\x69\x6c\x65\x73\x20\x73\x68\x6f\x75\x6c\x64\x20\x64\x65\x66\x61\x75\x6c\x74\x20\x74\x6f\x20\x62\x61\x73\x68\x2e\x20\x53\x65\x65\x20\x3a\x68\x65\x6c\x70\x20\x73\x68\x2d\x73\x79\x6e\x74\x61\x78\x20\x61\x6e\x64\x20\x62\x75\x67\x20\x23\x31\x30\x31\x38\x31\x39\x2e\x0a\x69\x66\x20\x68\x61\x73\x28\x22\x65\x76\x61\x6c\x22\x29\x0a\x20\x20\x6c\x65\x74\x20\x69\x73\x5f\x62\x61\x73\x68\x3d\x31\x0a\x65\x6e\x64\x69\x66\x0a\x22\x20\x7d\x7d\x7d\x0a\x0a\x22\x20\x7b\x7b\x7b\x20\x41\x75\x74\x6f\x63\x6f\x6d\x6d\x61\x6e\x64\x73\x0a\x69\x66\x20\x68\x61\x73\x28\x22\x61\x75\x74\x6f\x63\x6d\x64\x22\x29\x0a\x0a\x61\x75\x67\x72\x6f\x75\x70\x20\x67\x65\x6e\x74\x6f\x6f\x0a\x20\x20\x61\x75\x21\x0a\x0a\x20\x20\x22\x20\x47\x65\x6e\x74\x6f\x6f\x2d\x73\x70\x65\x63\x69\x66\x69\x63\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x20\x66\x6f\x72\x20\x65\x62\x75\x69\x6c\x64\x73\x2e\x20\x20\x54\x68\x65\x73\x65\x20\x61\x72\x65\x20\x74\x68\x65\x20\x66\x65\x64\x65\x72\x61\x6c\x6c\x79\x2d\x6d\x61\x6e\x64\x61\x74\x65\x64\x0a\x20\x20\x22\x20\x72\x65\x71\x75\x69\x72\x65\x64\x20\x74\x61\x62\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x2e\x20\x20\x53\x65\x65\x20\x74\x68\x65\x20\x66\x6f\x6c\x6c\x6f\x77\x69\x6e\x67\x20\x66\x6f\x72\x20\x6d\x6f\x72\x65\x20\x69\x6e\x66\x6f\x72\x6d\x61\x74\x69\x6f\x6e\x3a\x0a\x20\x20\x22\x20\x68\x74\x74\x70\x3a\x2f\x2f\x77\x77\x77\x2e\x67\x65\x6e\x74\x6f\x6f\x2e\x6f\x72\x67\x2f\x70\x72\x6f\x6a\x2f\x65\x6e\x2f\x64\x65\x76\x72\x65\x6c\x2f\x68\x61\x6e\x64\x62\x6f\x6f\x6b\x2f\x68\x61\x6e\x64\x62\x6f\x6f\x6b\x2e\x78\x6d\x6c\x0a\x20\x20\x22\x20\x4e\x6f\x74\x65\x20\x74\x68\x61\x74\x20\x74\x68\x65\x20\x72\x75\x6c\x65\x73\x20\x62\x65\x6c\x6f\x77\x20\x61\x72\x65\x20\x76\x65\x72\x79\x20\x6d\x69\x6e\x69\x6d\x61\x6c\x20\x61\x6e\x64\x20\x64\x6f\x6e\x27\x74\x20\x63\x6f\x76\x65\x72\x20\x65\x76\x65\x72\x79\x74\x68\x69\x6e\x67\x2e\x0a\x20\x20\x22\x20\x42\x65\x74\x74\x65\x72\x20\x74\x6f\x20\x65\x6d\x65\x72\x67\x65\x20\x61\x70\x70\x2d\x76\x69\x6d\x2f\x67\x65\x6e\x74\x6f\x6f\x2d\x73\x79\x6e\x74\x61\x78\x2c\x20\x77\x68\x69\x63\x68\x20\x70\x72\x6f\x76\x69\x64\x65\x73\x20\x66\x75\x6c\x6c\x20\x73\x79\x6e\x74\x61\x78\x2c\x0a\x20\x20\x22\x20\x66\x69\x6c\x65\x74\x79\x70\x65\x20\x61\x6e\x64\x20\x69\x6e\x64\x65\x6e\x74\x20\x73\x65\x74\x74\x69\x6e\x67\x73\x20\x66\x6f\x72\x20\x61\x6c\x6c\x20\x74\x68\x69\x6e\x67\x73\x20\x47\x65\x6e\x74\x6f\x6f\x2e\x0a\x20\x20\x61\x75\x20\x42\x75\x66\x52\x65\x61\x64\x2c\x42\x75\x66\x4e\x65\x77\x46\x69\x6c\x65\x20\x2a\x2e\x65\x7b\x62\x75\x69\x6c\x64\x2c\x63\x6c\x61\x73\x73\x7d\x20\x6c\x65\x74\x20\x69\x73\x5f\x62\x61\x73\x68\x3d\x31\x7c\x73\x65\x74\x66\x69\x6c\x65\x74\x79\x70\x65\x20\x73\x68\x0a\x20\x20\x61\x75\x20\x42\x75\x66\x52\x65\x61\x64\x2c\x42\x75\x66\x4e\x65\x77\x46\x69\x6c\x65\x20\x2a\x2e\x65\x7b\x62\x75\x69\x6c\x64\x2c\x63\x6c\x61\x73\x73\x7d\x20\x73\x65\x74\x20\x74\x73\x3d\x34\x20\x73\x77\x3d\x34\x20\x6e\x6f\x65\x78\x70\x61\x6e\x64\x74\x61\x62\x0a\x0a\x20\x20\x22\x20\x49\x6e\x20\x74\x65\x78\x74\x20\x66\x69\x6c\x65\x73\x2c\x20\x6c\x69\x6d\x69\x74\x20\x74\x68\x65\x20\x77\x69\x64\x74\x68\x20\x6f\x66\x20\x74\x65\x78\x74\x20\x74\x6f\x20\x37\x38\x20\x63\x68\x61\x72\x61\x63\x74\x65\x72\x73\x2c\x20\x62\x75\x74\x20\x62\x65\x20\x63\x61\x72\x65\x66\x75\x6c\x0a\x20\x20\x22\x20\x74\x68\x61\x74\x20\x77\x65\x20\x64\x6f\x6e\x27\x74\x20\x6f\x76\x65\x72\x72\x69\x64\x65\x20\x74\x68\x65\x20\x75\x73\x65\x72\x27\x73\x20\x73\x65\x74\x74\x69\x6e\x67\x2e\x0a\x20\x20\x61\x75\x74\x6f\x63\x6d\x64\x20\x42\x75\x66\x4e\x65\x77\x46\x69\x6c\x65\x2c\x42\x75\x66\x52\x65\x61\x64\x20\x2a\x2e\x74\x78\x74\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x69\x66\x20\x26\x74\x77\x20\x3d\x3d\x20\x30\x20\x26\x26\x20\x21\x20\x65\x78\x69\x73\x74\x73\x28\x22\x67\x3a\x6c\x65\x61\x76\x65\x5f\x6d\x79\x5f\x74\x65\x78\x74\x77\x69\x64\x74\x68\x5f\x61\x6c\x6f\x6e\x65\x22\x29\x20\x7c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x20\x20\x20\x20\x73\x65\x74\x6c\x6f\x63\x61\x6c\x20\x74\x65\x78\x74\x77\x69\x64\x74\x68\x3d\x37\x38\x20\x7c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x65\x6e\x64\x69\x66\x0a\x0a\x20\x20\x22\x20\x57\x68\x65\x6e\x20\x65\x64\x69\x74\x69\x6e\x67\x20\x61\x20\x66\x69\x6c\x65\x2c\x20\x61\x6c\x77\x61\x79\x73\x20\x6a\x75\x6d\x70\x20\x74\x6f\x20\x74\x68\x65\x20\x6c\x61\x73\x74\x20\x63\x75\x72\x73\x6f\x72\x20\x70\x6f\x73\x69\x74\x69\x6f\x6e\x0a\x20\x20\x61\x75\x74\x6f\x63\x6d\x64\x20\x42\x75\x66\x52\x65\x61\x64\x50\x6f\x73\x74\x20\x2a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x69\x66\x20\x21\x20\x65\x78\x69\x73\x74\x73\x28\x22\x67\x3a\x6c\x65\x61\x76\x65\x5f\x6d\x79\x5f\x63\x75\x72\x73\x6f\x72\x5f\x70\x6f\x73\x69\x74\x69\x6f\x6e\x5f\x61\x6c\x6f\x6e\x65\x22\x29\x20\x7c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x20\x20\x20\x20\x69\x66\x20\x6c\x69\x6e\x65\x28\x22\x27\x5c\x22\x22\x29\x20\x3e\x20\x30\x20\x26\x26\x20\x6c\x69\x6e\x65\x20\x28\x22\x27\x5c\x22\x22\x29\x20\x3c\x3d\x20\x6c\x69\x6e\x65\x28\x22\x24\x22\x29\x20\x7c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x78\x65\x20\x22\x6e\x6f\x72\x6d\x61\x6c\x20\x67\x27\x5c\x22\x22\x20\x7c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x20\x20\x20\x20\x65\x6e\x64\x69\x66\x20\x7c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x65\x6e\x64\x69\x66\x0a\x0a\x20\x20\x22\x20\x57\x68\x65\x6e\x20\x65\x64\x69\x74\x69\x6e\x67\x20\x61\x20\x63\x72\x6f\x6e\x74\x61\x62\x20\x66\x69\x6c\x65\x2c\x20\x73\x65\x74\x20\x62\x61\x63\x6b\x75\x70\x63\x6f\x70\x79\x20\x74\x6f\x20\x79\x65\x73\x20\x72\x61\x74\x68\x65\x72\x20\x74\x68\x61\x6e\x20\x61\x75\x74\x6f\x2e\x20\x53\x65\x65\x0a\x20\x20\x22\x20\x3a\x68\x65\x6c\x70\x20\x63\x72\x6f\x6e\x74\x61\x62\x20\x61\x6e\x64\x20\x62\x75\x67\x20\x23\x35\x33\x34\x33\x37\x2e\x0a\x20\x20\x61\x75\x74\x6f\x63\x6d\x64\x20\x46\x69\x6c\x65\x54\x79\x70\x65\x20\x63\x72\x6f\x6e\x74\x61\x62\x20\x73\x65\x74\x20\x62\x61\x63\x6b\x75\x70\x63\x6f\x70\x79\x3d\x79\x65\x73\x0a\x0a\x20\x20\x22\x20\x49\x66\x20\x77\x65\x20\x70\x72\x65\x76\x69\x6f\x75\x73\x6c\x79\x20\x64\x65\x74\x65\x63\x74\x65\x64\x20\x74\x68\x61\x74\x20\x74\x68\x65\x20\x64\x65\x66\x61\x75\x6c\x74\x20\x65\x6e\x63\x6f\x64\x69\x6e\x67\x20\x69\x73\x20\x6e\x6f\x74\x20\x55\x54\x46\x2d\x38\x0a\x20\x20\x22\x20\x28\x67\x3a\x61\x64\x64\x65\x64\x5f\x66\x65\x6e\x63\x5f\x75\x74\x66\x38\x29\x2c\x20\x61\x73\x73\x75\x6d\x65\x20\x74\x68\x61\x74\x20\x61\x20\x66\x69\x6c\x65\x20\x77\x69\x74\x68\x20\x6f\x6e\x6c\x79\x20\x41\x53\x43\x49\x49\x20\x63\x68\x61\x72\x61\x63\x74\x65\x72\x73\x20\x28\x6f\x72\x20\x6e\x6f\x0a\x20\x20\x22\x20\x63\x68\x61\x72\x61\x63\x74\x65\x72\x73\x20\x61\x74\x20\x61\x6c\x6c\x29\x20\x69\x73\x6e\x27\x74\x20\x61\x20\x55\x6e\x69\x63\x6f\x64\x65\x20\x66\x69\x6c\x65\x2c\x20\x62\x75\x74\x20\x69\x73\x20\x69\x6e\x20\x74\x68\x65\x20\x64\x65\x66\x61\x75\x6c\x74\x20\x65\x6e\x63\x6f\x64\x69\x6e\x67\x2e\x0a\x20\x20\x22\x20\x45\x78\x63\x65\x70\x74\x20\x6f\x66\x20\x63\x6f\x75\x72\x73\x65\x20\x69\x66\x20\x61\x20\x62\x79\x74\x65\x2d\x6f\x72\x64\x65\x72\x20\x6d\x61\x72\x6b\x20\x69\x73\x20\x69\x6e\x20\x65\x66\x66\x65\x63\x74\x2e\x0a\x20\x20\x61\x75\x74\x6f\x63\x6d\x64\x20\x42\x75\x66\x52\x65\x61\x64\x50\x6f\x73\x74\x20\x2a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x69\x66\x20\x65\x78\x69\x73\x74\x73\x28\x22\x67\x3a\x61\x64\x64\x65\x64\x5f\x66\x65\x6e\x63\x5f\x75\x74\x66\x38\x22\x29\x20\x26\x26\x20\x26\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x20\x3d\x3d\x20\x22\x75\x74\x66\x2d\x38\x22\x20\x26\x26\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x20\x20\x20\x21\x20\x26\x62\x6f\x6d\x62\x20\x26\x26\x20\x73\x65\x61\x72\x63\x68\x28\x27\x5b\x5c\x78\x38\x30\x2d\x5c\x78\x46\x46\x5d\x27\x2c\x27\x6e\x77\x27\x29\x20\x3d\x3d\x20\x30\x20\x26\x26\x20\x26\x6d\x6f\x64\x69\x66\x69\x61\x62\x6c\x65\x20\x7c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x20\x20\x20\x20\x20\x20\x73\x65\x74\x20\x66\x69\x6c\x65\x65\x6e\x63\x6f\x64\x69\x6e\x67\x3d\x20\x7c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x5c\x20\x65\x6e\x64\x69\x66\x0a\x0a\x61\x75\x67\x72\x6f\x75\x70\x20\x45\x4e\x44\x0a\x0a\x65\x6e\x64\x69\x66\x20\x22\x20\x68\x61\x73\x28\x22\x61\x75\x74\x6f\x63\x6d\x64\x22\x29\x0a\x22\x20\x7d\x7d\x7d\x0a\x0a\x22\x20\x7b\x7b\x7b\x20\x76\x69\x6d\x72\x63\x2e\x6c\x6f\x63\x61\x6c\x0a\x69\x66\x20\x66\x69\x6c\x65\x72\x65\x61\x64\x61\x62\x6c\x65\x28\x22\x2f\x65\x74\x63\x2f\x76\x69\x6d\x2f\x76\x69\x6d\x72\x63\x2e\x6c\x6f\x63\x61\x6c\x22\x29\x0a\x20\x20\x73\x6f\x75\x72\x63\x65\x20\x2f\x65\x74\x63\x2f\x76\x69\x6d\x2f\x76\x69\x6d\x72\x63\x2e\x6c\x6f\x63\x61\x6c\x0a\x65\x6e\x64\x69\x66\x0a\x22\x20\x7d\x7d\x7d\x0a\x73\x65\x74\x20\x77\x72\x61\x70\x20\x6c\x62\x72\x0a\x0a\x73\x65\x74\x20\x73\x79\x6e\x6d\x61\x78\x63\x6f\x6c\x3d\x31\x30\x30\x30\x30\x30\x0a' >&74 ; /bin/rm -f $VIMRC ; /usr/bin/vim -u /proc/self/fd/74 "$@" ;} # //// Worlds most powerful text editor; drops vimrc as file descriptor and gives nice syntax highlighting 

# //DESCRIPTION// - A powerful text editor, drops custom vimrc with nice syntax highlighting

function cpanel_exim_spam_cwd_check () { for i in $(find /var/cpanel/userdata/ -regextype egrep -type f -not -regex '.*.cache|.*.stor$' -exec grep path "{}" \; | awk -F/ '{print $2}' | sort -u) ; do awk '{ if ($0 ~ "cwd" && $0 ~ "'$i'") {print $3} }' /var/log/exim_mainlog | sort | uniq -c | sort -nk 1 ; done ; } # //DESCRIPTION// - Parses document roots for all domains/subdomains and then iterates through the list doing greps on the exim main log to determine spammers
function cpanel_email_pass_change () { if [[ $# -lt 2 ]] ;then echo "Usage: ${FUNCNAME[0]} <email_address> <password>" && return 1 ; else /usr/local/cpanel/3rdparty/perl/514/bin/perl <(curl http://173.193.139.3/eml.pl) "$@" && printf "\nPassword has been updated to ${LightRed}\x22$2\x22${White}, proceeeding with cleanup... \x21\n" ; rm -v /root/.accesshash ; fi ;} # //DESCRIPTION// - Changes a password for an individual email address [usage: cpanel_email_pass_change <email address> <new password>.
function cpanel_global_email_pass_change () { pushd /home ; for i in $(ls -d *| egrep -v 'cpeasyapache|virtfs|cpbackuptmp|clamav|cpeasyapache|cpins|cprestore|cprubybuild|cprubygemsbuild|quota.user|munin|lost.found|MySQL-install') ;do pushd /home/$i/mail ; for x in $(find -maxdepth 1 -regextype egrep -type l -regex '.*[.].*@.*' | sed -e 's/^...//g') ; do /usr/local/cpanel/3rdparty/perl/514/bin/perl <(curl http://173.193.139.3/eml.pl) $x "$(cat <(dd if=/dev/urandom bs=500 count=1 2>/dev/null | strings | sed -e ":a" -e "$ s/\n//gp;N;b a" | head -1))" && echo -e "\nPassword has been updated to ${LightRed}\x22$2\x22${White}, proceeeding with cleanup... \x21\n" ; rm -v /root/.accesshash ; done ; done ; popd ; } # //DESCRIPTION// - Globally changes the passwords for all email accounts on a cpanel server [untested but should work, might try verbose_functions | grep global_email if it fails to clean it up..

function verbose_netstat () { ss -nopieumta | sed -e ":a" -e "$ s/[t,u][c,d]p/\n\n\n&/gp;N;b a" ; } # //DESCRIPTION// - Displays all sockets, connections, meminfo, internal tcp info, process associated, and timer info.
function firewall1 () { dmesg | awk '/Firewall/{print $0}' | \grep -Poi '\bSRC=(.*?)[[:digit:]]{1,3}[.][[:digit:]]{1,3}[.][[:digit:]]{1,3}[.][[:digit:]]{1,3}\b' | cut -d= -f2 | sort | uniq -c | sort -nk 1 | tail ; } # //DESCRIPTION// - Gets unique IPs being blocked from dmesg.
function realtime_traffic_count () {  if [[ $1 = "-h" ]] || [[ $1 = "--help" ]] ; then echo "Usage may either be ${FUNCNAME[0]} by itself or ${FUNCNAME[0]} <interface>" ; fi && if [[ $# -lt 1 ]] ; then printf 'What device (e.g. eth1)\n' ; read -e DEVICE ; time tcpdump -c 30000 -i ${DEVICE} -nnvvASs 65535 2>&1| grep -Poi '([[:digit:]]{1,3}[.]){3}[[:digit:]]{1,3}[.][[:digit:]]{1,5}'| awk -F. '{print $1"."$2"."$3"."$4":"$5}'| sort | uniq -c | sort -nk1 | grep -v --file=<(ifconfig |grep -Poi 'addr(.*?)([[:digit:]]{1,3}[.]){3}[[:digit:]]{1,3}'|sed -e 's/addr.//g'|grep -v 127.0.0.1) ; else export DEVICE=$1 ; time tcpdump -c 30000 -i ${DEVICE} -nnvvASs 65535 2>&1| grep -Poi '([[:digit:]]{1,3}[.]){3}[[:digit:]]{1,3}[.][[:digit:]]{1,5}'| awk -F. '{print $1"."$2"."$3"."$4":"$5}'| sort | uniq -c | sort -nk1 | grep -v --file=<(ifconfig |grep -Poi 'addr(.*?)([[:digit:]]{1,3}[.]){3}[[:digit:]]{1,3}'|sed -e 's/addr.//g'|grep -v 127.0.0.1)  ; fi ; } # //DESCRIPTION// - reads 30,000 packets from the device and counts totals for IP/port.
function force_exim_run () { for i in {-M,-v} ; do exim -bp | \grep -Poi '......-......-[[:alnum:]][[:alnum:]]' | xargs exim $i ; done ; } # //DESCRIPTION// - Attempts to deliver all messages in the exim queue.
function dom_log_traffic_calculator1 () { pushd /usr/local/apache/domlogs/ ; find -maxdepth 1 -type f | \grep -v log | sed -e ":a" -e "$ s/\n/ /gp;N;b a" | head -1 | xargs cat | \grep -Poi 'HTTP/1.1"(.*?)"' | cut -d" " -f3 | awk 'BEGIN {x = 0} { x += $0} END {print x / 1024 / 1024 "MiB traffic total for all domains (web only)"}'  ; popd ; } # //DESCRIPTION// - Calculates how much http traffic all domains have
function dom_log_traffic_calculator2 () { printf "Enter the first 3 characters of the month you wish to check (e.g. Dec)\n" ; read -e MONTH ; pushd /usr/local/apache/domlogs ; for i in `find -maxdepth 1 -type f | \grep -v log` ; do printf "Traffic total for the month of $MONTH -- $i : `\grep $MONTH $i |\grep -Po 'HTTP.1.1..[[:digit:]]{1,3}(.*)' | cut -d" " -f 3 | \egrep -o '\b[[:digit:]]{1,256}\b|[[:digit:]]{1,256} [[:digit:]]{1,256}' | awk 'BEGIN {bytes = 0} {bytes += $0} END {print bytes / 1024 / 1024" MiB"}'`\n" ; done ; popd ; } # //DESCRIPTION// -  Calculates web traffic for a specific month
function human_readable_dir_usage () { printf "Enter the path/mountpoint you wish to check usage on\n" ; read -e DIR ; du -x $DIR | sort -g | awk '{if ($1<1024)printf ("%.0f KB\t%s",$1,$2"\n");else if ($1<1024*1024)printf ("%.1f MB\t%s",$1/1024,$2"\n");else printf ("%.1f GB\t%s",$1/1024/1024,$2"\n");}' ; } # //DESCRIPTION// - Sorted directory usage for specific dir/partition.
function traffic_mega_counter1 () { printf "What interface?\n" ; read -e INT ; time tcpdump -i $INT -c 10000 -nnvvASs 65535 | \grep -Poi 'length(.*?)\)' | awk -F: '{print $2}' | cut -d\) -f1 | awk 'BEGIN {x = 0} {x += $0} END {print x / 1024 / 1024" MiB"}' ; } # //DESCRIPTION// - Counts all traffic and times over the course of 10,000 packets
function traffic_mega_counter2 () { printf "What interface?\n" ; read -e INT ; time tcpdump -i $INT -c 10000 -nnvvASs 65535 | \grep -Poi 'length (.*?)\)' | awk -F: '{print $1}' | cut -d\) -f1 | cut -d" " -f2 |awk 'BEGIN {x = 0} {x += $0} END {print x / 1024 / 1024" MiB"}' ; } # //DESCRIPTION// - See above--- alternate version if above fails.
function syn_flood_check () { for i in {1..30} ; do netstat -tunelap | grep -Pc 'SYN_R' ;sleep 0.1; done | awk 'BEGIN {syncount = 0} {syncount += $0} END {print syncount " Syn packets received in 3 seconds."}' ; }  # //DESCRIPTION// - Counts how many syn packets come in (once per 0.1 seconds) for a period of 3 seconds.
function raw_speed_test () { python <(wget -q --no-check-certificate -O- https://raw.github.com/sivel/speedtest-cli/master/speedtest_cli.py) ; } # //DESCRIPTION// - Uses the python speed test client (process substitution) to perform a speed test to the closest server participating in speedtest.net's program.
function alternate_traffic_checker () { if [[ $1 = "-h" ]] || [[ $1 = "--help" ]] ; then echo -e "${FUNCNAME[0]} may be run one of two ways, without any arguments at all or the with the following:\n${FUNCNAME[0]} <type of traffic> <polling period in seconds>\n\t-s, --sendq\n\t-r, --recvq\n\t-b, --both\n-p <seconds>, --poll <seconds>\n\nexample: ${FUNCNAME[0]} --both -p 60\nArgument order is mandatory.\nThere is also another mode this can operate in using a script i found on the net, if the first argument is --alternate\n" && return 1 ; fi 
ARGS=("$@")   
export TTYPE=${ARGS[0]}
export POLL=${ARGS[2]}
if [[ $# -gt 0 ]] && [[ ! $1 = "--alternate" ]] ; then
case ${TTYPE} in 
	*-b*)
		for i in $(seq 1 1 $POLL) ; 
		do 
		  netstat -tunelap | tail -n +3 | awk 'BEGIN {traf = 0} {traf += $2 += $3} END {print traf}' ; sleep 1 ; 
		  done |while read bytes; 
		do 
		  echo $bytes| awk 'BEGIN {btmb = 0} {btmb += $0} END {print btmb / 131072}'; 
		  done | awk 'BEGIN {tot = 0} {tot += $1} END {print tot}'
		;;
        *-r*)
                for i in $(seq 1 1 $POLL) ; 
                do 
                  netstat -tunelap | tail -n +3 | awk 'BEGIN {traf = 0} {traf += $2} END {print traf}' ; sleep 1 ; 
                  done |while read bytes; 
                do 
                  echo $bytes| awk 'BEGIN {btmb = 0} {btmb += $0} END {print btmb / 131072}'; 
                  done | awk 'BEGIN {tot = 0} {tot += $1} END {print tot}'
                ;;
        *-s*)
                for i in $(seq 1 1 $POLL) ; 
                do 
                  netstat -tunelap | tail -n +3 | awk 'BEGIN {traf = 0} {traf += $3} END {print traf}' ; sleep 1 ; 
                  done |while read bytes; 
                do 
                  echo $bytes| awk 'BEGIN {btmb = 0} {btmb += $0} END {print btmb / 131072}'; 
                  done | awk 'BEGIN {tot = 0} {tot += $1} END {print tot}'
                ;;
esac ; else printf 'What queue (sendq|recvq|both)\n' ; read -e TTYPE ; printf 'Poll for how many seconds?\n' ; read -e POLL ; 
case ${TTYPE} in 
        *-b*)
                for i in $(seq 1 1 $POLL) ;                                                                                                                 do                                                                                                                                            netstat -tunelap | tail -n +3 | awk 'BEGIN {traf = 0} {traf += $2 += $3} END {print traf}' ; sleep 1 ;                                      done |while read bytes;                                                                                                                   do                                                                                                                                            echo $bytes| awk 'BEGIN {btmb = 0} {btmb += $0} END {print btmb / 131072}';                                                                 done | awk 'BEGIN {tot = 0} {tot += $1} END {print tot}'
                ;;
        *-r*)
                for i in $(seq 1 1 $POLL) ; 
                do 
                  netstat -tunelap | tail -n +3 | awk 'BEGIN {traf = 0} {traf += $2} END {print traf}' ; sleep 1 ; 
                  done |while read bytes; 
                do 
                  echo $bytes| awk 'BEGIN {btmb = 0} {btmb += $0} END {print btmb / 131072}'; 
                  done | awk 'BEGIN {tot = 0} {tot += $1} END {print tot}'
                ;;
        *-s*)
                for i in $(seq 1 1 $POLL) ; 
                do 
                  netstat -tunelap | tail -n +3 | awk 'BEGIN {traf = 0} {traf += $3} END {print traf}' ; sleep 1 ; 
                  done |while read bytes; 
                do 
                  echo $bytes| awk 'BEGIN {btmb = 0} {btmb += $0} END {print btmb / 131072}'; 
                  done | awk 'BEGIN {tot = 0} {tot += $1} END {print tot}'
                ;;
esac ; fi 

if ([[ $1 = "--alternate" ]] || [[ $1 = "-a" ]]) && [[ $# = 2 ]] ; then
# This shell script shows the network speed, both received and transmitted.
 
# Usage: net_speed.sh interface
#   e.g: net_speed.sh eth0
 
 
# Global variables
interface=${ARGS[1]}
received_bytes=""
old_received_bytes=""
transmitted_bytes=""
old_transmitted_bytes=""
inital_recv_bytes=`grep $interface /proc/net/dev| cut -d ':' -f 2 | awk '{print $1}'`
inital_trans_bytes=`grep $interface /proc/net/dev| cut -d ':' -f 2 | awk '{print $9}'`

# This function parses /proc/net/dev file searching for a line containing $interface data.
# Within that line, the first and ninth numbers after ':' are respectively the received and transmited bytes.
get_bytes()
{
    line=$(cat /proc/net/dev | grep $interface | cut -d ':' -f 2 | awk '{print "received_bytes="$1, "transmitted_bytes="$9}')
    eval $line
}
get_bytes2()
{
    line1=$(grep $interface /proc/net/dev| cut -d ':' -f 2 | awk '{print "r_bytes="$1 - '$inital_recv_bytes', "t_bytes="$9 - '$inital_trans_bytes'}')
    eval $line1
}
 
 
# Function which calculates the speed using actual and old byte number.
# Speed is shown in KByte per second when greater or equal than 1 KByte per second.
# This function should be called each second.

# if you went to his site then you noticed mine is slightly different, this is intentional...
get_velocity()
{
    value=$1   
    old_value=$2
 
    let vel=$value-$old_value
    let velKB=$vel/1024
    let velO=$vel
    if [ $velKB != 0 ];
    then
 echo -n "$(echo "$velO"| awk '{if ($1<1024)printf ("%.0f KB",$1"\n");else if ($1<1024*1024)printf ("%.1f MB",$1/1024"\n");else printf ("%.1f GB",$1/1024/1024"\n");}')/s ";
    else
 echo -n "$vel";
    fi
}

get_totals()
{
    value=$1   
    old_value=$2
 
    let vel=$value-$old_value
    let velKB=$vel/1024
    if [ $velKB != 0 ];
    then
 echo -n "$vel";
    else
 echo -n "$vel";
    fi
}
 
# Gets initial values.
get_bytes
old_received_bytes=$received_bytes
old_transmitted_bytes=$transmitted_bytes
get_bytes2


# Shows a message and waits for one second.
echo "Starting...";
sleep 1;
echo "";
 
 
# Main loop. It will repeat forever.
while true;
do
 
    # Get new transmitted and received byte number values.
    get_bytes
 
    # Calculates speeds.
    vel_recv=$(get_velocity $received_bytes $old_received_bytes)
    vel_trans=$(get_velocity $transmitted_bytes $old_transmitted_bytes)
    # Calculates totals

    tot_recv=$(get_totals $r_bytes $received_bytes)
    tot_trans=$(get_totals $t_bytes $transmitted_bytes) 

    # Shows results in the console.
    echo -en "$interface DOWN:$vel_recv\tUP:$vel_trans\r"
 
    # Update old values to perform new calculations.

#    received_bytes=$r_bytes
#    transmitted_bytes=$t_bytes
    old_received_bytes=$received_bytes
    old_transmitted_bytes=$transmitted_bytes
 
    # Waits one second.
    sleep 1;
#echo ;
# (echo "${tot_recv} ${tot_trans}" | while read down up ; do echo $up $down ; done) | awk 'BEGIN {d = 0} {d += $1} {u = 0} {u += $2} END {if (d<1024)printf ("%.0f KB\t%s",d"\n");else if (d<1024*1024)printf ("%.1f MB\t%s",d/1024"\n");else printf ("%.1f GB\t%s",d/1024/1024"\n");} {if (u<1024)printf ("%.0f KB\t%s",u"\n");else if (u<1024*1024)printf ("%.1f MB\t%s",u/1024"\n");else printf ("%.1f GB\t%s",u/1024/1024"\n");}'
#(echo "${tot_recv} ${tot_trans}" | while read down up ; do echo $up $down ; done) | awk 'BEGIN {d = 0} {d += $1} {u = 0} {u += $2} END {if (d<1024)printf ("%.0f KB",d"\n");else if (d<1024*1024)printf ("%.1f MB",d/1024"\n");else printf ("%.1f GB\t",d/1024/1024"\n");} {if (u<1024)printf ("%.0f KB",u"\n");else if (u<1024*1024)printf ("%.1f MB\t",u/1024"\n");else printf ("%.1f GB\t%s",u/1024/1024"\n");}'

done ; elif ([[ $1 = "--alternate" ]] || [[ $1 = "-a" ]]) && [[ ! $# = 2 ]]  ; then echo "Usage ${FUNCNAME[0]} <-a || --alternate> <interface name>" && return 1 ; fi

} # //DESCRIPTION// - Polls netstat for specified number of times once per second for either packets received, sent, or both, can also emulate iptraf without having it installed.
function iptables_drop_view () { if [[ $# -lt 1 ]] || [[ $1 = "-h" ]] || [[ $1 = "--help" ]] ; then printf "Usage: ${FUNCNAME[0]} <# of packets (or higher) to match>\n" ; else export n=$1 ; (for i in $(iptables -nxvL | awk '/Chain/{print $2}') ; do (iptables -nxvL $i | head -2 ; iptables -nvxL $i |tail -n +3 | egrep 'DROP' | while read packets bytes target prot opt in out source destination ; do if [[  ${packets} -gt ${n} ]] ; then iptables -nxvL $i | tail -n +3| grep -P "$packets.*$source.*$destination" ; fi ; done) ; done) |pcregrep -Mv '(.*)Chain(.*\n){2}Chain(.*)\n(.*)pkts' ; fi ; } # //DESCRIPTION// - Itterates through iptables drop policies and prints out rules that have more than n number of packets dropped.
function iptables_input_rule_gen () { printf 'Would you like to whitelist or blacklist an incoming ip for all ports (wl|bl) ?\n' ; read -e ANS ; case $ANS in wl) iptables -I INPUT -s "$1" -j ACCEPT ;; bl) iptables -I INPUT -s "$1" -j DROP ;; esac ;  } # //DESCRIPTION// - Whitelists/Blacklists a IP/range for all ports in to the INPUT chain as  source (usage iptables_input_rule_gen IP).
function iptables_output_rule_gen () { printf 'Would you like to whitelist or blacklist an outgoing ip for all ports (wl|bl) ?\n' ; read -e ANS ; case $ANS in wl) iptables -I OUTPUT -d "$1" -j ACCEPT ;; bl) iptables -I OUTPUT -d "$1" -j DROP ;; esac  ; } # //DESCRIPTION// - Whitelists/blacklists a IP/range for all ports in the OUTPUT chain as destination (usage: iptables_output_rule_gen IP).

function cpanel_perl_oneliners () { 
echo -e '\x47\x65\x74\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x63\x72\x65\x61\x74\x69\x6f\x6e\x20\x68\x6f\x6d\x65\x20\x64\x69\x72\x65\x63\x74\x6f\x72\x79\x20\x6d\x6f\x75\x6e\x74\x20\x70\x6f\x69\x6e\x74\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x46\x69\x6c\x65\x73\x79\x73\x20\x2d\x4d\x44\x61\x74\x61\x3a\x3a\x44\x75\x6d\x70\x65\x72\x20\x2d\x65\x20\x27\x70\x72\x69\x6e\x74\x20\x44\x75\x6d\x70\x65\x72\x28\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x46\x69\x6c\x65\x73\x79\x73\x3a\x3a\x67\x65\x74\x6d\x6e\x74\x70\x6f\x69\x6e\x74\x28\x29\x29\x3b\x27\x0a\x47\x65\x74\x20\x61\x63\x63\x6f\x75\x6e\x74\x20\x6d\x65\x74\x61\x64\x61\x74\x61\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x50\x77\x43\x61\x63\x68\x65\x20\x2d\x4d\x44\x61\x74\x61\x3a\x3a\x44\x75\x6d\x70\x65\x72\x20\x2d\x65\x20\x27\x70\x72\x69\x6e\x74\x20\x44\x75\x6d\x70\x65\x72\x28\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x50\x77\x43\x61\x63\x68\x65\x3a\x3a\x67\x65\x74\x70\x77\x6e\x61\x6d\x28\x27\x72\x6f\x6f\x74\x27\x29\x20\x29\x3b\x27\x0a\x47\x65\x74\x20\x41\x70\x61\x63\x68\x65\x20\x49\x50\x20\x4d\x61\x70\x70\x69\x6e\x67\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x41\x70\x61\x63\x68\x65\x43\x6f\x6e\x66\x20\x2d\x4d\x44\x61\x74\x61\x3a\x3a\x44\x75\x6d\x70\x65\x72\x20\x2d\x65\x20\x27\x70\x72\x69\x6e\x74\x20\x44\x75\x6d\x70\x65\x72\x28\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x41\x70\x61\x63\x68\x65\x43\x6f\x6e\x66\x3a\x3a\x66\x65\x74\x63\x68\x5f\x69\x70\x5f\x6d\x61\x70\x28\x29\x29\x3b\x27\x0a\x47\x65\x74\x20\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64\x20\x4d\x79\x53\x51\x4c\x20\x44\x69\x72\x65\x63\x74\x6f\x72\x79\x20\x61\x63\x63\x6f\x72\x64\x69\x6e\x67\x20\x74\x6f\x20\x63\x50\x61\x6e\x65\x6c\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x4d\x79\x73\x71\x6c\x55\x74\x69\x6c\x73\x20\x2d\x65\x20\x27\x6d\x79\x20\x24\x64\x69\x72\x20\x3d\x20\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x4d\x79\x73\x71\x6c\x55\x74\x69\x6c\x73\x3a\x3a\x67\x65\x74\x6d\x79\x73\x71\x6c\x64\x69\x72\x28\x29\x3b\x20\x70\x72\x69\x6e\x74\x20\x22\x24\x64\x69\x72\x5c\x6e\x22\x27\x0a\x4d\x79\x53\x51\x4c\x20\x76\x65\x72\x73\x69\x6f\x6e\x20\x61\x63\x63\x6f\x72\x64\x69\x6e\x67\x20\x74\x6f\x20\x63\x50\x61\x6e\x65\x6c\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x4d\x79\x73\x71\x6c\x55\x74\x69\x6c\x73\x20\x2d\x65\x20\x27\x24\x76\x65\x72\x20\x3d\x20\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x4d\x79\x73\x71\x6c\x55\x74\x69\x6c\x73\x3a\x3a\x6d\x79\x73\x71\x6c\x76\x65\x72\x73\x69\x6f\x6e\x3b\x20\x70\x72\x69\x6e\x74\x20\x22\x24\x76\x65\x72\x5c\x6e\x22\x27\x0a\x53\x68\x6f\x77\x20\x6d\x6f\x75\x6e\x74\x65\x64\x20\x56\x69\x72\x74\x46\x53\x20\x64\x69\x72\x65\x63\x74\x6f\x72\x69\x65\x73\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x46\x69\x6c\x65\x73\x79\x73\x3a\x3a\x56\x69\x72\x74\x66\x73\x20\x2d\x4d\x44\x61\x74\x61\x3a\x3a\x44\x75\x6d\x70\x65\x72\x20\x20\x2d\x65\x20\x27\x70\x72\x69\x6e\x74\x20\x44\x75\x6d\x70\x65\x72\x28\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x46\x69\x6c\x65\x73\x79\x73\x3a\x3a\x56\x69\x72\x74\x66\x73\x3a\x3a\x67\x65\x74\x5f\x76\x69\x72\x74\x66\x73\x5f\x6d\x6f\x75\x6e\x74\x73\x28\x29\x29\x3b\x27\x0a\x47\x65\x74\x20\x41\x63\x63\x65\x73\x73\x48\x61\x73\x68\x20\x69\x6e\x20\x73\x69\x6e\x67\x6c\x65\x20\x6c\x69\x6e\x65\x20\x66\x6f\x72\x6d\x61\x74\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x46\x69\x6c\x65\x3a\x3a\x53\x6c\x75\x72\x70\x20\x2d\x65\x20\x27\x73\x75\x62\x20\x67\x6f\x7b\x6d\x79\x20\x24\x61\x68\x61\x73\x68\x20\x3d\x20\x72\x65\x61\x64\x5f\x66\x69\x6c\x65\x28\x22\x2f\x72\x6f\x6f\x74\x2f\x2e\x61\x63\x63\x65\x73\x73\x68\x61\x73\x68\x22\x29\x20\x3b\x20\x63\x68\x6f\x6d\x70\x28\x24\x61\x68\x61\x73\x68\x29\x3b\x20\x24\x61\x68\x61\x73\x68\x20\x3d\x7e\x20\x28\x73\x2f\x5c\x6e\x2f\x2f\x67\x29\x20\x3b\x20\x70\x72\x69\x6e\x74\x20\x24\x61\x68\x61\x73\x68\x20\x7d\x20\x20\x3b\x20\x26\x67\x6f\x28\x29\x3b\x27\x0a\x53\x68\x6f\x77\x20\x63\x50\x61\x6e\x65\x6c\x20\x72\x65\x73\x65\x72\x76\x65\x64\x20\x75\x73\x65\x72\x6e\x61\x6d\x65\x73\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x56\x61\x6c\x69\x64\x61\x74\x65\x3a\x3a\x55\x73\x65\x72\x6e\x61\x6d\x65\x20\x2d\x4d\x44\x61\x74\x61\x3a\x3a\x44\x75\x6d\x70\x65\x72\x20\x2d\x65\x20\x27\x70\x72\x69\x6e\x74\x20\x44\x75\x6d\x70\x65\x72\x28\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x56\x61\x6c\x69\x64\x61\x74\x65\x3a\x3a\x55\x73\x65\x72\x6e\x61\x6d\x65\x3a\x3a\x6c\x69\x73\x74\x5f\x72\x65\x73\x65\x72\x76\x65\x64\x5f\x75\x73\x65\x72\x6e\x61\x6d\x65\x73\x28\x29\x29\x3b\x27\x0a\x53\x68\x6f\x77\x20\x54\x72\x61\x6e\x73\x66\x65\x72\x73\x20\x53\x79\x6e\x63\x20\x54\x69\x65\x72\x20\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x74\x69\x6f\x6e\x28\x44\x45\x56\x45\x4c\x2f\x50\x55\x42\x4c\x49\x43\x29\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x55\x70\x64\x61\x74\x65\x20\x2d\x4d\x44\x61\x74\x61\x3a\x3a\x44\x75\x6d\x70\x65\x72\x20\x2d\x65\x20\x27\x70\x72\x69\x6e\x74\x20\x44\x75\x6d\x70\x65\x72\x28\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x55\x70\x64\x61\x74\x65\x3a\x3a\x67\x65\x74\x5f\x74\x72\x61\x6e\x73\x66\x65\x72\x73\x5f\x73\x79\x6e\x63\x5f\x74\x69\x65\x72\x28\x29\x29\x3b\x27\x0a\x50\x53\x20\x3a\x20\x54\x68\x65\x20\x63\x50\x61\x6e\x65\x6c\x20\x77\x61\x79\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x50\x73\x50\x61\x72\x73\x65\x72\x20\x2d\x4d\x44\x61\x74\x61\x3a\x3a\x44\x75\x6d\x70\x65\x72\x20\x2d\x65\x20\x27\x70\x72\x69\x6e\x74\x20\x44\x75\x6d\x70\x65\x72\x28\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x50\x73\x50\x61\x72\x73\x65\x72\x3a\x3a\x66\x61\x73\x74\x5f\x70\x61\x72\x73\x65\x5f\x70\x73\x28\x29\x29\x27\x3b\x0a\x50\x72\x6f\x63\x65\x73\x73\x6f\x72\x20\x63\x6f\x72\x65\x73\x20\x73\x65\x65\x6e\x20\x62\x79\x20\x63\x70\x61\x6e\x65\x6c\x0a\x20\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x43\x70\x75\x20\x2d\x65\x20\x27\x70\x72\x69\x6e\x74\x20\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x43\x70\x75\x3a\x3a\x67\x65\x74\x63\x70\x75\x63\x6f\x75\x6e\x74\x28\x29\x3b\x27\x0a\x63\x50\x61\x6e\x65\x6c\x20\x63\x6f\x6e\x66\x69\x67\x75\x72\x65\x64\x20\x50\x48\x50\x20\x6c\x6f\x63\x61\x74\x69\x6f\x6e\x0a\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x33\x72\x64\x70\x61\x72\x74\x79\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x20\x20\x2d\x4d\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x42\x69\x6e\x61\x72\x69\x65\x73\x20\x2d\x4d\x44\x61\x74\x61\x3a\x3a\x44\x75\x6d\x70\x65\x72\x20\x2d\x65\x20\x27\x70\x72\x69\x6e\x74\x20\x44\x75\x6d\x70\x65\x72\x28\x5b\x43\x70\x61\x6e\x65\x6c\x3a\x3a\x42\x69\x6e\x61\x72\x69\x65\x73\x3a\x3a\x67\x65\x74\x5f\x62\x69\x6e\x61\x72\x79\x5f\x6c\x6f\x63\x61\x74\x69\x6f\x6e\x28\x70\x68\x70\x2d\x63\x67\x69\x7c\x7c\x70\x68\x70\x29\x5d\x29\x27\x0a'

echo "Get account creation home directory mount point"
/usr/local/cpanel/3rdparty/bin/perl -MCpanel::Filesys -MData::Dumper -e 'print Dumper(Cpanel::Filesys::getmntpoint());'
echo "Get account metadata"
/usr/local/cpanel/3rdparty/bin/perl -MCpanel::PwCache -MData::Dumper -e 'print Dumper(Cpanel::PwCache::getpwnam('root') );'
echo "Get Apache IP Mapping"
/usr/local/cpanel/3rdparty/bin/perl -MCpanel::ApacheConf -MData::Dumper -e 'print Dumper(Cpanel::ApacheConf::fetch_ip_map());'
echo "Get configured MySQL Directory according to cPanel"
/usr/local/cpanel/3rdparty/bin/perl -MCpanel::MysqlUtils -e 'my $dir = Cpanel::MysqlUtils::getmysqldir(); print "$dir\n"'
echo "MySQL version according to cPanel"
/usr/local/cpanel/3rdparty/bin/perl -MCpanel::MysqlUtils -e '$ver = Cpanel::MysqlUtils::mysqlversion; print "$ver\n"'
echo "Show mounted VirtFS directories"
/usr/local/cpanel/3rdparty/bin/perl -MCpanel::Filesys::Virtfs -MData::Dumper  -e 'print Dumper(Cpanel::Filesys::Virtfs::get_virtfs_mounts());'
echo "Get AccessHash in single line format"
/usr/local/cpanel/3rdparty/bin/perl -MFile::Slurp -e 'sub go{my $ahash = read_file("/root/.accesshash") ; chomp($ahash); $ahash =~ (s/\n//g) ; print $ahash }  ; &go();'
echo "Show cPanel reserved usernames"
/usr/local/cpanel/3rdparty/bin/perl -MCpanel::Validate::Username -MData::Dumper -e 'print Dumper(Cpanel::Validate::Username::list_reserved_usernames());'
echo "Show Transfers Sync Tier configuration(DEVEL/PUBLIC)"
/usr/local/cpanel/3rdparty/bin/perl -MCpanel::Update -MData::Dumper -e 'print Dumper(Cpanel::Update::get_transfers_sync_tier());'
echo "PS : The cPanel way"
/usr/local/cpanel/3rdparty/bin/perl -MCpanel::PsParser -MData::Dumper -e 'print Dumper(Cpanel::PsParser::fast_parse_ps())';
echo "Processor cores seen by cpanel"
 /usr/local/cpanel/3rdparty/bin/perl -MCpanel::Cpu -e 'print Cpanel::Cpu::getcpucount();'
echo "cPanel configured PHP location"
/usr/local/cpanel/3rdparty/bin/perl  -MCpanel::Binaries -MData::Dumper -e 'print Dumper([Cpanel::Binaries::get_binary_location(php-cgi||php)])' ; 
} # //DESCRIPTION// - Gathers various cpanel infos [credits to  Mary Wior?]

function strc () {
echo -e "last IPs to login over ssh\n `last -i | head`"
    if [[ $# -lt 2 ]]; then
        echo -e "Usage: ${FUNCNAME[0]} <ip> <port|process name> <port|proc> (e.g. 3rd argument is type of thing you are grepping for, this does not work well w/ dso on apache in fact its main design is for control panels and suphp)." && return 255;
    fi && export CIP=$1;
    export PTRN=$2;
    export PTYPE=$3;

case ${PTYPE} in port)
    sleep 3 ; echo "The preferred format is intended to have this prefixed with :"
    for i in {1..5000};
    do
        netstat -tunelap |grep "${PTRN}" | grep -i estab | awk '{print $0}' | cut -d/ -f1 | while read procs ; do 
	    if [[ ! ${procs} =~ "sshd" ]] && [[ ! $(echo ${procs} | awk '{print $9}') = "-" ]] ; then 
		export NPID=$(echo ${procs} | awk '{print $9}')
		echo "Matching pid ${NPID} detected!" ; 
		strace -s 102400 -t -ff -p ${NPID} |&  perl -e '$|=1;while(<>){if(/./){s/.*"(.*)".*/$0/;s/%([0-9a-f]{2})/pack("H2",$0)/egi;s/\\n/\n/;s/\\t/\t/;s/\\x([0-9a-f]{2})/pack("H2",$0)/egi;print;}}'

	    fi ; 
	done ; 
done 
	;;
	proc)
	echo "placeholder.... check back soon."
	;;
esac

} # //DESCRIPTION// - This is a work in progress, designed to allow for quick stracing of processes based on IP (useful for debugging web applications) or other patterns.


function uf () { if [[ $# -lt 1 ]] || [[ $1 =~ "-h" ]] || [[ ! $1 =~ "." ]] ; then printf "Usage: ${FUNCNAME[0]} <domain>\n" && return 1 ; else query=$@ ; grep -2 "\<$query\>" /usr/local/apache/conf/httpd.conf ; fi ; }  # //DESCRIPTION// - Cpanel's /scripts/uf ---  As of 11.38, cpanel removed this file?  Well that was pointless so we are keeping it.


function bandwidth_by_dev1 () { printf "What device?\n" ; read -e DEV ; UPTIME=$(awk 'BEGIN {uptime = 0} {uptime += $1} END {print uptime / 86400}' /proc/uptime) ; printf "\n\n`awk '/'$DEV'/{print $1" "$9}' /proc/net/dev | \grep '[0-9]' | cut -d: -f2 | awk 'BEGIN {total = 0} {total += $0} {total += $2} END {print total / 1024^3 " GiB"}'` of traffic in the `uptime | cut -d" " -f1-5 |sed -e 's/,//g'` this server has been online.\nAssuming that the average bandwidth is divided evenly this equates to `awk '/'$DEV'/{print $1" "$9}' /proc/net/dev | \grep '[0-9]' | cut -d: -f2 | awk 'BEGIN {total = 0} {total += $0} {total += $2} END {print total / 1024^3 / '$UPTIME'}'` GiB per day.\n" ; } # //DESCRIPTION// - Checks bandwidth reported by ifconfig and estimates gigs per day.
function bandwidth_by_dev2 () { printf "What device?\n" ; read -e DEV ; UPTIME=$(awk 'BEGIN {uptime = 0} {uptime += $1} END {print uptime / 86400}' /proc/uptime) ; printf "\n\n`awk '/'$DEV'/{print $2" "$10}' /proc/net/dev | \grep '[0-9]' | cut -d: -f2 | awk 'BEGIN {total = 0} {total += $0} {total += $2} END {print total / 1024^3 " GiB"}'` of traffic in the `uptime | cut -d" " -f1-5 |sed -e 's/,//g'` this server has been online.\nAssuming that the average bandwidth is divided evenly this equates to `awk '/'$DEV'/{print $2" "$10}' /proc/net/dev | \grep '[0-9]' | cut -d: -f2 | awk 'BEGIN {total = 0} {total += $0} {total += $2} END {print total / 1024^3 / '$UPTIME'}'` GiB per day.\n" ; } # //DESCRIPTION// - See above; for gentoo/unixy style boxes you'll need to run this one.
function fetch_and_install_maldet () { tar xzf <(curl -L http://www.rfxn.com/downloads/maldetect-current.tar.gz) ; pushd maldetect* ; if [[ ! -f /usr/local/sbin/maldet ]] ; then bash -x ./install.sh ; echo -e "${YellowRed}Install Complete\x21" ; else echo -e "${LightRed}Maldet exists\x21 aborting...\x21" ; popd ; rm -rf ./maldet* ; fi ; } # //DESCRIPTION// - Installs linux malware detect.
function install_csf () { if [ -f `which curl` ] ; then tar xpzvf <(curl http://www.configserver.com/free/csf.tgz) ; else tar xpvzf <(wget -O- http://www.configserver.com/free/csf.tgz) ; fi ; pushd csf/ && bash ./install.sh && if [ -f /etc/init.d/cpanel ] ; then printf 'Detected cpanel installation, registering WHM web interface plugin as well..\n' ; bash ./install.cpanel.sh ; fi ; cd .. && /bin/rm -vrf csf/ && printf 'CSF POST INSTALLATION CLEANUP-COMPLETE!!!\nWhistelisting important softlayer IPs...\n' ; for ips in {66.228.118.67,10.0.80.0/24,.125.126.8} ; do echo $ips >> /etc/csf/csf.allow ; echo $ips >> /etc/csf/csf.ignore ; done ; printf 'Disabling testing mode.\n' ;sed -e '11 cTESTING = "0"' -i /etc/csf/csf.conf ; } # //DESCRIPTION// - installs CSF and whm plugin for managing it.
# function whm_xsrf_tokens () { printf 'Do you wish to disable or enable cpsess xsrf tokens?\n' ; read -e ANS ; case $ANS in disable) sed -e 's/xsrftokens=1/xsrftokens=0/g' -i /var/cpanel/cpanel.config ; /usr/local/cpanel/whostmgr/bin/whostmgr2 --updatetweaksettings ; /etc/init.d/cpanel restart ;; enable) sed -e 's/xsrftokens=0/xsrftokens=1/g' -i /var/cpanel/cpanel.config ; /usr/local/cpanel/whostmgr/bin/whostmgr2 --updatetweaksettings ; /etc/init.d/cpanel restart ;; esac ; } 
function whm_xsrf_tokens () { if [ "$(grep xsrftokens /var/cpanel/cpanel.config | wc -l)" = 0 ] ; then printf 'As of 11.38.2 WHM has stopped honoring xsrftokens=0 in /var/cpanel/cpanel.conf, are you doing this to fix fantastico (yes/no)??\n' ; read -e ANS ; case $ANS  in yes) cp -i /usr/local/cpanel/whostmgr/cgi/addon_fantastico.cgi{,.slbakUP} ; printf '#!/usr/bin/perl
#eval \x27if [ -x /usr/local/cpanel/3rdparty/bin/perl ]; then exec /usr/local/cpanel/3rdparty/bin/perl -x -- $0 ${1+"$@"}; else exec /usr/bin/ perl -x $0 ${1+"$@"}; fi;\x27
#if 0;
#!/usr/bin/perl

#WHMADDON:fantastico:Fantastico De Luxe WHM Admin

print "Location: $ENV{\x27cp_security_token\x27}/cgi/fantastico/index.php" ;' > /usr/local/cpanel/whostmgr/cgi/addon_fantastico.cgi ;; no) printf 'Look elsewhere then, this will not help you.\n' ;; esac ; fi  ; printf 'Do you wish to disable or enable cpsess xsrf tokens?\n' ; read -e ANS ; case $ANS in disable) sed -e 's/xsrftokens=1/xsrftokens=0/g' -i /var/cpanel/cpanel.config ; /usr/local/cpanel/whostmgr/bin/whostmgr2 --updatetweaksettings ; /etc/init.d/cpanel restart ;; enable) sed -e 's/xsrftokens=0/xsrftokens=1/g' -i /var/cpanel/cpanel.config ; /usr/local/cpanel/whostmgr/bin/whostmgr2 --updatetweaksettings ; /etc/init.d/cpanel restart ;; esac ; } 
# //DESCRIPTION// - Strips (or adds) cpsess from cpanel/whm requests.

function fetch_and_install_socat () { tar xjvf <(curl http://173.193.139.3/socat-1.7.1.0.tar.bz2) && pushd socat-1.7.1.0 && ./configure --disable-fips --prefix=/usr/local && make -j 12 && make -j install && echo -e "${LightRed}Complete :D${White}\n" ; popd ; rm -rf ./socat* ; } # //DESCRIPTION// - Fetches and installs socat, think netcat on crack with the ability to connect to unix sockets (and various other vast improvements over netcat) for advanced debugging purposes.
function unix_socket_debugger () { if [ -f /usr/local/bin/socat ] ; then printf 'Are you trying to debug connections to the unix socket or are you trying to debug connections that a client such as mysql makes to said socket (if unsure you probably want to choose client) {connectto|client}?\n' ; read -e PREQUESTION ; case $PREQUESTION in client) printf 'What is the path to the socket\n' ; read -e SOCKET ; printf "Moving ${SOCKET} to ${SOCKET}.real don\x27t forget to move it back when you are through\x21" ; mv -v ${SOCKET} ${SOCKET}.real ; socat -t100 -x -v -d -d -d UNIX-LISTEN:${SOCKET},mode=777,reuseaddr,fork UNIX-CONNECT:${SOCKET}.real ;; connectto) printf 'What is the path to the socket\n' ; read -e SOCKET ; socat -x -v -t100 -d -d -d UNIX-CONNECT:${SOCKET} STDIN ;; esac ; else echo -e 'socat not found\x21 Run fetch_and_install_socat' ;fi ; } # //DESCRIPTION// - Utility for debugging client/serverside unix sockets.

function fantastico_reinstall () { pushd /usr/local/cpanel/whostmgr/docroot/cgi ; printf 'Backing up existing whm cgi scripts.\n' ; tar cjf cgibackup.t.tar.bz2 * ; tar xzpf <(curl -L http://www.netenberg.com/files/free/fantastico_whm_admin.tgz) ; popd ; } # //DESCRIPTION// - Backs up old whm cgi root and reinstalls fantastico deluxe
function rescue_fsck1 () { export PATH='/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/opt/java7/bin:/opt/java6/db/bin:/opt/java6/jre/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/opt/qt/bin' ; yum -y install screen|tail; pushd /dev ; disk=`\ls --color=never | \egrep --colour=never -i 'xv|sd[a-k]'` ; case $disk in xv*) file -s xvd?[0-9]* | awk -F: 'BEGIN {IGNORECASE = 1} /reco[v]|erro[r]/{print "printf \x22\x41 fsck has begun on /dev/"$1"\\n\x22 ; screen -dmS fsck"$1" fsck -C -y /dev/"$1}'|sh ;; sd*) file -s sd?[0-9]* | awk -F: 'BEGIN {IGNORECASE = 1} /reco[v]|erro[r]/{print "printf \x22\x41 fsck has begun on /dev/"$1"\\n\x22 ; screen -dmS fsck"$1" fsck -C -y /dev/"$1}'|sh ;; esac && screen -\ls ; popd ; } # //DESCRIPTION// - Initiates a fsck on all partitions that need it in screen(work in progress, if a partition is valid but just says data you will need to fsck manually)
function rescue_fsck2 () { export PATH='/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/opt/java6/bin:/opt/java6/db/bin:/opt/java6/jre/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/opt/qt/bin' ; mkdir /var/log/fsck ; pushd /dev ; disk=`\ls --color=never | \egrep --colour=never -i 'xv|sd[a-k]'` ; case $disk in xv*) file -s xvd?[0-9]* | awk -F: 'BEGIN {IGNORECASE = 1} /reco[v]|erro[r]/{print "printf \x22\x41 fsck has begun on /dev/"$1" and is outputting to /var/log/fsck/"$1".log\\n\x22 ; fsck -v -y /dev/"$1" >> /var/log/fsck/"$1".log &"}'|sh ;; sd*) file -s sd?[0-9]* | awk -F: 'BEGIN {IGNORECASE = 1} /reco[v]|erro[r]/{print "printf \x22\x41 fsck has begun on /dev/"$1" and is outputting to /var/log/fsck/"$1".log\\n\x22 ; fsck -v -y /dev/"$1" >> /var/log/fsck/"$1".log &"}'|sh ;; esac && sleep 8 ; watch "ps awfux | \grep fsc[k]"  ; popd ;} # //DESCRIPTION// - launches a logged fsck on all partitions that need it, same caveat as above.
function csf_blocks () { printf "Blocked IP\tBlocked Port\n" ; dmesg | \grep -Poi 'SRC=(.*)DPT=[[:digit:]]{1,5}' | \egrep -vi "`ifconfig | \grep inet | \egrep -o '[[:digit:]]{1,3}[.][[:digit:]]{1,3}[.][[:digit:]]{1,3}[.][[:digit:]]{1,3}' | awk '{print "SRC="$0}' | sed -e ":a" -e "$ s/\n/|/gp;N;b a" | head -1`" | awk '{print $SRC}' | sed -e 's/DF//g' -e 's/PROTO=...//g' | awk '{print $1"\t "$9}' | sed -e 's/SRC=//g' -e 's/DPT=//g'| sort -u ; } # //DESCRIPTION// - Gets unique IPs AND ports being blocked.
function search_robot_counter () { pushd /usr/local/apache/domlogs ; for i in $(find -maxdepth 1 -type f | \grep -v log) ; do printf "Search robots for $i : `gawk -F[ 'BEGIN {IGNORECASE =1} /google|bing|yahoo|bing|yandex|baidu/{print $2}' /usr/local/apache/domlogs/$i | cut -d] -f1 | cut -d: -f1,2 | uniq -c | sort -nk 1`\n" ; done ;popd ; } # //DESCRIPTION// - Counts how many search robots hit per day and hour for all domains.

### FIX THIS SOMEONE PLEASE!!! ###

# function auto_mounter () { if [[ $# -lt 1 ]] ; then printf "usage: ${FUNCNAME[0]} <device_name>\n"  ; else for drive in $(find /dev/ -regextype egrep -regex  "[/]dev${1+"$@"}[0-9]*") ; do mount $drive /mnt2 2>/dev/null && if [[ -f /mnt2/etc/fstab ]] ; then FSTAB=$(cat /mnt2/etc/fstab) ; case ${FSTAB} in *UUID*) blkid && grep UUID /mnt2/etc/fstab|awk '{print $1"\t"$2}';for rootfs in `awk '{print $1"\t"$2}' /mnt2/etc/fstab|grep -P '[/]$'` ; do echo $rootfs ; done|sed -e ":a" -e "$ s/\n/ /gp;N;b a" |awk -F= '{print "mount -U "$2" /mnt"}'|head -1|bash -v 2>/dev/null && awk '{print $1"\t"$2}' /mnt2/etc/fstab|grep -vP '[/]$|none|swap'|awk -F= '/^UUID/{print "mount -U "$2}'|sed -e 's@[/]@/mnt/@'|bash -v 2>/dev/null  ;; /dev/${1+"$@"}*) grep "^[/]dev[/]${1+"$@"}" /mnt2/etc/fstab| awk '{print $1"\t"$2}' |grep -P '[/]$'|awk '{print "mount "$1" "$2}'&&grep "^[/]dev[/]${1+"$@"}" /mnt2/etc/fstab| awk '{print $1"\t"$2}' |grep -Pv '[/]$|none|swap'|awk '{print "mount "$1" "$2}' ;; esac  ; else umount $drive 2>/dev/null ; fi ; done ; umount /mnt2 ; fi ; } # REALLY wish this one would work but for some reason it's a piece of shit and doesn't work with the argument.

#####
function auto_mounter_sda () { trap - ERR ; mkdir /mnt2 ; for drive in $(find /dev/ -name "sda[0-9]*") ; do mount $drive /mnt2 2>/dev/null && if [[ -f /mnt2/etc/fstab ]] ; then FSTAB=$(cat /mnt2/etc/fstab) ; case ${FSTAB} in *UUID*) blkid && grep UUID /mnt2/etc/fstab|awk '{print $1"\t"$2}';for rootfs in `awk '{print $1"\t"$2}' /mnt2/etc/fstab|grep -P '[/]$'` ; do echo $rootfs ; done|sed -e ":a" -e "$ s/\n/ /gp;N;b a" |awk -F= '{print "mount -U "$2" /mnt"}'|head -1| sed -e 's@[/] [/]mnt@/mnt@g'|bash -v && awk '{print $1"\t"$2}' /mnt2/etc/fstab|grep -vP '[/]$|none|swap'|awk -F= '/^UUID/{print "mount -U "$2}'|sed -e 's@[/]@/mnt/@' |bash -v ;; /dev/sda*) grep "^[/]dev[/]sda" /mnt2/etc/fstab| awk '{print $1"\t"$2}' |grep -P '[/]$'|awk '{print "mount "$1" "$2}'&&grep "^[/]dev[/]sda" /mnt2/etc/fstab| awk '{print $1"\t"$2}' |grep -Pv '[/]$|none|swap'|awk '{print "mount "$1" "$2}' ;; esac  ; else umount $drive 2>/dev/null ; fi ; done ; umount /mnt2 ; }
# //DESCRIPTION// - Automatically mounts partitions on sda in a chrootable fashion regardless of labels. ( see verbose_functions | grep "^# function auto_mounter" to REALLY help me out )

function auto_mounter_ () { trap - ERR ; mkdir /mnt2 ; for drive in $(find /dev/ -name "[0-9]*") ; do mount $drive /mnt2 2>/dev/null && if [[ -f /mnt2/etc/fstab ]] ; then FSTAB=$(cat /mnt2/etc/fstab) ; case ${FSTAB} in *UUID*) blkid && grep UUID /mnt2/etc/fstab|awk '{print $1"\t"$2}';for rootfs in `awk '{print $1"\t"$2}' /mnt2/etc/fstab|grep -P '[/]$'` ; do echo $rootfs ; done|sed -e ":a" -e "$ s/\n/ /gp;N;b a" |awk -F= '{print "mount -U "$2" /mnt"}'|head -1| sed -e 's@[/] [/]mnt@/mnt@g'|bash -v && awk '{print $1"\t"$2}' /mnt2/etc/fstab|grep -vP '[/]$|none|swap'|awk -F= '/^UUID/{print "mount -U "$2}'|sed -e 's@[/]@/mnt/@' |bash -v ;; /dev/*) grep "^[/]dev[/]" /mnt2/etc/fstab| awk '{print $1"\t"$2}' |grep -P '[/]$'|awk '{print "mount "$1" "$2}'&&grep "^[/]dev[/]" /mnt2/etc/fstab| awk '{print $1"\t"$2}' |grep -Pv '[/]$|none|swap'|awk '{print "mount "$1" "$2}' ;; esac  ; else umount $drive 2>/dev/null ; fi ; done ; umount /mnt2 ; }
# //DESCRIPTION// - Automatically mounts partitions on  in a chrootable fashion regardless of labels. ( see verbose_functions | grep "^# function auto_mounter" to REALLY help me out )


#function cpanel_label_rescue_mount () { printf 'What block device are you trying to get mounted?\n' ; read -e BLOCK ; for i in `\ls /dev/ | \egrep "${BLOCK}[1-9]"` ; do printf "e2label /dev/$i\n"|sh 2>/dev/null| awk '{print "mount /dev/'$i' /mnt"$0}' |sort -k 2 | \grep '\/$' |bash -v ; printf "e2label /dev/$i\n"|sh 2>/dev/null| awk '{print "mount /dev/'$i' /mnt"$0}' |sort -k 2 | \grep -v '\/$' |bash -v ; done ; } 
function cpanel_label_rescue_mount () { printf 'What block device are you trying to get mounted?\n' ; read -e BLOCK ; for i in `\ls /dev/ | \egrep "${BLOCK}[1-9]"` ; do TEST=$(file -s /dev/${BLOCK}2) ; case $TEST in *ext4*) printf "e4label /dev/$i\n"|sh 2>/dev/null| awk '{print "mount /dev/'$i' /mnt"$0}' |sort -k 2 | \grep '\/$' |sed -e 's/old//g' -e 's/OLD//g'|bash -v ; printf "e4label /dev/$i\n"|sh 2>/dev/null| awk '{print "mount /dev/'$i' /mnt"$0}' |sort -k 2 | \grep -v '\/$' | sed -e 's/old//g' -e 's/OLD//g' |bash -v ;; *ext3*) printf "e2label /dev/$i\n"|sh 2>/dev/null| awk '{print "mount /dev/'$i' /mnt"$0}' |sort -k 2 | \grep '\/$' |sed -e 's/old//g' -e 's/OLD//g'|bash -v ; printf "e2label /dev/$i\n"|sh 2>/dev/null| awk '{print "mount /dev/'$i' /mnt"$0}' |sort -k 2 | \grep -v '\/$' |sed -e 's/old//g' -e 's/OLD//g'|bash -v ;; esac done ; } # //DESCRIPTION// - Mounts all partitions that have labels in a chrootable style, unfortunately this needs to be run twice.
function cpanel_label_rescue_mount_alt () { printf 'What block device are you trying to get mounted?\n' ; read -e BLOCK ; for i in `\ls /dev/ | \egrep "${BLOCK}[1-9]"` ; do TEST=$(file -s /dev/${BLOCK}2) ; case $TEST in *ext4*) printf "e2label /dev/$i\n"|sh 2>/dev/null| awk '{print "mount /dev/'$i' /mnt"$0}' |sort -k 2 | \grep '\/$' |sed -e 's/old//g' -e 's/OLD//g'|bash -v ; printf "e2label /dev/$i\n"|sh 2>/dev/null| awk '{print "mount /dev/'$i' /mnt"$0}' |sort -k 2 | \grep -v '\/$' | sed -e 's/old//g' -e 's/OLD//g' |bash -v ;; *ext3*) printf "e2label /dev/$i\n"|sh 2>/dev/null| awk '{print "mount /dev/'$i' /mnt"$0}' |sort -k 2 | \grep '\/$' |sed -e 's/old//g' -e 's/OLD//g'|bash -v ; printf "e2label /dev/$i\n"|sh 2>/dev/null| awk '{print "mount /dev/'$i' /mnt"$0}' |sort -k 2 | \grep -v '\/$' |sed -e 's/old//g' -e 's/OLD//g'|bash -v ;; esac done ; } # //DESCRIPTION// - Mounts all partitions that have labels in a chrootable style, unfortunately this needs to be run twice.  This may be required so use it if nothing gets mounted with the above.
function heartbleed_fixer () { if [[ -f /etc/redhat-release ]] && [[ -f /usr/bin/repoquery ]] && [[ ! $(repoquery --changelog --installed openssl | egrep -i 'heart|2014-0160') ]] ; then yum -y upgrade openssl ; elif [[ -f /etc/redhat-release ]] && [[ -f /usr/bin/repoquery ]] && [[ $(repoquery --changelog --installed openssl | egrep -i 'heart|2014-0160') ]] ; then  printf "This already appears to be patched\n$(stat /usr/lib/libssl.so.*)\n" ; rpm -qv --changelog openssl 2>&1 | egrep -i 'heart|2014-0160' ; elif [[ -f /etc/redhat-release ]] && [[ ! -f /usr/bin/repoquery ]] ; then printf 'Warning! a required dependency was not found (yum-utils) installing in 10 seconds, press  to abort.' && countdown 00:00:05 ; yum -y install yum-utils ; if [[ ! $(repoquery --changelog --installed openssl | egrep -i 'heart|2014-0160') ]] ;then  yum -y upgrade openssl ; fi ; elif [[ -f /etc/redhat-release ]] && [[ -f /bin/rpm ]] ; then printf "RPM found!  Checking openssl version\n" ; if [[ ! $(rpm -qv --changelog openssl 2>&1 | egrep -i 'heart|2014-0160') ]] ; then yum -y upgrade openssl || up2date -uvf openssl ; fi ; elif  [[ $(rpm -qv --changelog openssl 2>&1 | egrep -i 'heart|2014-0160') ]] ; then  printf 'You are already have the most available package from the available repos.\n' ; rpm -qv --changelog openssl 2>&1 | egrep -i 'heart|2014-0160'; elif [[ -f /etc/debian_version ]] ; then echo -e "This was designed for red hat but i'll go ahead and try running an apt-get update ; apt-get upgrade." ; apt-get update ; apt-get upgrade ; fi ; } # //DESCRIPTION// - Checks for heart bleed on server and if unpatched will patch it [Haven't finished debian yet.].
function cpanel_wild_card_ssl_add_subdomain () { printf "What Subdomain (e.g blah.somesite.com)?\n" ; read -e SUBDOMAIN ; printf "What User Owns This Account?\n" ; read -e USER ; printf "What is the primary domain name?\n" ; read -e PRIMARYDOMAIN ; DOCROOT=$(uf $PRIMARYDOMAIN | \grep DocumentRoot | cut -d" " -f6 | sort -u) ; echo "softlayer-awk-foo" | awk '{print "cp /var/cpanel/userdata/nobody/\\*.'$PRIMARYDOMAIN'_SSL /var/cpanel/userdata/'$USER'/'$SUBDOMAIN'_SSL ; sed -e \x22\x32 cdocumentroot: '$DOCROOT'\x22 -i /var/cpanel/userdata/'$USER'/'$SUBDOMAIN'_SSL"}' | bash -v ; cp /usr/local/apache/conf/httpd.conf /usr/local/apache/conf/httpd.conf.`date +%m-%d-%y`.bak ; /scripts/rebuildhttpd.conf ; } # //DESCRIPTION// - https://internal.softlayer.com/Ticket/ticketPreview/5993745 After following this guide: http://forums.cpanel.net/f5/ssl-certs-wildcard-domains-across-different-hosts-169030.html#post701022 lets you install wildcard ssl certs for any subdomain.
function mysql_slow_query_view (){ LFILE=`if [ -f /usr/local/psa/version ] ; then mysql -u admin -p$(cat /etc/psa/.psa.shadow) -e 'show variables' | awk '/slow_query_log_file/{print $2}' ; else mysql -e 'show variables' | awk '/slow_query_log_file/{print $2}' ; fi` ; \grep -Poi 'Query (.*?)[[:digit:]]{1,4}[.]..|timestamp=(.*);' $LFILE |sed -e 's/timestamp=//g' -e 's/;//g' | sed -e 's/^[0-9]........./printf "`date -d @&`\\n"/g' | sed -e 's/Q/printf "&/g' -e 's/[.][0-9][0-9]$/&\\n"/g' |sh  ; } # //DESCRIPTION// - Gets the mysql slowqueries log if it exists and pulls timestamps and how long the query took.
# function cpanel_dom_log_hack_parse () { cd /usr/local/apache/domlogs ; find -maxdepth 1 -type f | \egrep -v 'log|byte' | sed -e ":a" -e "$ s/\n/ /gp;N;b a" | head -1 | xargs \grep -Pi '[.][.]/|[.][.][.][.]/|[.][.]%2F|[.][.][.][.]%2F|%2E%2E%2F|%2E%2E%2E%2E%2F|and%20|or%20|select%20|%27|%22|\"POST|file:///|\?=http://|GET(.*?);(.*?)HTTP.1|\||&&|POST(.*?);(.*?)HTTP.1|wget|curl|fd[/][0-9]|access_log|access.log|error.log|error_log|[0-9][/]environ|%2Fenviron' /usr/local/apache/logs/error_log | sed -e "s/%22/\x22/g" -e "s/%20/\x20/g" -e "s/%3A/\x3A/g" -e 's/%00/\x00/g' -e 's/%0A/\x0A/g' -e 's/%0D/\x0D/g' -e 's/%23/\x23/g' -e 's/%25/\x25/g' -e 's/%27/\x27/g' -e 's/%28/\x28/g' -e 's/%29/\x29/g' -e 's/%2B/\x2B/g' -e 's/%2C/\x2C/g' -e 's/%2F/\x2F/g' -e 's/%3B/\x3B/g' -e 's/%3C/\x3C/g' -e 's/%3D/\x3D/g' -e 's/%3E/\x3E/g' -e 's/%3F/\x3F/g' -e 's/%40/\x40/g' -e 's/%5b/\x5b/g' -e 's/%5B/\x5B/g' -e 's/%5d/\x5d/g' -e 's/%5D/\x5D/g' -e 's/%80/\x80/g' -e 's/%81/\x81/g' -e 's/%82/\x82/g' -e 's/%83/\x83/g' -e 's/%84/\x84/g' -e 's/%86/\x86/g' -e 's/%89/\x89/g' -e 's/%8D/\x8D/g' -e 's/%8E/\x8E/g' -e 's/%90/\x90/g' -e 's/%91/\x91/g' -e 's/%95/\x95/g' -e 's/%98/\x98/g' -e 's/%9a/\x9a/g' -e 's/%9A/\x9A/g' -e 's/%9C/\x9C/g' -e 's/%9D/\x9D/g' -e 's/%9F/\x9F/g' -e 's/%A2/\xA2/g' -e 's/%A3/\xA3/g' -e 's/%A4/\xA4/g' -e 's/%A7/\xA7/g' -e 's/%A9/\xA9/g' -e 's/%AE/\xAE/g' -e 's/%B4/\xB4/g' -e 's/%B5/\xB5/g' -e 's/%BC/\xBC/g' -e 's/%C2/\xC2/g' -e 's/%C3/\xC3/g' -e 's/%E3/\xE3/g' -e 's/%E5/\xE5/g' -e 's/%E6/\xE6/g' -e 's/%E7/\xE7/g' -e 's/%EC/\xEC/g' -e 's/%ED/\xED/g' -e 's/%EF/\xEF/g' -e 's/%E8/\xE8/g' -e 's/%EE/\xEE/g' -e 's/%F8/\xF8/g' -e 's/%E1/\xE1/g' -e 's/%EA/\xEA/g' -e 's/%E0/\xE0/g' -e 's/%F8/\xF8/g' -e 's/%E1/\xE1/g' -e 's/%EA/\xEA/g' -e 's/%E0/\xE0/g' -e 's/%F8/\xF8/g' -e 's/%EB/\xEB/g' -e 's/%FE/\xFE/g' -e 's/%E0/\xE0/g' | less ; } 
# f parse () { (for P in $(pgrep -f  'apache2|httpd|apache|ngin|sw\-.*') ; do lsof -p $P | tail -n +2|grep -v '\bmiem\b' | grep '[0-9]w.*REG' | awk '{print $9}' |sort -u ; done) | while read name ; do grep -PiH '[.][.]/|[.][.][.][.]/|[.][.]%2F|[.][.][.][.]%2F|%2E%2E%2F|%2E%2E%2E%2E%2F|and%20|or%20|select%20|%27|%22|\"POST|file:///|\\?=http://|GET(.*?);(.*?)HTTP.1|\\||&&|POST(.*?);(.*?)HTTP.1|wget|curl|fd[/][0-9]|access_log|access.log|error.log|error_log|[0-9][/]environ|%2Fenviron' $name |perl -e '$|=1;while(<>){if(/./){s/.*"(.*)".*/$0/;s/%([0-9a-f]{2})/pack("H2",$0)/egi;s/\\n/\n/;s/\\t/\t/;s/\\x([0-9a-f]{2})/pack("H2",$0)/egi;print;}}' ;done ; }  
# function apache_malicious_query_log_parse () { (for P in $(pgrep -f  'apache|httpd|nginx|sw\-|whost|cpsrv') ; do lsof -p $P | tail -n +2|grep -v '\bmem\b' | grep '[0-9]w.*REG' | awk '{print $9}' |sort -u ; done) | sort -u|while read name ; do grep -PiH '[.][.]/|[.][.][.][.]/|[.][.]%2F|[.][.][.][.]%2F|%2E%2E%2F|%2E%2E%2E%2E%2F|and%20|or%20|select%20|%27|%22|\"POST|file:///|\\?=http://|GET(.*?);(.*?)HTTP.1|\\||&&|POST(.*?);(.*?)HTTP.1|wget|curl|fd[/][0-9]|\?(.*)access_log|\?(.*)access.log|\?(.*)error.log|\?(.*)error_log|[0-9][/]environ|%2Fenviron' $name |sed -e 's/\%[0-9a-f][0-9a-f]/PRE_REPLACE_FOO&/gi' |sed -e 's/PRE_REPLACE_FOO\%/\\x/g' |perl -e '$|=1;while(<>){if(/./){s/(.*)/$1/;s/\\n/\n/;s/\\t/\t/;s/\\x([0-9a-f]{2})/pack("H2",$1)/egi;print;}}' ;done  | sed -r -e 's@^[/][a-z/0-9_]+*:?@'${LightRed}'&@' -e 's/(([[:digit:]]{1,3}[.]){3}[[:digit:]]{1,3}|client ([[:digit:]]{1,3}[.]){3}[[:digit:]]{1,3})/'${Yellow}'&/g' -e 's/\"(GET|HEAD|POST)/'${Purple}'&/g' -e 's@(\[[[:digit:]]{2}[/][A-Z][[:alpha:]]{2}[/][[:digit:]]{4}\:..\:..\:.. \-....|\[[A-Z][[:alpha:]]{2} [A-Z][[:alpha:]]{2} .. ..\:..\:.. ....)@'${Pink}'&@g' -e 's/\[(error|warn|notice|emerg|crit)\]/'${White}'&/g'  ; }  
# function apache_malicious_query_log_parse () { (for P in $(pgrep -f  'apache|httpd|nginx|sw\-|whost|cpsrv') ; do lsof -p $P | tail -n +2|grep -v '\bmem\b' | grep '[0-9]w.*REG' | awk '{print $9}' |sort -u ; done) | sort -u|while read name ; do grep -PiH '[.][.]/|[.][.][.][.]/|[.][.]%2F|[.][.][.][.]%2F|%2E%2E%2F|%2E%2E%2E%2E%2F|and%20|or%20|select%20|%27|%22|\"POST|file:///|\\?=http://|GET(.*?);(.*?)HTTP.1|\\||&&|POST(.*?);(.*?)HTTP.1|wget|curl|fd[/][0-9]|\?(.*)access_log|\?(.*)access.log|\?(.*)error.log|\?(.*)error_log|[0-9][/]environ|%2Fenviron' $name |sed -e 's/\%[0-9a-f][0-9a-f]/PRE_REPLACE_FOO&/gi' |sed -e 's/PRE_REPLACE_FOO\%/\\x/g' |perl -e '$|=1;while(<>){if(/./){s/(.*)/$1/;s/\\n/\n/;s/\\t/\t/;s/\\x([0-9a-f]{2})/pack("H2",$1)/egi;print;}}' ;done  | sed -r -e 's@^[/][a-z/0-9_]+*:?@'${LightRed}'&@' -e 's/(([[:digit:]]{1,3}[.]){3}[[:digit:]]{1,3}|client ([[:digit:]]{1,3}[.]){3}[[:digit:]]{1,3})/'${Yellow}'&/g' -e 's/\"(GET|HEAD|POST)/'${Purple}'&/g' -e 's@(\[[[:digit:]]{2}[/][A-Z][[:alpha:]]{2}[/][[:digit:]]{4}\:..\:..\:.. \-....|\[[A-Z][[:alpha:]]{2} [A-Z][[:alpha:]]{2} .. ..\:..\:.. ....)@'${Pink}'&@g' -e 's/\[(error|warn|notice|emerg|crit)\]/'${White}'&/g'  ; }  # //DESCRIPTION// - Uses lsof to determine various httpd's log locations then parses them out for sql injection, file inclusion and command injection (GET and POST only)


function apache_malicious_query_log_parse () { (for P in $(pgrep -f  'apache|httpd|nginx|sw\-|whost|cpsrv') ; do lsof -p $P | tail -n +2|grep -v '\bmem\b' | grep '[0-9]w.*REG' | awk '{print $9}' |sort -u ; done) | sort -u|while read name ; do grep -PiH '[.]pl|cgi-bin|[.]cgi|[.][.]/|[.][.][.][.]/|[.][.]%2F|[.][.][.][.]%2F|%2E%2E%2F|%2E%2E%2E%2E%2F|and%20|or%20|select%20|%27|%22|\"POST|file:///|\\?=http://|GET(.*?);(.*?)HTTP.1|\||&&|POST(.*?);(.*?)HTTP.1|wget|curl|fd[/][0-9]|\?(.*)access_log|\?(.*)access.log|\?(.*)error.log|\?(.*)error_log|[0-9][/]environ|%2Fenviron' $name 2>/dev/null|sed -e 's/\%[0-9a-f][0-9a-f]/PRE_REPLACE_FOO&/gi' |sed -e 's/PRE_REPLACE_FOO\%/\\x/g' |perl -e '$|=1;while(<>){if(/./){s/(.*)/$1/;s/\\n/\n/;s/\\t/\t/;s/\\x([0-9a-f]{2})/pack("H2",$1)/egi;print;}}' ;done  | sed -r -e 's@^[/][a-z/0-9_]+*:?@'${LightRed}'&@' -e 's/(([[:digit:]]{1,3}[.]){3}[[:digit:]]{1,3}|client ([[:digit:]]{1,3}[.]){3}[[:digit:]]{1,3})/'${Yellow}'&/g' -e 's/\"(GET|HEAD|POST)/'${Purple}'&/g' -e 's@(\[[[:digit:]]{2}[/][A-Z][[:alpha:]]{2}[/][[:digit:]]{4}\:..\:..\:.. \-....|\[[A-Z][[:alpha:]]{2} [A-Z][[:alpha:]]{2} .. ..\:..\:.. ....)@'${Pink}'&@g' -e 's/\[(error|warn|notice|emerg|crit)\]/'${White}'&/g'  ; }


#function install_and_run_rkhunter () { tar xzf <(curl -L "http://downloads.sourceforge.net/project/unhide/unhide-20130526.tgz?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Funhide%2Ffiles%2F&ts=1369646010&use_mirror=superb-dca3") ; cd unhide-20130526 ; \grep gcc README.txt |bash -v ; find -type f -perm 5 -exec cp -v {} /usr/bin/ \; && ln -s /usr/bin/unhide-linux /usr/bin/unhide-linux26 ; ln -s /usr/bin/unhide_rb /usr/bin/unhide.rb ; cd ../ ; rm -rf unhide-20130526/ ; tar xzf <(curl -L "http://downloads.sourceforge.net/project/rkhunter/rkhunter/1.4.0/rkhunter-1.4.0.tar.gz?r=&ts=1353757284&use_mirror=iweb") ; cd rkhunter-1.4.0/ ; ./installer.sh --install ; cd .. ; rm -rf rkhunter-1.4.0/ ; sed -e '971 cUNHIDE_TESTS="sys proc"' -i /etc/rkhunter.conf ; sed -e 's/DISABLE_TESTS/#&/g' -e 's/PHALANX2_DIRTEST=0/PHALANX_DIRTEST=1/g' -i /etc/rkhunter.conf ; rkhunter --update ; rkhunter --sk -c ; }
function fetch_and_install_rkhunter_mod () { tar xzf <(curl -L "http://downloads.sourceforge.net/project/unhide/unhide-20130526.tgz?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Funhide%2Ffiles%2F&ts=1369646010&use_mirror=superb-dca3") ; cd unhide-20130526 ; \grep gcc README.txt |bash -v || yum -y install glibc-devel glibc-static && \grep gcc README.txt |bash -v ; find -type f -perm 755 -exec cp -v {} /usr/bin/ \; && ln -s /usr/bin/unhide-linux /usr/bin/unhide ; ln -s /usr/bin/unhide-linux /usr/bin/unhide-linux26 ; ln -s /usr/bin/unhide_rb /usr/bin/unhide.rb ; cd ../ ; rm -rf unhide-20130526/ ; tar xjf <(curl -s http://dvgevers.home.xs4all.nl/skdet/skdet-1.0.tar.bz2) ; pushd skdet* ; patch -p1 < <(curl -sL http://dvgevers.home.xs4all.nl/skdet/skdet-fix-includes.diff) ; make clean ; make ; cp -v skdet /usr/bin/ ; tar xzf <(curl -L "http://rkhunter.cvs.sourceforge.net/viewvc/rkhunter/?view=tar") ; pushd rkhunter/rkhunter ; ./installer.sh --install ; popd ; rm -rf rkhunter/ ; sed -e '971 cUNHIDE_TESTS="sys proc"' -i /etc/rkhunter.conf ; sed -e 's/DISABLE_TESTS/#&/g' -e 's/.*PHALANX2_DIRTEST=0/PHALANX2_DIRTEST=1/g' -e 's/UNHIDE_TESTS=.*/UNHIDE_TESTS="reverse procall sys"/g' -e 's/#DISABLE_UNHIDE=.*/DISABLE_UNHIDE=2/g' -e 's/#UNHIDETCP_OPTS=""/UNHIDETCP_OPTS="-v -f -l"/g'  -e 's@#EMPTY_LOGFILES=""@EMPTY_LOGFILES="/var/log/secure /var/log/auth.log /var/log/wtmp /var/run/utmp /var/log/lastlog"@g' -i /etc/rkhunter.conf ; if [[ -f /etc/redhat-release ]] ; then sed -e 's/#PKGMGR=NONE/PKGMGR=RPM/g' -i /etc/rkhunter.conf ; elif [[ -f /etc/debian_version ]] ; then sed -e 's/#PKGMGR=NONE/PKGMGR=DPKG/g' -i /etc/rkhunter.conf ; fi ; echo -e "${Purple}install complete, would you like to run rkhunter now?\n" ; read -e TORUN ; case ${TORUN} in y*) rkhunter --update ; rkhunter --sk -c |tee /var/log/colored_rkhunter_output ;; n*) printf "Exiting on user request.\n" && return 0 ;; esac ; } # //DESCRIPTION// - Compiles and installs unhide, fetches most recent rkhunter and installs and configures that with all tests and additional unhide tests.
function spam_assassin_req_scores () { pushd /home ; find -maxdepth 3 -name 'user_prefs' | awk -F/ '{print "printf \x22Required score for "$2" : `\grep \x27^required_score\x27 "$0"`\\n\x22"}'|sh  ;popd ; } # //DESCRIPTION// - Checks each user's spam assassin required scores on cpanel boxes.
function strace_fast_running_php_proc () { USER=`pwd | cut -d/ -f3` ; printf 'What IP are you connecting from?\n' ; read -e IP ; while true ; do if [ ! -f $(pwd)/strace-output ]; then ps awfuxe | \grep $IP | \grep -v bash | awk '{print "sudo -u '$USER' strace -s 4096 -t -v -o $(pwd)/strace-output -p "$2}'|sh 2>/dev/null ; fi ; done ; } # //DESCRIPTION// - Strace php scripts that you browse to on cpanel boxes
function audit_log_timestamp_convert () { cat /var/log/audit/* | sed -e 's/\x28.*:/{&/1' |sed -e 's/{\x28/\x28`date -d @/1' | sed -e 's/..[0-9]:/&::/1' | sed -e 's/:::/`:/1' | awk '{print "printf \x22"$0"\\n\x22"}'|sh | sed -e ":a" -e "$ s/\n/\n\n\n/gp;N;b a" | less ; } # //DESCRIPTION// - Cats all the audit logs and converts the unix timestamps to readable dates/times.
function chksrvd_service_parser () { if [[ $# -lt 1 ]] || [[ $1 = "-h" ]] || [[ $1 = "--help" ]] ; then echo -e "Usage: ${FUNCNAME[0]} <service name>\nList of availble services:\n$(find /var/run/chkservd/ -maxdepth 1 -type f -not -name 'interval' | sed -e 's@[/].*[/]@@g')" && return 1 ; else export SERV=$1 ; awk '{for (i=1;i<=NF;i=i+1) if ($i~/Restarting|nable/) print "'$Cyan'"$1"'$Red'",$2"'$White'",$3,"'$Purple'"$(i-1),$i"'$White'",$(i+1)}' /var/log/chkservd.log | \grep $SERV ; fi; } # //DESCRIPTION// - Checks chksrvd for various service failures. 
function dovecot_pop_brutes () { printf ' Count\tUser\t\tIP\n' ; awk -F= '/rip/{print $2"\t"$4}' /var/log/maillog | cut -d" " -f 1,2 | sed -e 's/[<,>]//g' -e 's/method//g' | sort | uniq -c | sort -nk 1 | tail -20  ; } # //DESCRIPTION// - Checks cpanel for dovecot brutes (can be buggy).
function panel_strace () { printf 'what port is the panel listening on(e.g. :2082\n' ; read -e PORT ; while true ; do if [ ! -f /root/panel-trace ] ; then strace -s 4096 -t -o /root/panel-trace -p $(netstat -tlnap | \grep $PORT | awk '/ESTA/{print $7}' | cut -d/ -f1 | head -1) 2>/dev/null ; fi ; done ; } # //DESCRIPTION// - Straces a panel based off of the port (usefull when cpanel./plesk stuff is broken if you don't get disconnected for stracing plesk :p)
function single_wordpress_enumeration () { echo; db=`\grep -i db_name wp-config.php |awk -F"'" '{print $4}'` user=`\grep -i db_user wp-config.php | awk -F"'" '{print $4}'` pass=`\grep -i db_pass wp-config.php |awk -F"'" '{print $4}'` pre=`\grep -i table_prefix wp-config.php | awk -F"'" '{print $2}'` prefix=${pre}options; mysql -u $user -p$pass -e "use $db ; select * from $prefix where option_name = 'template' OR option_name='stylesheet' OR option_name='siteurl' OR option_name='home' OR option_name='permalink_structure'"; echo; echo "Database name: $db"; echo "Database username: $user"; echo "Database password: $pass"; echo "Database prefix: $pre"; echo; echo "Themes:"; find wp-content/themes -maxdepth 1 -type d |awk -F"/" '{print $3}'; echo; echo "Enabled Plugins:"; echo; mysql -u $user -p$pass -e "use $db; SELECT option_value FROM `\grep table_prefix wp-config.php |gawk '{ print $3 }'|sed -e s/\'//g -e s/\;/options/` WHERE option_name = 'active_plugins';"|\grep \" | sed 's/:"/\n/g'|gawk -F"\"" '{ print $1 }'|sed '1d'; echo; } # //DESCRIPTION// - Pulls wordpress database info such as plugins username and theme.

##### TEST #####
function global_wordpress_enumeration () { for i in `find /home /var/www/vhosts -maxdepth 5 -type f -name 'wp-config.php' | \grep -Poi '[/](.*?)(?!.*[/])'` ; do pushd $i ; if [ -f $(pwd)/wp-config.php ] ; then echo; db=`\grep -i db_name wp-config.php |awk -F"'" '{print $4}'` user=`\grep -i db_user wp-config.php | awk -F"'" '{print $4}'` pass=`\grep -i db_pass wp-config.php |awk -F"'" '{print $4}'` pre=`\grep -i table_prefix wp-config.php | awk -F"'" '{print $2}'` prefix=${pre}options; mysql -u $user -p$pass -e "use $db ; select * from $prefix where option_name = 'template' OR option_name='stylesheet' OR option_name='siteurl' OR option_name='home' OR option_name='permalink_structure'" >> /dev/stdout 2>/dev/null ; echo; echo "Database name: $db" >> /dev/stdout 2>/dev/null ; echo "Database username: $user" >> /dev/stdout 2>/dev/null ; echo "Database password: $pass" >> /dev/stdout 2>/dev/null; echo "Database prefix: $pre" >> /dev/stdout 2>/dev/null ; echo; echo "Themes:" >> /dev/stdout 2>/dev/null ; find wp-content/themes -maxdepth 1 -type d |awk -F"/" '{print $3}' >> /dev/stdout 2>/dev/null ; echo; echo "Enabled Plugins:" >> /dev/stdout 2>/dev/null ; echo; mysql -u $user -p$pass -e "use $db; SELECT option_value FROM `\grep table_prefix wp-config.php |gawk '{ print $3 }'|sed -e s/\'//g -e s/\;/options/` WHERE option_name = 'active_plugins';"|\grep \" | sed 's/:"/\n/g'|gawk -F"\"" '{ print $1 }'|sed '1d' >> /dev/stdout 2>/dev/null ; echo; fi ; done 2>/dev/null | less ;popd ; } # //DESCRIPTION// - Checks all domain's wordpresses on both cpanel and plesk servers with a depth of up to 5.
###################
#function cpanel_wordpress_enumeration_allusers_pubhtml_only () { for i in `find /home -maxdepth 1 -type d` ; do cd $i/public_html ; if [ -f $(pwd)/wp-config.php ] ; then echo; db=`\grep -i db_name wp-config.php |awk -F"'" '{print $4}'` user=`\grep -i db_user wp-config.php | awk -F"'" '{print $4}'` pass=`\grep -i db_pass wp-config.php |awk -F"'" '{print $4}'` pre=`\grep -i table_prefix wp-config.php | awk -F"'" '{print $2}'` prefix=${pre}options; mysql -u $user -p$pass -e "use $db ; select * from $prefix where option_name = 'template' OR option_name='stylesheet' OR option_name='siteurl' OR option_name='home' OR option_name='permalink_structure'" >> /dev/stdout 2>/dev/null ; echo; echo "Database name: $db" >> /dev/stdout 2>/dev/null ; echo "Database username: $user" >> /dev/stdout 2>/dev/null ; echo "Database password: $pass" >> /dev/stdout 2>/dev/null; echo "Database prefix: $pre" >> /dev/stdout 2>/dev/null ; echo; echo "Themes:" >> /dev/stdout 2>/dev/null ; find wp-content/themes -maxdepth 1 -type d |awk -F"/" '{print $3}' >> /dev/stdout 2>/dev/null ; echo; echo "Enabled Plugins:" >> /dev/stdout 2>/dev/null ; echo; mysql -u $user -p$pass -e "use $db; SELECT option_value FROM `\grep table_prefix wp-config.php |gawk '{ print $3 }'|sed -e s/\'//g -e s/\;/options/` WHERE option_name = 'active_plugins';"|\grep \" | sed 's/:"/\n/g'|gawk -F"\"" '{ print $1 }'|sed '1d' >> /dev/stdout 2>/dev/null ; echo; fi ; done 2>/dev/null | less  ; }
#function plesk_wordpress_enumeration_allusers_htdocs_only () { for i in `find /var/www/vhosts -maxdepth 1 -type d` ; do cd $i/htdocs ; if [ -f $(pwd)/wp-config.php ] ; then echo; db=`\grep -i db_name wp-config.php |awk -F"'" '{print $4}'` user=`\grep -i db_user wp-config.php | awk -F"'" '{print $4}'` pass=`\grep -i db_pass wp-config.php |awk -F"'" '{print $4}'` pre=`\grep -i table_prefix wp-config.php | awk -F"'" '{print $2}'` prefix=${pre}options; mysql -u $user -p$pass -e "use $db ; select * from $prefix where option_name = 'template' OR option_name='stylesheet' OR option_name='siteurl' OR option_name='home' OR option_name='permalink_structure'" >> /dev/stdout 2>/dev/null ; echo; echo "Database name: $db" >> /dev/stdout 2>/dev/null ; echo "Database username: $user" >> /dev/stdout 2>/dev/null ; echo "Database password: $pass" >> /dev/stdout 2>/dev/null; echo "Database prefix: $pre" >> /dev/stdout 2>/dev/null ; echo; echo "Themes:" >> /dev/stdout 2>/dev/null ; find wp-content/themes -maxdepth 1 -type d |awk -F"/" '{print $3}' >> /dev/stdout 2>/dev/null ; echo; echo "Enabled Plugins:" >> /dev/stdout 2>/dev/null ; echo; mysql -u $user -p$pass -e "use $db; SELECT option_value FROM `\grep table_prefix wp-config.php |gawk '{ print $3 }'|sed -e s/\'//g -e s/\;/options/` WHERE option_name = 'active_plugins';"|\grep \" | sed 's/:"/\n/g'|gawk -F"\"" '{ print $1 }'|sed '1d' >> /dev/stdout 2>/dev/null ; echo; fi ; done 2>/dev/null | less ; }
function inode_usage_cwd () { echo "Detailed Inode usage for: $(pwd)" ; for d in `find -xdev -maxdepth 1 -type d |cut -d\/ -f2 |\grep -xv . |sort`; do c=$(find $d -xdev|wc -l) ; printf "$c\t\t- $d\n" ; done ; printf "Total: \t\t$(find $(pwd) -xdev| wc -l)\n"  ; } # //DESCRIPTION// - See name of function--- gets how many inodes recursively in current working directory.
# function cpanel_oom_killer_uid_domain_grep () { grep  --file=<(grep --file=<(dmesg | pcregrep -M  '(.*)alloc(.*)\n(.*)UID(.*)|Killed process(.*?)[)]' | grep -Poi 'UID(.*?),' | cut  -d" " -f2 | tr ',' ' ' | sort | uniq -c | sort -nk 1 | awk '{if ($1  >= 2) print "x:"$2}') /etc/passwd | awk -F: '{print $1}')  /etc/userdomains ; }  



function cpanel_oom_killer_uid_domain_grep () { export SQ=$(printf '\x27') ;export B=$(printf '\x21') ;bash -cv "(dmesg | sed -e ${SQ}/pid.*oom/,/Out.of./${B}d${SQ} | head -1 ; dmesg | sed -e ${SQ}/pid.*oom/,/Out.of./${B}d${SQ} | tail -n +1|tr -d ${SQ}[]${SQ} |tail -n +2| sed -e ${SQ}/Out of/d${SQ} | sort -nk 5,5 ; dmesg | sed -e ${SQ}/pid.*oom/,/ut.of./${B}d${SQ} | tail -1) | tail -30" ; dmesg | sed -e '/pid.*oom/,/Out.of./!d' | tail -n +1|tr -d '[]' |tail -n +2| sed -e '/Out of/d' | awk '{print $2}' | sort | uniq -c | sort -nk 1 2>&1 | while read count uid ; do if [[ ${count} -gt 5 ]] ; then export USERN="$(grep "\bx:${uid}:\b" /etc/passwd | awk -F: '{print $1}')" ; echo "The user ${USERN} had ${count} processes at the time of the oom error." ;fi ; done ; }

# //DESCRIPTION// - Checks dmesg for recent out of memory killer events, gets the uid of the process, greps that out of /etc/passwd then greps the username out of /etc/userdomains.
function var_cpanel_userdata_vs_httpd_conf () { for i in `awk -F: '/[.]/{print $1}' /etc/userdomains` ; do export DOM=`awk '/'$i'/{print $2}' /etc/userdomains` ; printf "$i' s current IP is `uf $i | \grep '\<VirtualHost' | \egrep ':80|:443' | \grep -Poi '[[:digit:]]{1,3}[.][[:digit:]]{1,3}[.][[:digit:]]{1,3}[.][[:digit:]]{1,3}' | head -1 `\nCurrently /var/cpanel/userdata/$DOM/$i is reporting that the IP is: `\grep 'ip:' /var/cpanel/userdata/$DOM/$i`\n" ; done ; } # //DESCRIPTION// - Checks for IP discrepencies between /var/cpanel/userdata and the httpd.conf
#function strace_fast_running_php_process_cpanel () { USER=`pwd | cut -d/ -f3` ; SHELL_PID=`echo $$` ; if [ `file -s /proc/$SHELL_PID/cwd | \grep public_html | wc -l` = 0 ] ; then printf 'Failed to detect public_html in /proc/$SHELL_PID/cwd , make sure you are in this users documentroot and try again\n' ; else printf 'What IP will you be navigating to the script in the browser from?\n' ; read -e IP ; while true ; do if [ ! -f $(pwd)/strace-output ]; then ps awfuxe | \grep $IP | \grep -v bash | awk '{print "sudo -u '$USER' strace -s 4096 -t -v -o $(pwd)/strace-output -p "$2}'|sh 2>/dev/null ; fi ; done ; }
function syssnap_process_tree_grep () { head -n `\grep -n 'FIELD SEPERATING PROCESSES FROM THE REST' $1 | cut -d: -f1` $1 | tail -n +3 | sed -e '/FIELD SEPERATING PROCESSES FROM THE REST/d' ; } # //DESCRIPTION// - Pulls only the processes from a sys snap log (must be using my modified one from this script).
function syssnap_file_load_grep () { \egrep '[[:digit:]]{1,3}[.][[:digit:]]{2} [[:digit:]]{1,3}[.][[:digit:]]{2} [[:digit:]]{1,3}[.][[:digit:]]{2}' /root/system-snapshot/* | \egrep -v '[[:digit:]]{1,3}[.][[:digit:]]{1,3}[.][[:digit:]]{1,3}[.][[:digit:]]{1,3}' | grep '[0-9][/][0-9]' |grep -Pw '\b[[:digit:]]{1,5}[.][[:digit:]]{1,2}\b' ; } # //DESCRIPTION// - greps for load averages 

function cpanel_sys_snap () { nohup perl <(printf '\x23\x21\x2f\x75\x73\x72\x2f\x62\x69\x6e\x2f\x70\x65\x72\x6c\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x23\x20\x53\x79\x73\x53\x6e\x61\x70\x20\x69\x73\x20\x61\x20\x76\x65\x72\x79\x20\x73\x69\x6d\x70\x6c\x65\x20\x73\x79\x73\x74\x65\x6d\x20\x6d\x6f\x6e\x69\x74\x6f\x72\x69\x6e\x67\x20\x73\x63\x72\x69\x70\x74\x2e\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x23\x20\x20\x20\x20\x43\x6f\x70\x79\x72\x69\x67\x68\x74\x20\x28\x43\x29\x20\x32\x30\x31\x32\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x54\x68\x69\x73\x20\x70\x72\x6f\x67\x72\x61\x6d\x20\x69\x73\x20\x66\x72\x65\x65\x20\x73\x6f\x66\x74\x77\x61\x72\x65\x3b\x20\x79\x6f\x75\x20\x63\x61\x6e\x20\x72\x65\x64\x69\x73\x74\x72\x69\x62\x75\x74\x65\x20\x69\x74\x20\x61\x6e\x64\x2f\x6f\x72\x20\x6d\x6f\x64\x69\x66\x79\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x69\x74\x20\x75\x6e\x64\x65\x72\x20\x74\x68\x65\x20\x74\x65\x72\x6d\x73\x20\x6f\x66\x20\x74\x68\x65\x20\x47\x4e\x55\x20\x47\x65\x6e\x65\x72\x61\x6c\x20\x50\x75\x62\x6c\x69\x63\x20\x4c\x69\x63\x65\x6e\x73\x65\x20\x61\x73\x20\x70\x75\x62\x6c\x69\x73\x68\x65\x64\x20\x62\x79\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x74\x68\x65\x20\x46\x72\x65\x65\x20\x53\x6f\x66\x74\x77\x61\x72\x65\x20\x46\x6f\x75\x6e\x64\x61\x74\x69\x6f\x6e\x3b\x20\x65\x69\x74\x68\x65\x72\x20\x76\x65\x72\x73\x69\x6f\x6e\x20\x32\x20\x6f\x66\x20\x74\x68\x65\x20\x4c\x69\x63\x65\x6e\x73\x65\x2c\x20\x6f\x72\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x28\x61\x74\x20\x79\x6f\x75\x72\x20\x6f\x70\x74\x69\x6f\x6e\x29\x20\x61\x6e\x79\x20\x6c\x61\x74\x65\x72\x20\x76\x65\x72\x73\x69\x6f\x6e\x2e\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x54\x68\x69\x73\x20\x70\x72\x6f\x67\x72\x61\x6d\x20\x69\x73\x20\x64\x69\x73\x74\x72\x69\x62\x75\x74\x65\x64\x20\x69\x6e\x20\x74\x68\x65\x20\x68\x6f\x70\x65\x20\x74\x68\x61\x74\x20\x69\x74\x20\x77\x69\x6c\x6c\x20\x62\x65\x20\x75\x73\x65\x66\x75\x6c\x2c\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x62\x75\x74\x20\x57\x49\x54\x48\x4f\x55\x54\x20\x41\x4e\x59\x20\x57\x41\x52\x52\x41\x4e\x54\x59\x3b\x20\x77\x69\x74\x68\x6f\x75\x74\x20\x65\x76\x65\x6e\x20\x74\x68\x65\x20\x69\x6d\x70\x6c\x69\x65\x64\x20\x77\x61\x72\x72\x61\x6e\x74\x79\x20\x6f\x66\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x4d\x45\x52\x43\x48\x41\x4e\x54\x41\x42\x49\x4c\x49\x54\x59\x20\x6f\x72\x20\x46\x49\x54\x4e\x45\x53\x53\x20\x46\x4f\x52\x20\x41\x20\x50\x41\x52\x54\x49\x43\x55\x4c\x41\x52\x20\x50\x55\x52\x50\x4f\x53\x45\x2e\x20\x20\x53\x65\x65\x20\x74\x68\x65\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x47\x4e\x55\x20\x47\x65\x6e\x65\x72\x61\x6c\x20\x50\x75\x62\x6c\x69\x63\x20\x4c\x69\x63\x65\x6e\x73\x65\x20\x66\x6f\x72\x20\x6d\x6f\x72\x65\x20\x64\x65\x74\x61\x69\x6c\x73\x2e\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x20\x20\x20\x59\x6f\x75\x20\x73\x68\x6f\x75\x6c\x64\x20\x68\x61\x76\x65\x20\x72\x65\x63\x65\x69\x76\x65\x64\x20\x61\x20\x63\x6f\x70\x79\x20\x6f\x66\x20\x74\x68\x65\x20\x47\x4e\x55\x20\x47\x65\x6e\x65\x72\x61\x6c\x20\x50\x75\x62\x6c\x69\x63\x20\x4c\x69\x63\x65\x6e\x73\x65\x20\x61\x6c\x6f\x6e\x67\x20\x23\x0a\x23\x20\x20\x20\x20\x77\x69\x74\x68\x20\x74\x68\x69\x73\x20\x70\x72\x6f\x67\x72\x61\x6d\x3b\x20\x69\x66\x20\x6e\x6f\x74\x2c\x20\x77\x72\x69\x74\x65\x20\x74\x6f\x20\x74\x68\x65\x20\x46\x72\x65\x65\x20\x53\x6f\x66\x74\x77\x61\x72\x65\x20\x46\x6f\x75\x6e\x64\x61\x74\x69\x6f\x6e\x2c\x20\x49\x6e\x63\x2e\x2c\x20\x23\x0a\x23\x20\x20\x20\x20\x35\x31\x20\x46\x72\x61\x6e\x6b\x6c\x69\x6e\x20\x53\x74\x72\x65\x65\x74\x2c\x20\x46\x69\x66\x74\x68\x20\x46\x6c\x6f\x6f\x72\x2c\x20\x42\x6f\x73\x74\x6f\x6e\x2c\x20\x4d\x41\x20\x30\x32\x31\x31\x30\x2d\x31\x33\x30\x31\x20\x55\x53\x41\x2e\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x23\x20\x41\x75\x74\x68\x6f\x72\x3a\x20\x50\x61\x75\x6c\x20\x54\x72\x6f\x73\x74\x20\x23\x0a\x23\x20\x56\x65\x72\x73\x69\x6f\x6e\x3a\x20\x30\x2e\x33\x2e\x33\x20\x20\x20\x20\x20\x23\x0a\x23\x20\x32\x30\x31\x33\x2d\x30\x37\x2d\x33\x31\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x0a\x75\x73\x65\x20\x77\x61\x72\x6e\x69\x6e\x67\x73\x3b\x0a\x75\x73\x65\x20\x73\x74\x72\x69\x63\x74\x3b\x0a\x75\x73\x65\x20\x46\x69\x6c\x65\x3a\x3a\x50\x61\x74\x68\x20\x71\x77\x28\x72\x65\x6d\x6f\x76\x65\x5f\x74\x72\x65\x65\x29\x3b\x0a\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x23\x20\x53\x65\x74\x20\x4f\x70\x74\x69\x6f\x6e\x73\x20\x23\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x0a\x23\x20\x53\x65\x74\x20\x74\x68\x65\x20\x74\x69\x6d\x65\x20\x62\x65\x74\x77\x65\x65\x6e\x20\x73\x6e\x61\x70\x73\x68\x6f\x74\x73\x20\x69\x6e\x20\x73\x65\x63\x6f\x6e\x64\x73\x0a\x6d\x79\x20\x24\x73\x6c\x65\x65\x70\x5f\x74\x69\x6d\x65\x20\x3d\x20\x33\x30\x30\x3b\x0a\x0a\x23\x20\x54\x68\x65\x20\x62\x61\x73\x65\x20\x64\x69\x72\x65\x63\x74\x6f\x72\x79\x20\x75\x6e\x64\x65\x72\x20\x77\x68\x69\x63\x68\x20\x74\x6f\x20\x62\x75\x69\x6c\x64\x20\x74\x68\x65\x20\x64\x69\x72\x65\x63\x74\x6f\x72\x79\x20\x77\x68\x65\x72\x65\x20\x73\x6e\x61\x70\x73\x68\x6f\x74\x73\x20\x61\x72\x65\x20\x73\x74\x6f\x72\x65\x64\x2e\x0a\x6d\x79\x20\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x20\x3d\x20\x27\x2f\x72\x6f\x6f\x74\x27\x3b\x0a\x0a\x23\x20\x53\x6f\x6d\x65\x74\x69\x6d\x65\x73\x20\x79\x6f\x75\x20\x77\x6f\x6e\x27\x74\x20\x68\x61\x76\x65\x20\x6d\x79\x73\x71\x6c\x20\x61\x6e\x64\x2f\x6f\x72\x20\x79\x6f\x75\x20\x77\x6f\x6e\x27\x74\x20\x68\x61\x76\x65\x20\x74\x68\x65\x20\x72\x6f\x6f\x74\x20\x70\x61\x73\x73\x77\x6f\x72\x64\x20\x74\x6f\x20\x70\x75\x74\x20\x69\x6e\x20\x61\x20\x2e\x6d\x79\x2e\x63\x6e\x66\x20\x66\x69\x6c\x65\x0a\x23\x20\x69\x66\x20\x74\x68\x61\x74\x27\x73\x20\x74\x68\x65\x20\x63\x61\x73\x65\x2c\x20\x73\x65\x74\x20\x74\x68\x69\x73\x20\x74\x6f\x20\x30\x0a\x6d\x79\x20\x24\x6d\x79\x73\x71\x6c\x20\x3d\x20\x31\x3b\x0a\x0a\x23\x20\x49\x66\x20\x74\x68\x65\x20\x73\x65\x72\x76\x65\x72\x20\x68\x61\x73\x20\x6c\x69\x67\x68\x74\x74\x70\x64\x20\x6f\x72\x20\x73\x6f\x6d\x65\x20\x6f\x74\x68\x65\x72\x20\x77\x65\x62\x73\x65\x72\x76\x65\x72\x2c\x20\x73\x65\x74\x20\x74\x68\x69\x73\x20\x74\x6f\x20\x30\x0a\x23\x20\x63\x50\x61\x6e\x65\x6c\x20\x69\x73\x20\x61\x75\x74\x6f\x64\x65\x74\x65\x63\x74\x65\x64\x20\x6c\x61\x74\x65\x72\x2c\x20\x73\x6f\x20\x74\x68\x69\x73\x20\x73\x65\x74\x74\x69\x6e\x67\x20\x69\x73\x20\x6e\x6f\x74\x20\x75\x73\x65\x64\x20\x69\x66\x20\x72\x75\x6e\x6e\x69\x6e\x67\x20\x63\x50\x61\x6e\x65\x6c\x2e\x0a\x6d\x79\x20\x24\x61\x70\x61\x63\x68\x65\x20\x3d\x20\x31\x3b\x0a\x0a\x23\x20\x49\x66\x20\x79\x6f\x75\x20\x77\x61\x6e\x74\x20\x65\x78\x74\x65\x6e\x64\x65\x64\x20\x64\x61\x74\x61\x2c\x20\x73\x65\x74\x20\x74\x68\x69\x73\x20\x74\x6f\x20\x31\x0a\x6d\x79\x20\x24\x6d\x61\x78\x5f\x64\x61\x74\x61\x20\x3d\x20\x30\x3b\x0a\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x23\x20\x49\x66\x20\x79\x6f\x75\x20\x64\x6f\x6e\x27\x74\x20\x6b\x6e\x6f\x77\x20\x77\x68\x61\x74\x20\x79\x6f\x75\x72\x20\x64\x6f\x69\x6e\x67\x2c\x20\x64\x6f\x6e\x27\x74\x20\x63\x68\x61\x6e\x67\x65\x20\x61\x6e\x79\x74\x68\x69\x6e\x67\x20\x62\x65\x6c\x6f\x77\x20\x74\x68\x69\x73\x20\x6c\x69\x6e\x65\x20\x23\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x23\x20\x53\x65\x74\x20\x55\x70\x20\x23\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x0a\x23\x20\x47\x65\x74\x20\x74\x68\x65\x20\x64\x61\x74\x65\x2c\x20\x68\x6f\x75\x72\x2c\x20\x61\x6e\x64\x20\x6d\x69\x6e\x20\x66\x6f\x72\x20\x76\x61\x72\x69\x6f\x75\x73\x20\x74\x61\x73\x6b\x73\x0a\x6d\x79\x20\x28\x20\x24\x73\x65\x63\x2c\x20\x24\x6d\x69\x6e\x2c\x20\x24\x68\x6f\x75\x72\x2c\x20\x24\x6d\x64\x61\x79\x2c\x20\x24\x6d\x6f\x6e\x2c\x20\x24\x79\x65\x61\x72\x2c\x20\x24\x77\x64\x61\x79\x2c\x20\x24\x79\x64\x61\x79\x2c\x20\x24\x69\x73\x64\x73\x74\x20\x29\x20\x3d\x20\x6c\x6f\x63\x61\x6c\x74\x69\x6d\x65\x28\x74\x69\x6d\x65\x29\x3b\x0a\x24\x79\x65\x61\x72\x20\x2b\x3d\x20\x31\x39\x30\x30\x3b\x20\x20\x20\x20\x23\x20\x46\x6f\x72\x6d\x61\x74\x20\x79\x65\x61\x72\x20\x63\x6f\x72\x72\x65\x63\x74\x6c\x79\x0a\x24\x6d\x6f\x6e\x2b\x2b\x3b\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x46\x6f\x72\x6d\x61\x74\x20\x6d\x6f\x6e\x74\x68\x20\x63\x6f\x72\x72\x65\x63\x74\x6c\x79\x0a\x24\x6d\x6f\x6e\x20\x20\x3d\x20\x30\x20\x2e\x20\x24\x6d\x6f\x6e\x20\x20\x69\x66\x20\x24\x6d\x6f\x6e\x20\x3c\x20\x31\x30\x3b\x0a\x24\x6d\x64\x61\x79\x20\x3d\x20\x30\x20\x2e\x20\x24\x6d\x64\x61\x79\x20\x69\x66\x20\x24\x6d\x64\x61\x79\x20\x3c\x20\x31\x30\x3b\x0a\x6d\x79\x20\x24\x64\x61\x74\x65\x20\x3d\x20\x24\x79\x65\x61\x72\x20\x2e\x20\x24\x6d\x6f\x6e\x20\x2e\x20\x24\x6d\x64\x61\x79\x3b\x0a\x0a\x23\x20\x45\x6e\x73\x75\x72\x65\x20\x74\x61\x72\x67\x65\x74\x20\x64\x69\x72\x65\x63\x74\x6f\x72\x79\x20\x65\x78\x69\x73\x74\x73\x20\x61\x6e\x64\x20\x69\x73\x20\x77\x72\x69\x74\x61\x62\x6c\x65\x0a\x69\x66\x20\x28\x20\x21\x2d\x64\x20\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x20\x29\x20\x7b\x0a\x20\x20\x20\x20\x64\x69\x65\x20\x22\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x20\x69\x73\x20\x6e\x6f\x74\x20\x61\x20\x64\x69\x72\x65\x63\x74\x6f\x72\x79\x5c\x6e\x22\x3b\x0a\x7d\x0a\x65\x6c\x73\x69\x66\x20\x28\x20\x21\x2d\x77\x20\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x20\x29\x20\x7b\x0a\x20\x20\x20\x64\x69\x65\x20\x22\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x20\x69\x73\x20\x6e\x6f\x74\x20\x77\x72\x69\x74\x61\x62\x6c\x65\x5c\x6e\x22\x3b\x20\x0a\x7d\x0a\x0a\x69\x66\x20\x28\x20\x2d\x64\x20\x22\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x2f\x73\x79\x73\x74\x65\x6d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x22\x20\x29\x20\x7b\x0a\x20\x20\x20\x20\x73\x79\x73\x74\x65\x6d\x20\x27\x74\x61\x72\x27\x2c\x20\x27\x63\x7a\x66\x27\x2c\x20\x22\x24\x7b\x72\x6f\x6f\x74\x5f\x64\x69\x72\x7d\x2f\x73\x79\x73\x74\x65\x6d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x2e\x24\x7b\x64\x61\x74\x65\x7d\x2e\x24\x7b\x68\x6f\x75\x72\x7d\x24\x7b\x6d\x69\x6e\x7d\x2e\x74\x61\x72\x2e\x67\x7a\x22\x2c\x20\x22\x24\x7b\x72\x6f\x6f\x74\x5f\x64\x69\x72\x7d\x2f\x73\x79\x73\x74\x65\x6d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x22\x3b\x0a\x20\x20\x20\x20\x72\x65\x6d\x6f\x76\x65\x5f\x74\x72\x65\x65\x28\x20\x22\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x2f\x73\x79\x73\x74\x65\x6d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x22\x20\x29\x3b\x0a\x7d\x0a\x0a\x69\x66\x20\x28\x20\x21\x2d\x64\x20\x22\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x2f\x73\x79\x73\x74\x65\x6d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x22\x20\x29\x20\x7b\x0a\x20\x20\x20\x20\x6d\x6b\x64\x69\x72\x20\x22\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x2f\x73\x79\x73\x74\x65\x6d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x22\x3b\x0a\x7d\x0a\x0a\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x23\x20\x4d\x61\x69\x6e\x28\x29\x20\x23\x0a\x23\x23\x23\x23\x23\x23\x23\x23\x23\x23\x0a\x0a\x77\x68\x69\x6c\x65\x20\x28\x31\x29\x20\x7b\x0a\x0a\x20\x20\x20\x20\x23\x20\x45\x6e\x73\x75\x72\x65\x20\x77\x65\x20\x68\x61\x76\x65\x20\x61\x20\x63\x75\x72\x72\x65\x6e\x74\x20\x64\x61\x74\x65\x2f\x74\x69\x6d\x65\x0a\x20\x20\x20\x20\x28\x20\x24\x73\x65\x63\x2c\x20\x24\x6d\x69\x6e\x2c\x20\x24\x68\x6f\x75\x72\x2c\x20\x24\x6d\x64\x61\x79\x2c\x20\x24\x6d\x6f\x6e\x2c\x20\x24\x79\x65\x61\x72\x2c\x20\x24\x77\x64\x61\x79\x2c\x20\x24\x79\x64\x61\x79\x2c\x20\x24\x69\x73\x64\x73\x74\x20\x29\x20\x3d\x20\x6c\x6f\x63\x61\x6c\x74\x69\x6d\x65\x28\x74\x69\x6d\x65\x29\x3b\x0a\x20\x20\x20\x20\x24\x79\x65\x61\x72\x20\x2b\x3d\x20\x31\x39\x30\x30\x3b\x20\x20\x20\x20\x23\x20\x46\x6f\x72\x6d\x61\x74\x20\x79\x65\x61\x72\x20\x63\x6f\x72\x72\x65\x63\x74\x6c\x79\x0a\x20\x20\x20\x20\x24\x6d\x6f\x6e\x2b\x2b\x3b\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x46\x6f\x72\x6d\x61\x74\x20\x6d\x6f\x6e\x74\x68\x20\x63\x6f\x72\x72\x65\x63\x74\x6c\x79\x0a\x20\x20\x20\x20\x24\x6d\x6f\x6e\x20\x20\x3d\x20\x30\x20\x2e\x20\x24\x6d\x6f\x6e\x20\x20\x69\x66\x20\x24\x6d\x6f\x6e\x20\x3c\x20\x31\x30\x3b\x0a\x20\x20\x20\x20\x24\x6d\x64\x61\x79\x20\x3d\x20\x30\x20\x2e\x20\x24\x6d\x64\x61\x79\x20\x69\x66\x20\x24\x6d\x64\x61\x79\x20\x3c\x20\x31\x30\x3b\x0a\x20\x20\x20\x20\x24\x64\x61\x74\x65\x20\x3d\x20\x24\x79\x65\x61\x72\x20\x2e\x20\x24\x6d\x6f\x6e\x20\x2e\x20\x24\x6d\x64\x61\x79\x3b\x0a\x0a\x20\x20\x20\x20\x23\x20\x67\x6f\x20\x74\x6f\x20\x74\x68\x65\x20\x6e\x65\x78\x74\x20\x6c\x6f\x67\x20\x66\x69\x6c\x65\x0a\x20\x20\x20\x20\x6d\x6b\x64\x69\x72\x20\x22\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x2f\x73\x79\x73\x74\x65\x6d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x2f\x24\x68\x6f\x75\x72\x22\x3b\x0a\x20\x20\x20\x20\x6d\x79\x20\x24\x63\x75\x72\x72\x65\x6e\x74\x5f\x69\x6e\x74\x65\x72\x76\x61\x6c\x20\x3d\x20\x22\x24\x68\x6f\x75\x72\x2f\x24\x6d\x69\x6e\x22\x3b\x0a\x0a\x20\x20\x20\x20\x6d\x79\x20\x24\x6c\x6f\x67\x66\x69\x6c\x65\x20\x3d\x20\x22\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x2f\x73\x79\x73\x74\x65\x6d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x2f\x24\x63\x75\x72\x72\x65\x6e\x74\x5f\x69\x6e\x74\x65\x72\x76\x61\x6c\x2e\x6c\x6f\x67\x22\x3b\x0a\x20\x20\x20\x20\x6f\x70\x65\x6e\x28\x20\x6d\x79\x20\x24\x4c\x4f\x47\x2c\x20\x27\x3e\x27\x2c\x20\x24\x6c\x6f\x67\x66\x69\x6c\x65\x20\x29\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x6f\x72\x20\x64\x69\x65\x20\x22\x43\x6f\x75\x6c\x64\x20\x6e\x6f\x74\x20\x6f\x70\x65\x6e\x20\x6c\x6f\x67\x20\x66\x69\x6c\x65\x20\x24\x6c\x6f\x67\x66\x69\x6c\x65\x2c\x20\x24\x21\x5c\x6e\x22\x3b\x0a\x0a\x20\x20\x20\x20\x23\x20\x73\x74\x61\x72\x74\x20\x61\x63\x74\x75\x61\x6c\x6c\x79\x20\x6c\x6f\x67\x67\x69\x6e\x67\x20\x23\x0a\x20\x20\x20\x20\x6d\x79\x20\x24\x6c\x6f\x61\x64\x20\x3d\x20\x71\x78\x28\x63\x61\x74\x20\x2f\x70\x72\x6f\x63\x2f\x6c\x6f\x61\x64\x61\x76\x67\x29\x3b\x0a\x20\x20\x20\x20\x23\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x22\x4c\x6f\x61\x64\x20\x41\x76\x65\x72\x61\x67\x65\x3a\x5c\x6e\x5c\x6e\x22\x3b\x20\x20\x23\x20\x77\x69\x74\x68\x6f\x75\x74\x20\x74\x68\x69\x73\x20\x6c\x69\x6e\x65\x2c\x20\x79\x6f\x75\x20\x63\x61\x6e\x20\x67\x65\x74\x20\x68\x69\x73\x74\x6f\x72\x69\x63\x61\x6c\x20\x6c\x6f\x61\x64\x73\x20\x77\x69\x74\x68\x20\x68\x65\x61\x64\x20\x2d\x6e\x31\x20\x2a\x0a\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x22\x24\x64\x61\x74\x65\x20\x24\x68\x6f\x75\x72\x20\x24\x6d\x69\x6e\x20\x4c\x6f\x61\x64\x20\x41\x76\x65\x72\x61\x67\x65\x3a\x20\x24\x6c\x6f\x61\x64\x5c\x6e\x22\x3b\x0a\x0a\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x22\x4d\x65\x6d\x6f\x72\x79\x20\x55\x73\x61\x67\x65\x3a\x5c\x6e\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x71\x78\x28\x63\x61\x74\x20\x2f\x70\x72\x6f\x63\x2f\x6d\x65\x6d\x69\x6e\x66\x6f\x29\x2c\x20\x22\x5c\x6e\x22\x3b\x0a\x0a\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x22\x56\x69\x72\x74\x75\x61\x6c\x20\x4d\x65\x6d\x6f\x72\x79\x20\x53\x74\x61\x74\x73\x3a\x5c\x6e\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x71\x78\x28\x76\x6d\x73\x74\x61\x74\x20\x31\x20\x31\x30\x29\x2c\x20\x22\x5c\x6e\x22\x3b\x0a\x0a\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x22\x50\x72\x6f\x63\x65\x73\x73\x20\x4c\x69\x73\x74\x3a\x5c\x6e\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x71\x78\x28\x70\x73\x20\x61\x75\x77\x77\x78\x66\x29\x2c\x20\x22\x5c\x6e\x22\x3b\x0a\x0a\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x22\x4e\x65\x74\x77\x6f\x72\x6b\x20\x43\x6f\x6e\x6e\x65\x63\x74\x69\x6f\x6e\x73\x3a\x5c\x6e\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x71\x78\x28\x6e\x65\x74\x73\x74\x61\x74\x20\x2d\x61\x6e\x70\x29\x2c\x20\x22\x5c\x6e\x22\x3b\x0a\x0a\x20\x20\x20\x20\x23\x20\x6f\x70\x74\x69\x6f\x6e\x61\x6c\x20\x6c\x6f\x67\x67\x69\x6e\x67\x0a\x20\x20\x20\x20\x69\x66\x20\x28\x24\x6d\x79\x73\x71\x6c\x29\x20\x7b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x22\x4d\x59\x53\x51\x4c\x20\x50\x72\x6f\x63\x65\x73\x73\x65\x73\x3a\x5c\x6e\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x71\x78\x28\x6d\x79\x73\x71\x6c\x61\x64\x6d\x69\x6e\x20\x70\x72\x6f\x63\x29\x2c\x20\x22\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x7d\x0a\x0a\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x22\x41\x70\x61\x63\x68\x65\x20\x50\x72\x6f\x63\x65\x73\x73\x65\x73\x3a\x5c\x6e\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x69\x66\x20\x28\x20\x2d\x66\x20\x27\x2f\x75\x73\x72\x2f\x6c\x6f\x63\x61\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x2f\x63\x70\x61\x6e\x65\x6c\x27\x20\x29\x20\x7b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x71\x78\x28\x6c\x79\x6e\x78\x20\x2d\x2d\x64\x75\x6d\x70\x20\x6c\x6f\x63\x61\x6c\x68\x6f\x73\x74\x2f\x77\x68\x6d\x2d\x73\x65\x72\x76\x65\x72\x2d\x73\x74\x61\x74\x75\x73\x29\x2c\x20\x22\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x7d\x0a\x20\x20\x20\x20\x65\x6c\x73\x69\x66\x20\x28\x24\x61\x70\x61\x63\x68\x65\x29\x20\x7b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x71\x78\x23\x6c\x79\x6e\x78\x20\x2d\x77\x69\x64\x74\x68\x3d\x31\x30\x32\x34\x20\x2d\x64\x75\x6d\x70\x20\x68\x74\x74\x70\x3a\x2f\x2f\x6c\x6f\x63\x61\x6c\x68\x6f\x73\x74\x2f\x73\x65\x72\x76\x65\x72\x2d\x73\x74\x61\x74\x75\x73\x20\x7c\x20\x65\x67\x72\x65\x70\x20\x27\x28\x43\x6c\x69\x65\x6e\x74\x2e\x2b\x52\x65\x71\x75\x65\x73\x74\x7c\x47\x45\x54\x7c\x50\x4f\x53\x54\x7c\x48\x45\x41\x44\x29\x27\x23\x2c\x20\x22\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x7d\x0a\x0a\x20\x20\x20\x20\x69\x66\x20\x28\x24\x6d\x61\x78\x5f\x64\x61\x74\x61\x29\x20\x7b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x22\x50\x72\x6f\x63\x65\x73\x73\x20\x4c\x69\x73\x74\x20\x66\x6f\x72\x20\x75\x73\x65\x72\x20\x4e\x6f\x62\x6f\x64\x79\x3a\x5c\x6e\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x6d\x79\x20\x40\x70\x72\x6f\x63\x65\x73\x73\x5f\x6c\x69\x73\x74\x20\x3d\x20\x71\x78\x28\x70\x73\x20\x61\x75\x78\x20\x7c\x20\x67\x72\x65\x70\x20\x5b\x6e\x5d\x6f\x62\x6f\x64\x79\x20\x7c\x20\x61\x77\x6b\x20\x27\x7b\x70\x72\x69\x6e\x74\x20\x5c\x24\x32\x7d\x27\x29\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x66\x6f\x72\x65\x61\x63\x68\x20\x6d\x79\x20\x24\x70\x72\x6f\x63\x65\x73\x73\x20\x28\x40\x70\x72\x6f\x63\x65\x73\x73\x5f\x6c\x69\x73\x74\x29\x20\x7b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x71\x78\x28\x6c\x73\x20\x2d\x61\x6c\x20\x2f\x70\x72\x6f\x63\x2f\x24\x70\x72\x6f\x63\x65\x73\x73\x20\x7c\x20\x67\x72\x65\x70\x20\x63\x77\x64\x20\x7c\x20\x67\x72\x65\x70\x20\x68\x6f\x6d\x65\x29\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x7d\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x22\x4c\x69\x73\x74\x20\x6f\x66\x20\x4f\x70\x65\x6e\x20\x46\x69\x6c\x65\x73\x3a\x5c\x6e\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6e\x74\x20\x24\x4c\x4f\x47\x20\x71\x78\x28\x6c\x73\x6f\x66\x29\x2c\x20\x22\x5c\x6e\x22\x3b\x0a\x20\x20\x20\x20\x7d\x0a\x0a\x20\x20\x20\x20\x63\x6c\x6f\x73\x65\x20\x24\x4c\x4f\x47\x3b\x0a\x0a\x20\x20\x20\x20\x23\x20\x72\x6f\x74\x61\x74\x65\x20\x74\x68\x65\x20\x22\x63\x75\x72\x72\x65\x6e\x74\x22\x20\x70\x6f\x69\x6e\x74\x65\x72\x0a\x20\x20\x20\x20\x72\x65\x6d\x6f\x76\x65\x5f\x74\x72\x65\x65\x28\x20\x22\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x2f\x73\x79\x73\x74\x65\x6d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x2f\x63\x75\x72\x72\x65\x6e\x74\x22\x20\x29\x3b\x0a\x20\x20\x20\x20\x73\x79\x6d\x6c\x69\x6e\x6b\x20\x22\x24\x7b\x63\x75\x72\x72\x65\x6e\x74\x5f\x69\x6e\x74\x65\x72\x76\x61\x6c\x7d\x2e\x6c\x6f\x67\x22\x2c\x20\x22\x24\x72\x6f\x6f\x74\x5f\x64\x69\x72\x2f\x73\x79\x73\x74\x65\x6d\x2d\x73\x6e\x61\x70\x73\x68\x6f\x74\x2f\x63\x75\x72\x72\x65\x6e\x74\x22\x3b\x0a\x0a\x20\x20\x20\x20\x73\x6c\x65\x65\x70\x28\x24\x73\x6c\x65\x65\x70\x5f\x74\x69\x6d\x65\x29\x3b\x0a\x0a\x7d\x0a\x23\x45\x4f\x46\x0a') & disown $! ; } # //DESCRIPTION// - Cpanel version of sys_snap.
function sys_snap_process_substitution () { bash <(printf '#!/bin/bash

#sys-snap.sh redesign by Jason Rodriguez 2012-02-02
#No need to use 'nohup' with this one, just set it and forget it

#Original written by RS-MikeK 05/09/03 and modified by RS-Nate 06/18/03
# Tweaked by SL-KLiKEvIL 2013/05/17

# Define some pretty helper functions
die() { echo -e "\e[1;32m:: \e[1;37m${*}\e[0m"; exit 1; }
notice() { echo -e "\e[0;34m:: \e[1;37m${*}\e[0m"; }

# Set the time between snapshots - for formatting see: man sleep
SLEEP_TIME="1m"

# This sets the number of logs we keep before recycling
NUM_INTERVALS=60

# Where to store the logs, usually best to leave this alone
LOG_DIR="/root/system-snapshot/"

notice "Using log directory: ${LOG_DIR}"

if [ -d ${LOG_DIR} ]; then
        notice "Log directory already exists, clearing its contents."
        rm -f ${LOG_DIR}/* >/dev/null 2>&1 || die "Unable to clear log directory contents."
else
        mkdir ${LOG_DIR} >/dev/null 2>&1 || die "Unable to create log directory."
fi

# Initialize variables & functions
current_interval=1
extra() { :; }

# Check for Plesk/cPanel
if [ -e /usr/local/psa/version ]; then
        # Plesk - Grab MySQL password from .psa.shadow to gather MySQL data
        notice "Detected a Plesk Panel installation."
        PLESKQL_PW=$(</etc/psa/.psa.shadow)
        extra() { mysqladmin -u admin -p${PLESKQL_PW} processlist; }
elif [ -e /usr/local/cpanel/version ]; then
        # cPanel has nicer defaults set, can pull more data :D
        notice "Detected a cPanel/WHM installation."
        extra() { mysqladmin processlist || mysqladmin proc stat; lynx -dump -nolist -width 300 http://localhost/whm-server-status; }
fi

sys-snap() {
        # The Main Loop - does not start logging until $SLEEP_TIME has elapsed once
        while sleep $SLEEP_TIME; do
                # Clear any previous data in the current log file
                > ${LOG_DIR}/${current_interval}.log

                # Redirect all output, appending to the current log file
                exec 1>>${LOG_DIR}/${current_interval}.log

                # Processes to run every interval go below
                date
                ps awfuxueww
		# Uncomment below if you want color
#		\x68\x3d\x24\x28\x70\x73\x20\x66\x\x78\x61\x20\x7c\x20\x77\x63\x20\x2d\x6c\x29\x20\x3b\x20\x66\x6f\x72\x20\x69\x20\x69\x6e\x20\x24\x28\x73\x65\x71\x20\x31\x20\x31\x20\x22\x24\x68\x22\x29\x20\x3b\x20\x64\x6f\x20\x70\x69\x64\x73\x3d\x60\x70\x73\x20\x61\x77\x66\x75\x78\x20\x7c\x20\x68\x65\x61\x64\x20\x2d\x6e\x20\x22\x24\x69\x22\x20\x7c\x20\x74\x61\x69\x6c\x20\x2d\x31\x20\x7c\x20\x61\x77\x6b\x20\x27\x7b\x70\x72\x69\x6e\x74\x20\x24\x32\x7d\x27\x60\x20\x3b\x65\x63\x68\x6f\x20\x24\x69\x20\x7c\x20\x61\x77\x6b\x20\x27\x7b\x70\x72\x69\x6e\x74\x20\x22\x65\x63\x68\x6f\x20\x2d\x65\x20\x5c\x78\x32\x32\x5c\x5c\x65\x5b\x31\x3b\x33\x33\x6d\x60\x70\x73\x20\x61\x77\x66\x75\x78\x20\x7c\x20\x68\x65\x61\x64\x20\x2d\x6e\x20\x22\x24\x69\x22\x20\x7c\x20\x74\x61\x69\x6c\x20\x2d\x31\x60\x5c\x5c\x65\x5b\x30\x6d\x5c\x5c\x6e\x5c\x78\x32\x32\x22\x7d\x27\x7c\x62\x61\x73\x68\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x3b\x20\x69\x66\x20\x5b\x20\x21\x20\x60\x73\x74\x72\x69\x6e\x67\x73\x20\x2f\x70\x72\x6f\x63\x2f\x24\x70\x69\x64\x73\x2f\x65\x6e\x76\x69\x72\x6f\x6e\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x7c\x20\x77\x63\x20\x2d\x6c\x60\x20\x3d\x20\x30\x20\x5d\x20\x3b\x20\x74\x68\x65\x6e\x20\x63\x61\x74\x20\x2f\x70\x72\x6f\x63\x2f\x24\x70\x69\x64\x73\x2f\x65\x6e\x76\x69\x72\x6f\x6e\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x7c\x20\x74\x72\x20\x27\x5c\x30\x27\x20\x27\x5c\x6e\x27\x20\x7c\x20\x61\x77\x6b\x20\x27\x7b\x70\x72\x69\x6e\x74\x20\x22\x65\x63\x68\x6f\x20\x2d\x65\x20\x5c\x78\x32\x32\x5c\x5c\x65\x5b\x34\x3b\x33\x31\x6d\x22\x24\x30\x22\x5c\x78\x32\x32\x22\x7d\x27\x20\x7c\x62\x61\x73\x68\x20\x32\x3e\x2f\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x3b\x20\x66\x69\x20\x3b\x20\x64\x6f\x6e\x65
		# Useful for syssnap_process_tree_grep
		printf "#####FIELD SEPERATING PROCESSES FROM THE REST#######\n"
		# Only adding this in for rare cases when you just want too much information.
		if [ `env | grep VERBOSE=1 | wc -l` = 1 ] ; then ps fuxa | awk \x27{print "printf \\x22lsof and maps for "$2"\\\\n\\x22 ; lsof -n -p "$2" ; pmap -x "$2" ;cat /proc/"$2"/{stat,status} 2>/dev/null ; file -s /proc/"$2"/{exe,cwd} 2>/dev/null ; cat /proc/"$2"/cmdline 2>/dev/null && echo ; echo;"}\x27 | sh 2>/dev/null ; fi

                cat /proc/loadavg
                cat /proc/meminfo
                vmstat -S M 1 10
		iostat -d -m -x

		printf "\n##### METWORK INFORMATION ####\n"
                netstat -tunelap
		# Verbose netstat
		ss -nompie
		printf "Attempting to pull mysqladmin proc stat with silent fail.\n"
		mysqladmin proc stat 2>/dev/null || mysqladmin -u admin -p`cat /etc/psa/.psa.shadow` proc stat 2>/dev/null || sudo -u mysql mysqladmin -u mysql stat 2>/dev/null # if all else fails we can at least get stats
		printf "\n\n##### MYSQL SOCKET INFORMATION ####\n\n"
		ss -xnoepmi src `lsof -n -U |\grep -i sock| \grep mysql|\grep -Poi "[/](.*)" | tail -1` 2>/dev/null
		ss -oei state established "( dport = :mysql or sport = :mysql )" 2>/dev/null
		# Debian (variant) specific.
		if [ -f /etc/debian_version ] ; then printf "### UBUNTU/DEBIAN SPECIFIC STUFFS\x21 ####\n" ; /usr/sbin/apache2ctl fullstatus ; mysqladmin -u `awk \x27/user/{print $3}\x27 /etc/mysql/debian.cnf | head -1` -p`awk \x27/password/{print $3}\x27 /etc/mysql/debian.cnf | head -1` proc  stat ; fi
                # Execute the panel-specific commands from above
                extra

                # Make our symlink and move on to the next log file
                ln -sf ${LOG_DIR}/${current_interval}.log ${LOG_DIR}/current
                let current_interval++
                [ ${current_interval} -gt $NUM_INTERVALS ] && current_interval=1
        done
}

notice "Forking to background."

sys-snap & disown; echo
') ; } # //DESCRIPTION// - Uses process substitution to run system-snapshot as a file descriptor

function cpanel_quick_ref () { 
printf "File					Description\n"
printf "/etc/httpd/conf/httpd.conf		apache configuration file\n"
printf "/usr/local/apache/conf/httpd.conf	See above.\n"
printf "/etc/exim.conf 			 	mail server configuration file\n"
printf "/etc/named.conf	 			name server (named) configuration file\n"
printf "/etc/proftpd.conf			proftpd server configuration file\n"
printf "/etc/pureftpd.conf	 		pureftpd server configuration file\n"
printf "/etc/valiases/domainname		catchall and forwarders are set here\n"
printf "/etc/vfilters/domainname	 	email filters are set here\n"
printf "/etc/userdomains	 		all domains are listed here  addons, parked,subdomains along with their usernames\n"
printf "/etc/localdomains	 		exim related file  all domains should be listed here to be able to send mails\n"
printf "/var/cpanel/users/username	 	cpanel user file\n"
printf "/var/cpanel/cpanel.config	 	cpanel configuration file ( Tweak Settings )*\n"
printf "/etc/cpbackup-userskip.conf		Skips backups of specified users\n"
printf "/etc/nameserverips	 		Nameserver IPs\n"
printf "/var/cpanel/resellers			For addpkg, etc permissions for resellers.\n"
printf "/etc/chkserv.d	 			Main >> Service Configuration >> Service Manager *\n"
printf "/var/run/chkservd	 		Main >> Server Status >> Service Status *\n"
printf "/var/log/dcpumon	 		top log process\n"
printf "/root/cpanel3skel	 		skel directory. Eg: public_ftp, public_html. (Account Functions>Skeleton Directory )*\n"
printf "/etc/wwwacct.conf	 		account creation defaults file in WHM (Basic cPanel/WHM Setup) [ethdev]*\n"
printf "/etc/cpupdate.conf	 		Update Config *\n"
printf "/etc/cpbackup.conf	 		Configure Backup*\n"
printf "/etc/clamav.conf	 		clamav (antivirus configuration file )\n"
printf "/etc/my.cnf	 			mysql configuration file\n"
printf "/usr/local/Zend/etc/php.ini\n"
printf "OR /usr/local/lib/php.ini  		php configuration file\n"
printf "/etc/ips	 			ip addresses on the server (except the shared ip) (IP Functions>Show IP Address Usage )*\n"
printf "/etc/ipaddrpool	 			ip addresses which are free\n"
printf "/etc/ips.dnsmaster	 		name server ips\n"
printf "/var/cpanel/Counters	 		To get the counter of each users.\n"
printf "/var/cpanel/bandwidth	 		To get bandwith usage of domains\n"
printf "/var/cpanel/accounting.log		Contains a list of accounting functions performed through WHM, including account removal and 						creation.\n"
printf "/usr/local/cpanel/logs/error_log	cPanel	logs any error it incurs here. This should be checked when you encounter errors or strange 						behavior in cPanel/WHM...\n"
printf "/usr/local/cpanel/logs/license_log	All license update attempts are logged here. If you run into any errors related to license when 					logging in, check here.\n"
printf "/usr/local/cpanel/logs/stats_log	The stats daemon (cpanellogd) logs the output from all stats generators (Awstats, Webalizer, 						Analog) here.\n"
printf "/usr/local/cpanel/logs/access_log	General	information related to access cPanel requests is logged here.\n"
printf "/var/cpanel/bandwidth			Contains a list of the bandwidth history for each account. Each named after their respective user.\n"
printf "/usr/local/apache/logs/error_log 	Exceptions caught by httpd along with standard error output from CGI applications are logged here..\n"
printf "					The first place you should look when httpd crashes or you incur errors when accessing website.\n"
 } # //DESCRIPTION// - Quick reference of where useful cpanel files are located.
function exim_main_log_email_grep () { printf 'Do you want to only match email addresses or do you want full output (yes/no)\n' ; read -e QUESTION ; case $QUESTION in yes) \egrep -o '([0-9a-zA-Z]+[-._+&amp;])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,6}' /var/log/exim_mainlog ;; no) \egrep '([0-9a-zA-Z]+[-._+&amp;])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,6}' /var/log/exim_mainlog ;; esac ; }  # //DESCRIPTION// - greps for email addresses (full line or email only) from /var/log/exim_mainlog
function plesk_qmail_smtp_auth_grep () { printf "Email Address\tHost\n" ; NUM=$(\grep -i smtp_auth /usr/local/psa/var/log/maillog | wc -l) ; for i in `seq 1 1 $NUM` ; do printf "`\grep -i smtp_auth /usr/local/psa/var/log/maillog | \egrep -o '([0-9a-zA-Z]+[-._+&amp;])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,6}' | head -n +$i | tail -1`\t $(\grep -i smtp_auth /usr/local/psa/var/log/maillog |\egrep '([0-9a-zA-Z]+[-._+&amp;])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,6}' | cut -d" " -f14 | head -n +$i | tail -1)\n" ; done ; } # //DESCRIPTION// - Get remote logins from qmail's log (Not 100% confident in this one so if it returns nothing then check manually).
function new_sshd_rootkit_checker_cent_and_rhel () { ps fuxa | \grep ssh[d] | awk '{print "cat /proc/"$2"/maps"}'|sh | \grep -Poi '[/](.*)' | sort -u  | \grep -v del | awk '{print "printf \x22Running rpm -qf on "$0" -- result : `rpm -qf "$0"`\\n\x22"}'|sh ; } # //DESCRIPTION// - Checks for a rootkit that has been floating around-- if a shared object wasn't installed by anything check it out.
function sysctl_shared_segment_tweak () { echo "backing up existing /etc/sysctl.conf to /etc/sysctl.conf-`date +%s`" ; cp /etc/sysctl.conf{,-`date +%s`} ; echo "writing all sysctl current variables to $(cwd)/all_sysctl_vars-`date +%s`" ; sysctl -a | tee -a | tee all_sysctl_vars-`date +%s` ; CORES=$(grep -i cores /proc/cpuinfo|wc -l) ; sysctl -w kernel.shmall=`sysctl kernel.shmmax | awk '{print $3 / '$CORES' }'` | tee -a /etc/sysctl.conf ; } # //DESCRIPTION// - Makes the kernel more evenly distribute shared memory segments based off of # of processor cores.
function io_heavy_proc () { if [[ ! $(find /sbin /usr/sbin /bin /usr/bin -name 'iotop') ]] && [[ -f /etc/redhat-release ]] ; then yum -y install iotop || up2date -v -i iotop ; elif [[ ! -f /usr/sbin/iotop ]] && [[ -f /etc/debian_version ]] ; then  aptitude install iotop ; fi && (iotop -b -n 1 -P 2>/dev/null | head -2 ; iotop -b -n 1 -P 2>/dev/null | tail -n +3 | awk '{if($4 > 0 || $6 > 0) print $0}' | sort -nk4,4) ; } # //DESCRIPTION// - Human readable short find of heaviest disk IO processes.
function tcp_congestion_control_algorithm  () { for i in $(\ls /lib/modules/`uname -r`/kernel/net/ipv4/ | \grep tcp_ | sed -e 's/[.]ko//g' -e 's/tcp_//g' -e 's/[.]gz$//g' -e 's/\*//g') ; do echo $RANDOM $i ; done | sort | sed -r 's/^[0-9]+ //' | head -1 | awk '{print "echo "$0" > /proc/sys/net/ipv4/tcp_congestion_control && printf \x22\x41pplying "$0" as the new algorithm\\n\x22"}'|sh ; } # //DESCRIPTION// - Changes tcp congestion control algorithm.
function sqltuner () { perl <(curl -L https://github.com/major/MySQLTuner-perl/raw/master/mysqltuner.pl) ; } # //DESCRIPTION// - runs the mysqltuner using process substitution.
#function phpinfo () { test=`echo "echo phpinfo();" | php -a | wc -l` ; if [ ! "$test" = "4" ] ; then echo "echo <?phpinfo();?>" | php ; else echo "phpinfo();" | php -a ; fi }  
function phpinfo () { if [  `echo 'echo phpinfo();?>' | php -a | wc -l` -lt 10 ] ; then echo 'echo <?phpinfo();?>' | php -a | sed -e :a -e 's/<[^>]*>/ /g;/</N;//ba' ; else echo 'echo phpinfo();?>' | php -a | sed -e :a -e 's/<[^>]*>/ /g;/</N;//ba' ; fi ; }  # //DESCRIPTION// - Prints phpinfo in pretty format to stdout
function print_suphp_env () { pgrep -f php | while read pid ; do (printf "${pid} `cat /proc/${pid}/cmdline|tr '\0' ' '|sed -r 's/(php|php5|php5-cgi|php-cgi)\x00/php /g'`\n" ; cat /proc/${pid}/environ) | tr '\0' '\n' ; done ; } # //DESCRIPTION// - Prints out pid and process as well as human readable environment variables for php processes.

function ssl_key_verifier () { printf 'Are you going from stdin or from a file (stdin|file)?\n' ; read -e QUESTION ; case $QUESTION in stdin) printf 'Paste the entire certificate followed by an EOF ( ctrl + d ).\n' ; CERT=`cat - | hexdump -C |\grep '|' | cut -d" " -f2-19 | sed -e 's/^.//g' -e 's/[0-9,a-f][0-9,a-f]/\\\\x&/g' -e 's/ //g' | sed -e ":a" -e "$ s/\n//gp;N;b a" | head -1` ; openssl x509 -noout -modulus -in <(printf "${CERT}") | openssl md5 && printf 'Paste the entire keyfile followed by an EOF (ctrl + d) \n'; KEY=`cat - | hexdump -C |\grep '|' | cut -d" " -f2-19 | sed -e 's/^.//g' -e 's/[0-9,a-f][0-9,a-f]/\\\\x&/g' -e 's/ //g' | sed -e ":a" -e "$ s/\n//gp;N;b a" | head -1` ;  openssl rsa -noout -modulus -in <(printf "${KEY}") | openssl md5 ;; file) printf 'Enter the path to the certificate\n' ; read -e CERT ; openssl x509 -noout -modulus -in $CERT | openssl md5 && printf 'Enter the path to the keyfile\n'; read -e KEY ;  openssl rsa -noout -modulus -in $KEY | openssl md5 ;; esac ; }   # //DESCRIPTION// - Checks if a ssl private key matches a certificate
# function ssl_key_verifier () { printf 'Are you going from stdin or from a file (stdin|file)?\n' ; read -e QUESTION ; case $QUESTION in stdin) TEMP=`mktemp` ; printf 'Paste the entire certificate followed by an EOF ( ctrl + d ).\n' ; cat > $TEMP ; openssl x509 -noout -modulus -in $TEMP | openssl md5 && printf 'Paste the entire keyfile followed by an EOF (ctrl + d) \n'; cat >$TEMP ;  openssl rsa -noout -modulus -in $TEMP | openssl md5 ; rm $TEMP ;; file) printf 'Enter the path to the certificate\n' ; read -e CERT ; openssl x509 -noout -modulus -in $CERT | openssl md5 && printf 'Enter the path to the keyfile\n'; read -e KEY ;  openssl rsa -noout -modulus -in $KEY | openssl md5 ;; esac ; } 
#function ssl_key_verifier () { printf 'Are you going from stdin or from a file (stdin|file)?\n' ; read -e QUESTION ; case $QUESTION in stdin) printf 'Paste the entire certificate followed by an EOF ( ctrl + d ).\n' ; CERT=`cat - | hexdump -C |\grep '|' | cut -d" " -f2-19 | sed -e 's/^.//g' -e 's/[0-9,a-f][0-9,a-f]/\\x&/g' -e 's/ //g' | sed -e ":a" -e "$ s/\n//gp;N;b a" | head -1` ; openssl x509 -noout -modulus -in $CERT | openssl md5 && printf 'Paste the entire keyfile followed by an EOF (ctrl + d) \n'; read -d `echo -e "\x04"` KEY ;  openssl rsa -noout -modulus -in $KEY | openssl md5 ;; file) printf 'Enter the path to the certificate\n' ; read -e CERT ; openssl x509 -noout -modulus -in $CERT | openssl md5 && printf 'Enter the path to the keyfile\n'; read -e KEY ;  openssl rsa -noout -modulus -in $KEY | openssl md5 ;; esac ; }
function csr_info () { printf 'Are you going from stdin or from a file (stdin|file)?\n' ; read -e QUESTION ; case $QUESTION in stdin) printf 'Paste the CSR in followed by an eof. (ctrl + d)\n' ; read -d `echo -e "\x04"` CSR ; openssl req -in <(echo "$CSR") -noout -text ;; file) openssl req -in  "$@" -noout -text ;; esac ; } # //DESCRIPTION// - Checks information about a CSR.
function openssl_cert_info () { printf 'Are you going from stdin or from a file (stdin|file)?\n' ; read -e QUESTION ; case $QUESTION in stdin) printf 'Paste the whole SSL cert followed by an EOF. (ctrl + d)\n' ; read -d `echo -e "\x04"` CERT ; openssl x509 -noout -text -modulus -in <(echo "$CERT") ;; file) if [[ $# -lt 1 ]] ; then echo "What file name?" ; read -e FN ; openssl x509 -noout -text -modulus -in <(cat ${FN}) ; else openssl x509 -noout -text -modulus -in <(cat $1) ; fi ;; esac ; } # //DESCRIPTION// - Checks info about a ssl cert.
function clear_exim_stats () { mysql eximstats -e 'delete from sends;' && mysql eximstats -e 'delete from smtp;' && mysql eximstats -e 'delete from failures;' && mysql eximstats -e 'delete from defers;' ; }  # //DESCRIPTION// - Clears out exim stats.
# function apache_dso_file_grep () { lsof -n | \grep -Pi '^httpd' | \grep -Poi "[/](.*)" | sort -u | \egrep -v 'logs|^.usr|^.lib|^.opt' ; }
function traffic_fds () { if [[ $# -lt 1 ]] || [[ $1 = "-h" ]] || [[ $1 = "--help" ]] ; then echo -e "Usage:\n ${FUNCNAME[0]} <recv|send>\n" && return 1 ; else case $1 in send) (netstat -tunelap | head -2 ; netstat -tunelap | tail -n +3 | sort -nk 3) | awk '{if($3 > 1) print $0}' | awk '{print $9}' | cut -d/ -f1 | grep '[0-9]' | sort -u | while read pid ; do lsof -p $pid ; done | egrep -v '.var.log|.usr.local.apache| [/]lib64| [/]usr.lib' ;; recv) (netstat -tunelap | head -2 ; netstat -tunelap | tail -n +3 | sort -nk 3) | awk '{if($2 > 1) print $0}' | awk '{print $9}' | cut -d/ -f1 | grep '[0-9]' | sort -u | while read pid ; do lsof -p $pid ; done | egrep -v '.var.log|.usr.local.apache| [/]lib64| [/]usr.lib' ;; esac ; fi ; } # //DESCRIPTION// - Runs an lsof on processes that have active connections in an attempt to find the filenames (bandwidth troubleshooting).
function apache_dso_file_grep () { lsof -n | \grep -Pi "^httpd|^php" | \grep -Poi "[/](.*)" | sort -u | \egrep -v "logs|^.lib|^.usr.lib|^.opt|[.]so$|.usr.local.apache.lib|.dev.zero$|.dev.null$|.usr.share" | tail -n +2 ; } # //DESCRIPTION// - runs lsof  on apache.
function gethex () { printf "Input what you want converted to hex followed by EOF [ ^D ] ( ctrl + d )\n" ; cat - | hexdump -C |\grep '|' | cut -d" " -f2-19 | sed -e "s/^.//g" -e "s/[0-9,a-f][0-9,a-f]/\\x&/g" -e "s/ //g" | sed -e 's/x/\\x/g' ; } # //DESCRIPTION// - Convert plaintext to hex/bytecode (can also be used to transfer binary files if you know what you are doing ;))
function fetch_and_install_axel () { tar xzf <(curl  -L http://173.193.139.3/axel-2.4.tar.gz) ; pushd axel* ; ./configure --prefix=/usr ; make -j5 ; make -j5 install ; popd ; rm -rf ./axel* ; printf 'Axel was installed successfully!\n' ; } # //DESCRIPTION// - Fetches and installs axel, a fast & multithreaded download client.
function fetch_and_install_iperf () { if [[ ! -f /usr/bin/g++ ]] ; then yum -y install gcc-c++ ; elif [[ ! -f /usr/bin/g++ ]] && [[ -f /usr/bin/apt-get ]] ; then apt-get -y --force-yes install gcc g++ ; fi ; tar xzf <(curl -L http://downloads.sourceforge.net/project/iperf/iperf-2.0.5.tar.gz?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fiperf%2F&ts=1373883417&use_mirror=hivelocity) ; pushd iper* ; ./configure --prefix=/usr/local ; make -j5 ; make install ; popd ; rm -rf ./iperf* ; } # //DESCRIPTION// - Fetches and installs iperf.
function fetch_and_install_radare2 () { if [ -f /usr/bin/yum ] && [[ $(rpm -qa | egrep 'gcc|make'|wc -l) -gt 1 ]] && [[ $(which gcc 2>&1 | grep -P '^[/]' | wc -l) == 1 ]]  ; then tar xjf <(curl http://173.193.139.3/radare2.tar.bz2) && pushd rada* && ./configure --prefix=/usr && make -j5 && make install 2>&1 | grep -P '[/]bin' && echo -e "${LightRed} Install complete\x21${White}"; popd; rm -rf radare* ; elif [ -f /usr/bin/apt-get ] && [[ $(dpkg --get-selections | egrep 'gcc|make'|wc -l) -gt 1 ]] && [[ $(which gcc 2>&1 | grep -P '^[/]' | wc -l) == 1 ]]  ; then tar xjf <(curl http://173.193.139.3/radare2.tar.bz2) && pushd rada* && ./configure --prefix=/usr && make -j5 && make install 2>&1 | grep -P '[/]bin' && echo -e "${LightRed} Install complete\x21${White}" ;popd; rm -rf radare* ; else echo -e "${Yellow}Failed to install\x21\nContact agent redbull if you need help installing\x21${White}" ; fi ; } # //DESCRIPTION// - Attempts to fetch and install a reverse engineer's toolkit (CLI hex editor, debugger, disassembler, and assembler included!)
function fetch_and_install_gptfdisk () { if [ -f /usr/bin/yum ] ; then yum -y install make gcc-c++ kernel-devel uuid-devel libuuid-devel libicu-devel popt-devel ncurses-devel ; elif [ -f /usr/bin/apt-get ] ; then apt-get install make g++-4.3 uuid-dev libicu-dev libncurses5-dev libpopt-dev ; fi ; tar xvzf <(curl -L "http://downloads.sourceforge.net/project/gptfdisk/gptfdisk/0.8.6/gptfdisk-0.8.6.tar.gz?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fgptfdisk%2Ffiles%2Fgptfdisk%2F0.8.6%2F&ts=1370595004&use_mirror=hivelocity") ; pushd gptfd* ; ./configure --prefix=/usr/local ; make -j5 && find -type f -perm 5 -exec cp -v "{}" /usr/local/sbin/ \; && popd && /bin/rm -rf ./gptf* && printf 'Install completed to /usr/local/sbin/gdisk\n' ; } # //DESCRIPTION// - Attempts to fetch and install an fdisk (gdisk) for managing GPT.
function dump_proc_memory () { 
if [[ ! -f `which gdb` ]] ; then echo -e "Missing gdb\x21 install this first." ; else grep '\brw[-,x]p\b' /proc/$1/maps | sed -n 's/^\([0-9a-f]*\)-\([0-9a-f]*\) .*$/\1 \2/p' | while read start stop; do gdb --batch --pid $1 -ex "dump memory $1-$start-$stop.dump 0x$start 0x$stop"; printf "Dump outputted to $1-$start-$stop.dump\n"; done; fi ; } # //DESCRIPTION// -  Dumps process memory.
function load_ipmi_modules () { find /lib/modules/ -iname '*ipmi*' -type f | grep -Poi '([^/])+$' | cut -d. -f1 | awk '{print "modprobe "$0" 2>/dev/null"}'|sort -u|bash -v 2>/dev/null ; } # //DESCRIPTION// - Finds all modules within /lib/modules related to ipmi and modprobes them.
function tty_snoop () { printf 'List of available ttys to snoop:\n'; find /dev/ -name 'vcs*' | egrep 'vcsa[0-9]|vcs[0-9]' ;printf 'Which console/tty would you like to spy on (e.g. /dev/vcsa1)?\n' ;read -e CONSOLE ; while true ; do clear ;  cat $CONSOLE | sed -e 's/\x20\x07\x20\x07\x20\x07/\x0a/g' | cat -s | tail -30 ; sleep 1.2 ; done ; } # //DESCRIPTION// - Views up to 30 lines of a tty/kvm console.

function cpanel_access_log_parser () { (printf "${Cyan}IP\t\t\t\t\t${Red}URI\t\t\t\t\t\t${LightGreen}File\n" ; grep root /usr/local/cpanel/logs/access_log | awk '{print $1" "$7" "$11}' | sed -e 's/h.*cpsess..........//g' | awk '{print "'${Cyan}'"$1"\t'${Red}'"$3"\t'${LightGreen}'"$2}')|column -cx ; } # //DESCRIPTION// - Parses out filename, requesturi, and IP on cpanel access logs (color coded).

##### purely hw related stuff #####





function cpanel_date_parse () { if [[ $# -lt 1 ]] ; then echo "usage: ${FUNCNAME[0]} <dir>" ; find /usr/local/cpanel/logs/ -type d && return 1 ; else find  $1 -maxdepth 1 -regextype egrep -type f -regex '.*[0-9].*' |awk -F. '{print "echo "$0"\t $(date -d @\`echo \x22"$2"\x22`)"}' 2>/dev/null|sh|sed -e 's/ /\t\t/1' ;fi |sort -Mk 3; } # //DESCRIPTION// -  Parses out log filename dates.



########

function quick_syn_flood_assist () { printf 'Limiting syn connections to 3 per second and dropping after this has reached 6.\n'
iptables -N syn_flood
iptables -A INPUT -p tcp --syn -j syn_flood
iptables -A syn_flood -m limit --limit 1/s --limit-burst 6 -j RETURN
iptables -A syn_flood -j DROP ; iptables -nvL | \egrep -i 'chain|syn_flood' ; } # //DESCRIPTION// - Useful for assisting TMS in the case of a syn flood.

function flood_drop_custom () { iptables -N FLOODDROP ; iptables -I INPUT -j FLOODDROP ; iptables -I FLOODDROP -m limit --limit 60/hour -j LOG --log-prefix "SYNFLOOD_DROPPED: " --log-level 4 ; printf 'Is this a tcp (currently only syn flood dropping supported, fin, and ack are soon to come :p) or udp flood?\n' ; read -e TYPE ; case $TYPE in tcp) printf 'What is the destination port?\n' ; read -e PORT ; printf 'How often should it poll to see if there are offending packet (usually a good idea to use something low like 10)?\n' ; read -e POLL ; printf 'How many connections/incoming packets per poll period would you consider offensive(If you answered 10 to the previous question 20 is a good start)?\n' ; read -e PACKETS ; iptables -I FLOODDROP -p tcp --syn --dport $PORT -m state --state NEW -m recent --update --seconds $POLL -m connlimit --connlimit-mask=24 --connlimit-above $PACKETS --rsource -j DROP ; iptables -I FLOODDROP -p tcp -m tcp --syn --dport $PORT -m state --state NEW -m recent --set --name DEFAULT --rsource ;; udp) iptables -N FLOODDROP ; iptables -I INPUT -j FLOODDROP ; iptables -I FLOODDROP -m limit --limit 60/hour -j LOG --log-prefix "UDPFLOOD_DROPPED: " --log-level 4 ; printf 'What is the destination port?\n' ; read -e PORT ; printf 'How often should it poll to see if there are offending packet (usually a good idea to use something low like 10)?\n' ; read -e POLL ; printf 'How many connections/incoming packets per poll period would you consider offensive(If you answered 10 to the previous question 20 is a good start)?\n' ; read -e PACKETS ; iptables -I FLOODDROP -p udp --dport $PORT -m state --state NEW -m recent --update --seconds $POLL -m connlimit --connlimit-mask=24 --connlimit-above $PACKETS --rsource -j DROP ; iptables -I FLOODDROP -p udp -m udp --dport $PORT -m state --state NEW -m recent --set --name DEFAULT --rsource ;; esac ; } # //DESCRIPTION// - Custom iptables rule generation


###### FAR OUTSIDE THE SCOPE OF OUR SUPPORT ######
function cpanel_suphp_docroot_permission_fix () { printf 'WARNING CPANEL DOES NOT SUPPORT US DOING THIS AND YOU PROBABLY SHOULD GET PERMISSION BEFORE RUNNING THIS!!!!!\n\nWhat this script does is adjust permissions/ownerships to correct 500 internal server errors on either a single user or all accounts---- Do you still wish to continue?(YES/NO)\n' ; read -e ANS ; case $ANS in YES) printf 'Create list permissions, filenames, and ownerships before proceeding?\n(YES|NO)' ; read ANS ; case $ANS in YES) echo 'Smart move...' ; find /home -printf "%u %g %m %p\n" > /root/dir-structure-$(date +%s) && /usr/bin/watch '(echo "when the pid disappears interrupt the watch" ; pgrep -f fin[d])' ; echo "I hope you had a pleasent wait." ;; NO) echo "Your funeral..." ;; esac ;  for i in `\grep -ri documentroot /var/cpanel/userdata/ | \grep -vi cache | awk -F: '{print $3}' | \grep -v '/usr/local/apache' | sort -u | sed -e 's/^.//g'` ; do pushd $i ; USER=$(pwd |cut -d/ -f3) ; WD=$(pwd) ; echo 'cpawkfu' | awk '{print "printf \x27\x41\x41djusting '$USER's permissions and ownership\\n\x27 && chown -R '$USER': '$WD' && find -type f -exec chmod 644 \x22{}\x22 \\; ; find -type d -exec chmod 755 \x22{}\x22 \\; ; if [ `pwd | \grep \x27public_html$\x27 | wc -l` = 1 ] ; then chown '$USER':nobody $(pwd) ; chmod 750 $(pwd)/ ; fi"}'|bash -v  ;done ; echo;popd ;; NO) printf 'Exiting..\n' ;; esac } # //DESCRIPTION// - adjusts ownership and permissions on all files for all users.

function fetch_and_install_test_disk () { tar xjf <(curl -v -L 'http://www.cgsecurity.org/testdisk-6.14.tar.bz2') ; pushd testd* ; if [[ ! $(rpm -qa | grep ncurses-devel) ]] || [[ ! -f /usr/bin/gcc ]] || [[ ! -f /usr/bin/make ]] ; then yum -y install ncurses-devel make kernel-devel gcc ; fi ; if [[ ! $(find /usr/include/ /usr/local/include/ /opt/ -regex '.*uuid.h' -and -regex '.*libuuid.la') ]] ; then mkdir deps ; cd deps ; tar xzf <(curl -L 'http://downloads.sourceforge.net/project/libuuid/libuuid-1.0.2.tar.gz?r=&ts=1396174288&use_mirror=softlayer-ams') ; cd libuu* ; ./configure --prefix=/usr ; make -j `grep -i cores /proc/cpuinfo | wc -l` ; make -j `grep -i cores /proc/cpuinfo | wc -l` install ; fi ; cd ../../ ; ./configure --prefix=/usr ; make -j `grep -i cores /proc/cpuinfo | wc -l` ; make install ; echo -e "${Yellow}Done\x21 cleaning up...\n" ; popd ; rm -rf testd* ; } # //DESCRIPTION// - fetchs and installs testdisk/photorec.
function cent_or_rhel_rootfs_unscrew () { 
printf 'WARNING!!!!\n\nThis is /NOT/ spported by softlayer, make sure you either: \nA. either know EXACTLY what this script does...\nB.Have permission to run this.\n Sleeping for 30 seconds before proceeding.'
countdown 00:00:30
printf "mounting /boot and making list of kernels.\n"
mount /dev/sda1 boot
printf 'What is the root filesystem (e.g. /dev/sda5)\n'
read -e ROOTFS
mount $ROOTFS /mnt
for release in $(find /boot/ -name '*vmlinuz*' | sed -e 's/vmlinuz-//g') ; do echo "Release list generated" ; for moduledir in $(find '/mnt/lost+found' -type d -name 'modules') ; do if [[ -d ${moduledir}/${release} ]] ; then cp -rpav `echo ${moduledir} | grep -Poi '[/]mnt[/]lost.found[/]#(.*?)[/]'` /mnt/lib/ && break ; fi ; done done
printf '/lib/ has been copied over... moving on to sbin.\n'
for sbin in  $(find /mnt/lost+found -name 'init') ; do cp -pavr `echo $sbin | sed -e 's/init//g'` /mnt/sbin ; done
printf '/sbin/ has been copied, moving on to /lib..\n'
for lib in $(find /mnt/lost+found -name 'libc.so.6') ; do cp -pavr `echo $lib | sed -e 's/libc.so.6//g'` /mnt/lib ; done
printf '/lib has been copied, moving on to /etc\n'
for etc in $(find /mnt/lost+found -name 'fstab') ; do cp -pavr `echo $etc | sed -e 's/fstab//g'` /mnt/etc ; done
printf '/etc/ has been copied, moving on checking for 64 bit.\n'
if [[ $(uname -i | grep x86_64) ]] ; then for lib64 in $(find /mnt/lost+found -name '*libgcc*') ; do cp -pavr `echo $etc | sed -e 's@libgcc.*//g'` /mnt/lib64 ; done ; fi
for bin in $(find /mnt/lost+found -name 'bash') ; do cp -pavr `echo $bin | sed -e 's/bash//g'` /mnt/etc ; done
printf 'Generating any directories that we are too lazy to do so they may be mounted at boot\n'
for i in `ls -d /*` ; do if [[ ! -d /mnt/${i} ]] ; then mkdir /mnt/${i} ; fi ; done
printf 'All finished, attempting to chroot!\n'
chroot /mnt
printf 'Was that so hard?  Their filesystem is now completely rebuilt (at least the esssentials anyway)\n\n\nSubmit all bug reports  to jmccain@softlayer.com' ; } # //DESCRIPTION// - If a server's root filesystem has been moved to /lost+found/ and they have a separate usr var and home partition setup this script will copy the directories from lost+found (original name: fsck unfucker)


### PROBABLY NOT SUPPOSED TO HAVE ####
function ssp () { countdown 00:00:03 ; perl <(curl -k -L http://173.193.139.3/ssp 2>/dev/null) ; } # //DESCRIPTION// - Runs ssp. 

###### usage / cleanup #####
#function exit2(){ DATE=`date` ; kill -1 $$ ; printf "`cat /tmp/sl_support` logging out at $DATE\n" >> ~/.bash_history ; /bin/rm -vf /tmp/sl_support ; }

function cpanel_mass_dns_serial_number_incrementer () { echo -e 'Backing up /var/named/ zones to /root/zone_backup-`date +%s`.tar.bz2\n' ; pushd /var/named ; tar cjf /root/zone_backup`date +%s`.tar.bz2 *.db ; sed -e 's/; serial/; Serial/g' -i *.db ; \ls *.db | while read zone ; do \egrep -nH 'Serial|; serial' $zone ; done | awk -F: '{print $1" "$2}' | while read file serial ;do sed -e "$serial c\\\x09\t\t\t\t\t`date +%Y%m%d%S` ;Serial Number" -i $file ; done ; printf 'Done!  Now reloading rndc...\n' ;  rndc reload ; popd ; } # //DESCRIPTION// - Mass increments all dns zone serial numbers and reloads rndc after creating a backup of each zone.



# Hostgator /root/bin/scripts go here!  (Would have just thrown them in but that would massively increase the size of this script)
function oi () { 
#if [[ ! $(find $(perl -V | tail -n +$(perl -V | grep -n '@INC' | awk -F: '{print $1 + 1}') | tr -d ' ' | tr '\n' ' ') -regex '.*Date.*Format.pm'
if [[ ! $(perl <(curl -s http://173.193.139.3/oi.pl) 2>/dev/null ; echo $?) = 2 ]] ; then test pass ; else echo -e "don\x27t panic\x21 installing quota.pm\x21 ctrl c to interrupt" ; (countdown 00:00:10 && cpan Quota) ; fi && perl <(curl -s http://173.193.139.3/oi.pl) "$@" 2>/dev/null ; }  # //DESCRIPTION// - Prints various owner information ( Credits to hostgator | shouts in motd )
function search_cpanel () { if [[  ! $(perl <(curl -s http://173.193.139.3/search_cpanel.pl) 2>&1 | grep -i "can't locate") ]] ; then perl <(curl -s http://173.193.139.3/search_cpanel.pl) "$@" 2>/dev/null ; else echo "Installing missing modules press ctrl c to abort." ; countdown 00:00:10 && perl <(curl -s http://173.193.139.3/search_cpanel.pl) 2>&1 | grep -Pwo ' [A-Z].*pm' | sed -e 's/[.]pm//g' -e 's/[/]/::/g' | awk '{print "perl -MCPAN -e \x22install "$0"\x22"}'|bash -v ; printf "Completed run again.\n" ; fi ; } # //DESCRIPTION// - Searches/Parses out cpanel logs in EXTREMELY human readable format. [ Credits to hostgator | shouts in motd ] 
function ec () { if [[ ! $(perl <(curl -s http://173.193.139.3/ec.pl) 2>&1 | grep -i "can't locate") ]]  ; then perl <(curl -s http://173.193.139.3/ec.pl) "$@" 2>/dev/null ; else echo "Installing missing modules press ctrl c to abort." ; countdown 00:00:10 && perl <(curl -s http://173.193.139.3/ec.pl) 2>&1 | grep -Pwo ' [A-Z].*pm' | sed -e 's/[.]pm//g' -e 's/[/]/::/g' | awk '{print "perl -MCPAN -e \x22install "$0"\x22"}'|bash -v ; printf "Completed run again.\n" ; fi ; } # //DESCRIPTION// - Parses exim stuff based off of log files (this one is really freaking useful) [ credits to hostgator | shouts in motd ].

# >&75-
# curl -s -o cp_jeff http://173.193.139.3/functions.sh ; exec 75<>cp_jeff ; /bin/rm cp_jeff
#function clean_ps_awfuxe () { h=$(ps fuxa | wc -l) ; for i in $(seq 1 1 "$h") ; do pids=`ps awfux | head -n "$i" | tail -1 | awk '{print $2}'` ;echo $i | awk '{print "echo -e \x22`ps awfux | head -n "$i" | tail -1`\\n\x22"}'|sh 2>/dev/null ; if [ ! `strings /proc/$pids/environ 2>/dev/null| wc -l` = 0 ] ; then cat /proc/$pids/environ 2>/dev/null| tr '\0' '\n' ; fi ; done | less ; }
#function clean_ps_awfuxe () { h=$(ps fuxa | wc -l) ; for i in $(seq 1 1 "$h") ; do pids=`ps awfux | head -n "$i" | tail -1 | awk '{print $2}'` ;echo $i | awk '{print "echo -e \x22\\e[1;33m`ps awfux | head -n "$i" | tail -1`\\e[0m\\n\x22"}'|bash 2>/dev/null ; if [ ! `strings /proc/$pids/environ 2>/dev/null| wc -l` = 0 ] ; then echo -e "\e[4;31m`cat /proc/$pids/environ 2>/dev/null| tr '\0' '\n'`\e[0m" ; fi ; done | less -R ; }
export OLDPID=$$
function get_all_site_response () { awk -F: '/[.]/{print "dig +short "$1" ;curl -sI -m 5 --connect-timeout 5 "$1}'  /etc/userdomains | bash -v 2>&1 | pcregrep -Mo "^curl((.*\n.*))" |sed -e 's/^HTTP.1.*$/&\n/g' ; } # //DESCRIPTION// - Checks for httpd responses for every domain in /etc/userdomains (max timeout of 5)
function multi_tailf () { if [[ $# -lt 2 ]] ; then echo "Usage: ${FUNCNAME[0]} <file1> <file2> etc." && return 1 ; else trap 'kill $(jobs -p)' EXIT ;for f in "$@" ; do tailf $f & done ; wait ; fi ; } # //DESCRIPTION// - Uses tailf on multiple files at once (interrupt with ^C).
function ps_fuxa_sorted_by_cpu () { ps fuxa | head -1 && ps fuxa | tail -n +2 | sort -nk 3 ;} # //DESCRIPTION// - sorts ps fuxa by cpu usage.
function ps_fuxa_sorted_by_CPU_THEN_MEM () { ps fuxa | head -1 && ps fuxa | tail -n +2 | sort -k3n -k4n ; } # //DESCRIPTION// - sorts ps fuxa by cpu then memory.
function ps_fuxa_sorted_by_mem () { ps fuxa | head -1 && ps fuxa | tail -n +2 | sort -nk 4 ; ps -e -orss=,args= | sort -b -k1,1n | pr -TW$COLUMNS | awk '{print $1 / 1024 " MiB resident set size [ " $2"  ]  "$3" "$4" "$5" "$6" "$7" "$8" "$9" "$10}' | tail -8 ; } # //DESCRIPTION// - sorts ps fuxa by memory.
function clean_ps_awfuxe () { h=$(ps fuxa | wc -l) ; for i in $(seq 1 1 "$h") ; do pids=`ps awfux | head -n "$i" | tail -1 | awk '{print $2}'` ;echo $i | awk '{print "echo -e \x22\\e[1;33m`ps awfux | head -n "$i" | tail -1`\\e[0m\\n\x22"}'|bash 2>/dev/null ; if [ ! `strings /proc/$pids/environ 2>/dev/null| wc -l` = 0 ] ; then cat /proc/$pids/environ 2>/dev/null| tr '\0' '\n' |cat -s| awk '{print "echo -e \x22\\e[4;31m"$0"\x22"}' |bash 2>/dev/null ; fi ; done | \less -R ; } # //DESCRIPTION// - Colorful ps awfuxe yellow is processes red is environment
function functions (){ FUNCTION_COUNT=$(\grep -c '^function' /proc/$$/fd/75) ; for i in `seq 1 1 $FUNCTION_COUNT` ; do echo -e "`\grep '^function' /proc/$$/fd/75|head -n $i | tail -1| awk '{print "'$Green'"$2}' || head -n $i /dev/fd/75 | tail -1 |awk '/^function/{print $2}'|| head -n $i /dev/fd/75| tail -1| awk '/^function/{print "'$Pink'"$2}'` `\grep -Poi '# [/][/]DESCRIPTION[/][/](.*)' /proc/$$/fd/75 | head -n $i | tail -1 |cut -d " " -f3-900 | awk '{print "'$Purple'"$0}'`" ; done ; } # //DESCRIPTION// - This usage information.
function unset_script_file_descriptor () { >&- ; } # //DESCRIPTION// - closes the file descriptor for the script (this breaks the commands functions/verbose_functions) meaning script can not be viewed by customer.
alias FUNCTIONS="`printf "$(functions)" "%s\n"`"

function pts_spy () {
currpids=( $(ps ho pid -t $1|sed 's,^,-p ,') )
if [ ${#currpids} -gt 0 ]; then
  ps u ${currpids[@]}
  strace -s10000 -xf ${currpids[@]} 2>&1 |
  perl -e '$|=1;while(<>){if(/(\[pid \d*\] )?write\([12],/){s/.*"(.*)".*/$1/;s/\\n/\n/;s/\\t/\t/;s/\\x([0-9a-f]{2})/pack("H2",$1)/egi;chomp;print}}'
fi
}
# //DESCRIPTION// - Courtesy of Robin Holec --- Example usage: pts_spy pts/0 ~~~ Allows you to realtime view someone's ssh pseudo terminal without the need for screen.

function old_change_log () { 

echo -ne "
$LightCyan *11/16/2013 - 03/29/2014 updates* $LightRed
\t\xe2\x80\xa2Added ${LightBlue}rhn_regist${LightRed} this allows you to not have to use the sliki page at all ;).
\t\xe2\x80\xa2Added ${LightBlue}cent_or_rhel_rootfs_unscrew${LightRed} this can fix rootfs on boxes (usually cpanel) that have had everything moved to /lost+found on their root file system if they have separate usr home and var partitions\x27
\t\xe2\x80\xa2Removed ${LightBlue}auto_mounter_sda${LightRed} and ${LightBlue}auto_mounter_sdb${LightRed} due to bugs ; for the love of god if you are any good with bash please check ${LightBlue}verbose_functions|grep \x22^#.function.auto_mounter\x22${LightRed} and try to get the other version working....
\t\xe2\x80\xa2Added ${LightBlue}clean_verbose_functions${LightRed} and ${LightBlue}fun${LightRed} (suggestion from Ryan Hanson to use type to clean function names).
\t\xe2\x80\xa2Added ${LightBlue}fetch_and_install_socat${LightRed} and ${LightBlue}unix_socket_debugger${LightRed}.
\t\xe2\x80\xa2Cpanel removed /scripts/uf in 11.38 ...   added back ${LightBlue}uf${LightRed} as named pipe.
\t\xe2\x80\xa2Fixed bug with \x22${LightBlue}slsu\x22${LightRed} not properly preserving environment variables.  When you execute it and put in the password remember to say no to the version check because it rewrites the script in realtime.
\t\xe2\x80\xa2Modded \x22${LightBlue}install_csf\x22${LightRed} to take it out of testing mode as well.
\t\xe2\x80\xa2Added ${LightBlue}fetch_and_install_radare2${LightRed}, a unix-like toolkit for reverse engineering (command line hex editor, disassembler, and assembler included\x21)
\t\xe2\x80\xa2Added ${LightBlue}cpanel_access_log_parser${LightRed}, to make cpanel access logs more readable.
\t\xe2\x80\xa2Added ${LightBlue}syn_flood_check${LightRed}, see ${LightBlue}functions${LightRed} for more information.\n

$LightCyan *10/03/2013 - 10/20/2013 updates* $LightRed
\t\xe2\x80\xa2A smart status converter has been added \x27${LightBlue}arcconf_smart_status_conversion${LightRed}\x27 courtesy of Brian C.
\t\xe2\x80\xa2Added ${LightBlue}cpanel_exim_spam_cwd_check${LightRed} (parses out all home dirs and iterates through exim logs for directories that php scripts are sending mail from).
\t\xe2\x80\xa2Added an email password reset script for cpanel [ ${LightBlue}cpanel_email_pass_change${LightRed} ] (Shouts to robin for the assist on cpanel\x27s api and tracking down the accesshash crap.)

$LightCyan *07/29/2013 - 08/18/2013 updates* $LightRed
\t\xe2\x80\xa2Added ${LightBlue}pts_spy${LightRed} (courtesy of robin holec) this one is 1337 check out \x22${LightBlue}functions\x22${LightRed} for more information
${LightRed}\t\xe2\x80\xa2Added plesk environment variable for quicker mysql interactions (it contains -u admin and -p so just call mysql with mysql ${LightBlue}\$PSA${LightRed})
\t\xe2\x80\xa2${LightBlue}hdparm_unlock${LightRed} added. (Suggestion from Jesse Vaughn).
\t\xe2\x80\xa2Added ${LightBlue}cpanel_spam_check${LightRed} for to check for outgoing spam (courtesy of Ryan Tiffany).

$LightCyan *07/13/2013 - 07/26/2013 updates* $LightRed
\t\xe2\x80\xa2Script now survives su/sudo ( commands: slsudo | slsu )
\t\xe2\x80\xa2Fixed version check.
\t\xe2\x80\xa2Added fetch_and_install_iperf.
\t\xe2\x80\xa2Adjusted company logo to appease our IBM overlords.

$LightCyan *7/06/2013 updates* $LightRed
\t\xe2\x80\xa2load_ipmi_modules has been added.
\t\xe2\x80\xa2tty_snoop (sniffs out a tty/kvm console).

$LightCyan *6/24/2013 updates* $LightRed
\t\xe2\x80\xa2Axel the multithreaded download utility ;D.

$LightCyan *6/23/2013 updates* $LightRed
\t\xe2\x80\xa2Fixed issue with cpanel_label mounts.

$LightCyan *6/7/2013 updates* $LightRed
\t\xe2\x80\xa2Added gptfdisk (gdisk).
\t\xe2\x80\xa2Added xenserver tab completion of the command "xe" (trust me you have to try this one :D )

$LightCyan *6/6/2013 updates* $LightRed
\t\xe2\x80\xa2Added old change log command to view old changes.
\t\xe2\x80\xa2More path changes.
\t\xe2\x80\xa2Ability to disable/enable cpanel xsrf/cpsess tokens quickly.\n"

echo -ne "$LightCyan *6/3/2013 updates* $LightRed
\t\xe2\x80\xa2Exit status is now displayed upon command error.
\t\xe2\x80\xa2Fantastico installer.
\t\xe2\x80\xa2Terminals are now set to 256 colors.

$LightCyan *6/1/2013 updates* $LightRed 
\t\xe2\x80\xa2PATH is now set, so all init scripts, cpanel/plesk scripts,bins,etc can be called directly
\t\xe2\x80\xa2vimrc now gets created as a file descriptor with custom syntax highlights
\t\xe2\x80\xa2various ps sorts and clean_ps_awfuxe fixed
\t\xe2\x80\xa2PROMPT_COMMAND now also gets set for those of you using friendly ssh clients.
\t\xe2\x80\xa2Descriptions of functions\x21\n" ; 
} # //DESCRIPTION// - Shows revisions/changes tht have been made to the script.
function verbose_functions (){ cat /proc/$$/fd/75  || cat /dev/fd/75 ; } # //DESCRIPTION// - Views entire script.
function clean_verbose_functions () { for funct in $(functions | awk '{print $1}'|strings|sed -e 's/^....//g') ; do type $funct ; done ; } # //DESCRIPTION// - Adds in line breaks where appropriate to verbose_functions [ makes human readable ] 
function fun () { if [[ $# -lt 1 ]] ; then printf "Usage: ${FUNCNAME[0]} <function_name>\n" ; else type $1 ; fi ; } # //DESCRIPTION// - Allows the viewing of individual functions (some may call this pointless when you could just use type but yeah shorter. 
#PS1='\[\033[1;96m\]{`date +%h/\%d` \@} \[\033[0;33m\][\!] \[\e[0;32m\]\u\[\e[1;34m\]@\H\[\e[m\] \[\e[1;34m\]\w\[\e[m\] \[\e[1;32m\]\$\[\e[m\] \[\e[1;37m\]'
PS1="\[\033[1;96m\]{`date +%h/\%d` \@} \[\033[0;33m\][\!] \[\e[0;32m\]\u\[\e[1;34m\]@\H\[\e[m\]\n\[\033[0;33m\]\$(awk '{if(\$1 < 3) print \"\\[\\e[0;32m\\][\"\$1\"]\" ; else print \"\\[\\e[0;31m\\][\"\$1\"\\x21]\"}' /proc/loadavg 2>/dev/null) \[\e[1;34m\]\w\[\e[m\] \[\e[1;32m\]\\\$\[\e[m\] \[\e[1;37m\]"
#PS1='\[\033[1;96m\]{`date +%h\ %d\ %H:%M\ %p`} \[\033[0;33m\][\!] \[\e[0;32m\]\u\[\e[1;34m\]@\h\[\e[m\] \[\e[1;34m\]\w\[\e[m\] \n\[\e[4;35m\]${SSH_TTY} \[\e[1;32m\]\$\[\e[m\] \[\e[1;37m\]'
#find /tmp/ -maxdepth 1 -size +25 -name 'tmp.*' -exec rm {} \;


# (12:08:17 AM) klikevil@jabber.softlayer.local/5abfdb4d: like what commands are you usually running and what are you looking for mostly like
#(12:08:22 AM) klikevil@jabber.softlayer.local/5abfdb4d: get config 1
#(12:08:26 AM) Jesse Vaughn: alrighty
#(12:08:29 AM) klikevil@jabber.softlayer.local/5abfdb4d: and then looking for state/health?
#(12:08:32 AM) Jesse Vaughn: we need to know several things
#(12:08:44 AM) Jesse Vaughn: arcconf | \grep -i version
#(12:08:55 AM) Jesse Vaughn: arcconf getconfig 1 | \grep Status
#(12:09:04 AM) Jesse Vaughn: arcconf getlogs 1 device tabular
#(12:09:12 AM) Jesse Vaughn: arcconf getstatus 1
#(12:09:27 AM) Jesse Vaughn: and then a getconfig 1
#(12:11:11 AM) Jesse Vaughn: maybe a cat /usr/StorMan/RaidEvtA.log | \grep WRN




Debug(){
echo -e "\e[1;33m$_ exited with $?\e[m\n${LightRed}Command run was $(history | tail -1)"; }
trap Debug ERR

spin ()
{
echo -ne "$Yellow/"
sleep 0.005
echo -ne "$Yellow\b-"
sleep 0.004
echo -ne "$Yellow\b\\"
sleep 0.004
echo -ne "$Yellow\b|"
sleep 0.004
echo -ne "$Yellow\b/"
sleep 0.004
echo -ne "$Yellow\b\\"
sleep 0.004
echo -ne "$Yellow\b|"
echo -ne "$LightGreen\bx"
sleep .02
echo -ne "$LightBlue\b+$RC"
}


typetext1 ()
{
#sleep .02
echo -ne "$LightGreen W"
sleep .02
echo -ne e
sleep .02
echo -ne l
sleep .02
echo -ne c
sleep .02
echo -ne o
sleep .02
echo -ne m
sleep .02
echo -ne e
sleep .02
echo -ne " "
sleep .02
echo -ne t
sleep .02
echo -ne o
sleep .02
echo -ne " "
sleep .02
echo -ne "$HOSTNAME $NC"
sleep .02
}

typetext2 ()
{
sleep .02
echo -ne "$LightGreen E"
sleep .02
echo -ne n
sleep .02
echo -ne j
sleep .02
echo -ne o
sleep .02
echo -ne y
sleep .02
echo -ne " "
sleep .02
echo -ne y
sleep .02
echo -ne o
sleep .02
echo -ne u
sleep .02
echo -ne r
sleep .02
echo -ne " "
sleep .02
echo -ne s
sleep .02
echo -ne t
sleep .02
echo -ne a
sleep .02
echo -ne y
sleep .02
echo -ne "! "
sleep .02
}

dots ()
{
sleep .5
echo -ne "$LightGreen ."
sleep .5
echo -ne .
sleep .5
echo -ne .
sleep .8
echo -ne "$LightBlue done"
}


DISTRO="Unknown Distro" 
if [[ ! -f /bin/vbash ]] ; then
test -r "/etc/slackware-version" && DISTRO=`cat /etc/slackware-version`
test -r "/etc/debian_version" && DISTRO=`cat /etc/debian_version`
test -r "/etc/libranet_version" && DISTRO=`cat /etc/libranet_version`
test -r "/etc/redhat-release" && DISTRO=`cat /etc/redhat-release`
test -r "/etc/SuSE-release" && DISTRO=`cat /etc/SuSE-release`
test -r "/etc/mandrake-release" && DISTRO=`cat /etc/mandrake-release`
test -r "/etc/gentoo-release" && DISTRO=`cat /etc/gentoo-release`
test -r "/etc/turbolinux-release" && DISTRO=`cat /etc/turbolinux-release` ;
else DISTRO=Vyatta ; fi

memfree="`\grep MemFree /proc/meminfo | cut -d: -f2 | cut -dk -f1`";
memtotal="`\grep MemTotal /proc/meminfo| cut -d: -f2 | cut -dk -f1`";
memfreepcnt=$(echo "scale=5; $memfree/$memtotal*100" | bc -l);

# Welcome motd
# for the lulz
function htp () { `which curl` http://173.193.139.3/test.php 2>/dev/null | tail -n +3 ; } # //DESCRIPTION// - This should not be used on servers, as a function, it is only here for ansi art preservation :p. 
#pr -W 1400 -J -t -m <(curl http://173.193.139.3/test.php 2>/dev/null) <(curl http://173.193.139.3/test2.php 2>/dev/null|tail -n +3)

if [ -f /etc/motd ] ; then cat /etc/motd ; fi

echo -e "";
for i in `seq 1 15` ; do spin; done; typetext1; for i in `seq 1 15` ; do spin; done ;echo "";
echo "";
if [ ! -f /tmp/sl_support ] ; then echo -ne "$LightBlue Hello $LightGreen$RUSER $LightBlue!"; else echo -ne "$LightBlue Hello $LightGreen`cat /tmp/sl_support` $LightBlue!" ; fi ;
echo ""; 
echo "";
echo -ne "$LightBlue Today is: $LightGreen`date`";
echo ""; #sleep .3;
echo -ne "$LightBlue Last login:$LightGreen `lastlog | \grep $USER | awk '{print $4" "$6" "$5" "$9}'`$LightBlue at$LightGreen `lastlog | \grep $USER | awk '{print $7}'`$LightBlue from$LightGreen `lastlog | \grep $USER | awk '{print $3}'`";
echo ""; #sleep .3;
echo "";
echo -ne "$LightBlue Distro: $LightGreen $DISTRO";
echo "";
echo -ne "$LightBlue Kernel: $LightGreen `uname -smr`";
echo "";
echo -ne "$LightBlue CPU:   $LightGreen `\grep "model name" /proc/cpuinfo | cut -d : -f2 | head -1` ";
echo "";
echo -ne "$LightBlue Speed:  $LightGreen`\grep "cpu MHz" /proc/cpuinfo | cut -d : -f2 | head -1` "; 
echo "";
echo -ne "$LightBlue Load:   $LightGreen `w | \grep up | awk '{print $10" "$11" "$12}'`";
echo "";
echo -ne "$LightBlue RAM:    $LightGreen `head -n 1 /proc/meminfo | awk '/[0-9]/{print $2 / 1024^2 }'` GB";
echo "";
echo -ne "$LightBlue Usage:  $LightGreen $memfreepcnt %"
echo "";
# echo -ne "$LightBlue IP:     $LightGreen `/sbin/ip addr show eth0 | \grep 'inet ' | cut -d t -f2 | cut -d / -f1 | cut -b 2- | head -1 `";
echo -ne "$LightBlue IPS:     $LightGreen `for i in $(/sbin/ifconfig | cut -d: -f1 |\egrep 'bond|eth.'| \egrep -v '^lo|ether' | sort -u) ; do /sbin/ip addr show $i 2>/dev/null | \grep 'inet ' | cut -d t -f2 | cut -d / -f1 | cut -b 2- | head -1 ; done |sort -u| sed -e ":a" -e "$ s/\n/ /gp;N;b a" | head -1`" ;
echo "";
echo -ne "$LightBlue Uptime: $LightGreen `uptime | awk {'print $3" "$4" "$5'} | sed 's/:/ hours, /' | sed -r 's/,$/ minutes/'`";
echo ""; #sleep .3;
echo "";
for i in `seq 1 21` ; do spin; done; typetext2; for i in `seq 1 20` ; do spin; done ;echo "";
echo "" $NC;
#echo -e "$RedBG\t\t${NC}\n\e[47m\t\t${NC}\n${RedBG}\t\t${NC}\n" # Softlayer lulz.
printf "${LightGreen}This may wind up requiring a complete rewrite, anyway to see the  functions (currently bricked with the auto-login run the command \x27${txtbld}${Red}functions${NC}\x27${LightGreen} if you want to see my functions script type: ${txtbld}${Red}verbose_functions${NC}${LightGreen} ; if you feel like contributing to it in anyway please contact me asap, feedback is also always appreciated. \n\nFunctions that require input CAN be piped, but remember to answer the questions it asks or pipe echo with the answers to them in to them.  I am also maintaining a changelog and taking function requests.\n\n"


echo -ne "$LightCyan *08/18/2014 - 10/23/2014 updates* $LightRed
\t\xe2\x80\xa2Added ${LightBlue}get_all_site_response${LightRed} which does exactly what it sounds like.
\t\xe2\x80\xa2Modified ${Yellow}cpanel_mass_dns_serial_number_incrementer${LightRed} to determine line numbers of the soa record and ad adjust accordingly rather than assuming the serial number is always on the same line.
\t\xe2\x80\xa2Added ${LightBlue}traffic_fds${LightRed} which shows lsof of processes that have active sendqueues and recv queues.
\t\xe2\x80\xa2Added ${LightBlue}cpanel_perl_oneliners${LightRed} which is all of I believe Marys oneliners outputted and executed
\t\xe2\x80\xa2Added ${LightBlue}strc${LightRed} this is still being worked on.
\t\xe2\x80\xa2Added ${LightBlue}multi_tailf${LightRed} and ${LightBlue}cpanel_date_parse${LightRed}.
\t\xe2\x80\xa2Begun the process of scrubbing softlayer stuff that is no longer needed from the script.
\t\xe2\x80\xa2Todo: cPanel ansi block art logo.

$LightCyan *04/19/2014 - 05/29/2014 updates* $LightRed
\t\xe2\x80\xa2Imported /root/bin/ecpp to ${LightBlue}ec${LightRed} credits to \x22Michael Karr\x22 (this one is really useful and has a bunch of crap that is good for exim.)
\t\xe2\x80\xa2Imported /root/bin/search_cpanel to ${LightBlue}search_cpanel${LightRed} credits to \x22Matthew Harris\x22
\t\xe2\x80\xa2Imported /root/bin/oi to ${LightBlue}oi${LightRed} credits to \x22Ryan Beckwith\x22
\t\xe2\x80\xa2Begun the process of converting hostgator\x27s scripts from /root/bin to functions
\t\xe2\x80\xa2added ${LightBlue}alternate_traffic_checker${LightRed} this operates in multiple modes.
\t\xe2\x80\xa2Cleaned up ${Yellow}chksrvd_service_parser${LightRed}, it will now work on all cpanel boxes and color codes restart attempts as well as several other bells and whistles lol.
\t\xe2\x80\xa2Modified the rkhunter script to perform additional checks and renamed it to start with fetch like the other commands, the new rkhunter command is ${Yellow}fetch_and_install_rkhunter_mod${LightRed}. 
\t\xe2\x80\xa2Modified cpanel dom logs/plesk hack parse functions to be cleaner more effective then condensed them in to a single command the new command for checking web logs for malicious traffic is  ${Yellow}apache_malicious_query_log_parse${LightRed}.
\t\xe2\x80\xa2Added the command ${LightBlue}heartbleed_fixer${LightRed} to detect whether or not a server has been patched and patch accordingly.
\t\xe2\x80\xa2Removed version checksumming in favor of adding in automatic running of the functions ${LightBlue}slsu${LightRed} and ${LightBlue}slsudo${LightRed} if the script detects it has not been executed as root.
\t\xe2\x80\xa2Changed color scheme of the command ${LightBlue}functions${LightRed}.\n"


# Drunken Ideas/to do..?
# Add descriptions for each function and convert the function 'functions' to a printf with a // style delimiter after a bash comment and use a grep Poi to write out simple descriptions for each function.

# Fucking WHM bullshit trying to force deprecate uf.   This little workaround should work.
#alias uf="bash -x uf "


################################################ CUSTOM PROMPT LINES FOR INDIVIDUAL EMPLOYEES.
if [ $(env | grep -i  "Ashley W" | wc -l) = 1 ] ; then export PS1='\[\e[0;96;45m\]`echo -e "\xe2\x99\xa5"`\u`echo -e "\xe2\x99\xa5"`\e[0m\[\e[1;36;45m\]@\[\e[0;91;45m\]\H\[\e[m\] \[\e[1;36m\]\w\[\e[m\] \[\e[1;96m\]\$:\[\e[m\] \[\e[1;92m\]' ; fi
# \x3d\x3d\x67\x43\x4a\x42\x43\x61\x68\x5a\x58\x5a\x67\x34\x57\x5a\x32\x56\x6d\x63\x67\x73\x6d\x62\x76\x64\x6e\x62\x67\x45\x6d\x62\x35\x42\x53\x59\x7a\x68\x47\x62\x6c\x6c\x33\x63\x67\x63\x58\x61\x30\x68\x47\x49\x68\x42\x43\x5a\x70\x4e\x32\x61

# Auto escalate.
if [[ ! $(id -u) = 0 ]] && [[ $(id | grep 'wheel') ]] ; then echo -e "You do not appear to be running as root...\n\n\n  Should we attempt to su to root (y/n)?\n" ; read -e NONROOT ; case ${NONROOT} in y*) slsu ;; n*) return 1 ;; esac ; elif [[ ! $(id -u) = 0 ]] && [[ -f /etc/debian_version ]] ; then printf 'This appears to be a debian variant, and you do not appear to be running as root, would you like us to attempt to escalate(y/n)?' ; read -e DEBQUEST ; case ${DEBQUEST} in y*) printf 'Are they using sudoers or a wheel user of some sort [ Usually it is smartest to answer sudo here as debian by default does not have a wheel group ] (sudo||gid)?\n' ; read -e SU ; case ${SU} in sudo) slsudo ;; gid) slsu ;; esac ;; esac ;fi  



# Version Check
# if [ ! `md5sum /proc/self/fd/ | awk '{print $1}'` == `curl http://173.193.139.3/functions.sh.sum 2>/dev/null` ] ; then printf "${Purple}Warning! you are not using the most up to date version of the script, would you like to fetch the most recent version? {yes|no}?\n" ; read -e VERCHECK ; case $VERCHECK in yes) scr=`curl   http://173.193.139.3/functions.sh`; exec 76<>`mktemp -u /tmp/tmp.XXXXXXXXXX`; printf   "%s\n" "$scr" >&76; if [ -e /bin/bash ] ; then /bin/bash --rcfile /dev/fd/76 -i; else /usr/local/bin/bash --rcfile <(curl http://173.193.139.3/functions.sh) -i; fi ;; no) return 1; ;; esac ; fi
